<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Language Reference :: Pkl Docs</title>
    <link rel="canonical" href="https://pkl-lang.org/main/current/language-reference/index.html">
    <link rel="prev" href="../language.html">
    <link rel="next" href="../standard-library.html">
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../_/css/search.css">
<link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
<link rel="icon" type="image/svg+xml" href="../../../_/img/favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/favicon-16x16.png">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="../../../index.html"><img src="../../../_/img/favicon.svg" alt="Pkl" height="35" width="35"/></a>
        <a href="../../../index.html">Pkl</a>
        <span class="separator">//</span>
        <a href="../../../main/current/index.html">Docs</a>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
          <span></span>
          <span></span>
          <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Enter Search Term">
        </div>
      </div>
      <div class="navbar-end">
        <a class="navbar-item" href="../../../main/current/index.html">Language</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a href="../../../main/current/language-bindings.html" class="navbar-link">Bindings</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../main/current/java-binding/index.html">Java</a>
            <a class="navbar-item" href="../../../main/current/kotlin-binding/index.html">Kotlin</a>
            <a class="navbar-item" href="../../../swift/current/index.html">Swift</a>
            <a class="navbar-item" href="../../../go/current/index.html">Go</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a href="../../../main/current/integrations.html" class="navbar-link">Frameworks</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../spring/current/index.html">Spring (Boot)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a href="../../../main/current/tools.html" class="navbar-link">Editors</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../intellij/current/index.html">IntelliJ</a>
            <a class="navbar-item" href="../../../neovim/current/index.html">Neovim</a>
            <a class="navbar-item" href="../../../vscode/current/index.html">VS Code</a>
            <a class="navbar-item" href="../../../lsp/current/index.html">Pkl Language Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a href="../../../main/current/resources.html" class="navbar-link">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/apple/pkl">GitHub</a>
            <a class="navbar-item" href="https://pkl-lang.org/package-docs/pkl/current/index.html">Standard Library</a>
            <a class="navbar-item" href="https://pkl-lang.org/package-docs/">Package Docs</a>
            <a class="navbar-item" href="../../../main/current/style-guide/index.html">Style Guide</a>
            <a class="navbar-item" href="../../../security.html">Security</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a href="../../../main/current/community.html" class="navbar-link">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://github.com/apple/pkl/discussions" target="_blank">GitHub Discussions</a>
            <a class="navbar-item" href="../../../blog/index.html">Blog</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="main" data-version="0.26.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Main Project</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction/index.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/use-cases.html">Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/concepts.html">Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/comparison.html">Comparison</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pkl-cli/index.html#installation">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../language-tutorial/index.html">Tutorial</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../language-tutorial/01_basic_config.html">Basic Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../language-tutorial/02_filling_out_a_template.html">Filling out a Template</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../language-tutorial/03_writing_a_template.html">Writing a Template</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../language.html">Language</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="index.html">Language Reference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../standard-library.html">Standard Library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../language-bindings.html">Language Bindings</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../java-binding/index.html">Java</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../java-binding/codegen.html">Code Generator</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../pkl-core/index.html">pkl-core Library</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../java-binding/pkl-config-java.html">pkl-config-java Library</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kotlin-binding/index.html">Kotlin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../kotlin-binding/codegen.html">Code Generator</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../kotlin-binding/pkl-config-kotlin.html">pkl-config-kotlin Library</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../swift/current/index.html">Swift</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../go/current/index.html">Go</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../bindings-specification/index.html">Specification</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../bindings-specification/message-passing-api.html">Message Passing API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../bindings-specification/binary-encoding.html">Pkl Binary Encoding</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tools.html">Tools</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../pkl-cli/index.html">CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../pkl-doc/index.html">Pkldoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../pkl-gradle/index.html">Gradle Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Editor support</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../intellij/current/index.html">IntelliJ</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../vscode/current/index.html">VSCode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../neovim/current/index.html">Neovim</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../release-notes/index.html">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/0.26.html">0.26 Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/0.25.html">0.25 Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/changelog.html">Changelog</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Main Project</span>
    <span class="version">0.26.3</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../intellij/current/index.html">IntelliJ Plugin</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../intellij/current/index.html">0.31.1</a>
        </li>
        <li class="version">
          <a href="../../../intellij/0.30.1/index.html">0.30.1</a>
        </li>
        <li class="version">
          <a href="../../../intellij/0.29.0/index.html">0.29.0</a>
        </li>
        <li class="version">
          <a href="../../../intellij/0.28.0/index.html">0.28.0</a>
        </li>
        <li class="version">
          <a href="../../../intellij/0.27.0/index.html">0.27.0</a>
        </li>
        <li class="version">
          <a href="../../../intellij/0.26.0/index.html">0.26.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../../current/index.html">Main Project</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../current/index.html">0.28.0</a>
        </li>
        <li class="version">
          <a href="../../latest/index.html">0.28.0-dev</a>
        </li>
        <li class="version">
          <a href="../../0.27.2/index.html">0.27.2</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">0.26.3</a>
        </li>
        <li class="version">
          <a href="../../0.25.3/index.html">0.25.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../neovim/current/index.html">Neovim Plugin</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../neovim/current/index.html">0.6.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../blog/index.html">Pkl Blog</a></div>
    </li>
    <li class="component">
      <div class="title"><a href="../../../go/current/index.html">Pkl Go Bindings</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../go/current/index.html">0.9.0</a>
        </li>
        <li class="version">
          <a href="../../../go/0.8.0/index.html">0.8.0</a>
        </li>
        <li class="version">
          <a href="../../../go/0.7.0/index.html">0.7.0</a>
        </li>
        <li class="version">
          <a href="../../../go/0.6.0/index.html">0.6.0</a>
        </li>
        <li class="version">
          <a href="../../../go/0.5.3/index.html">0.5.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../swift/current/index.html">Pkl Swift Bindings</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../swift/current/index.html">0.4.1</a>
        </li>
        <li class="version">
          <a href="../../../swift/0.3.0/index.html">0.3.0</a>
        </li>
        <li class="version">
          <a href="../../../swift/0.2.3/index.html">0.2.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../lsp/current/index.html">pkl-lsp</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lsp/current/index.html">0.1.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../index.html">ROOT</a></div>
    </li>
    <li class="component">
      <div class="title"><a href="../../../spring/current/index.html">Spring Boot Integration</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../spring/current/index.html">0.17.1</a>
        </li>
        <li class="version">
          <a href="../../../spring/0.16.0/index.html">0.16.0</a>
        </li>
        <li class="version">
          <a href="../../../spring/0.15.0/index.html">0.15.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../vscode/current/index.html">VS Code Extension</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../vscode/current/index.html">0.18.2</a>
        </li>
        <li class="version">
          <a href="../../../vscode/0.17.0/index.html">0.17.0</a>
        </li>
        <li class="version">
          <a href="../../../vscode/0.16.0/index.html">0.16.0</a>
        </li>
        <li class="version">
          <a href="../../../vscode/0.11.0/index.html">0.11.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Main Project</a></li>
    <li><a href="../language.html">Language</a></li>
    <li><a href="index.html">Language Reference</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.26.3</button>
  <div class="version-menu">
    <a class="version" href="../../current/language-reference/index.html">0.28.0</a>
    <a class="version" href="../../latest/language-reference/index.html">0.28.0-dev</a>
    <a class="version" href="../../0.27.2/language-reference/index.html">0.27.2</a>
    <a class="version is-current" href="index.html">0.26.3</a>
    <a class="version" href="../../0.25.3/language-reference/index.html">0.25.3</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/apple/pkl/edit/release/0.26/docs/modules/language-reference/pages/index.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Page Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Language Reference</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The language reference provides a comprehensive description of every Pkl language feature.</p>
</div>
<div class="paragraph">
<p><a href="#comments">Comments</a><br>
<a href="#numbers">Numbers</a><br>
<a href="#booleans">Booleans</a><br>
<a href="#strings">Strings</a><br>
<a href="#durations">Durations</a><br>
<a href="#data-sizes">Data Sizes</a><br>
<a href="#objects">Objects</a><br>
<a href="#listings">Listings</a><br>
<a href="#mappings">Mappings</a><br>
<a href="#classes">Classes</a><br>
<a href="#methods">Methods</a><br>
<a href="#modules">Modules</a><br>
<a href="#null-values">Null Values</a><br>
<a href="#if-expressions">If Expressions</a><br>
<a href="#resources">Resources</a><br>
<a href="#errors">Errors</a><br>
<a href="#debugging">Debugging</a><br>
<a href="#advanced-topics">Advanced Topics</a></p>
</div>
<div class="paragraph">
<p>For a hands-on introduction, see <a href="../language-tutorial/index.html" class="xref page">Tutorial</a>.
For ready-to-go examples with full source code, see <a href="../examples.html" class="xref page">Examples</a>.
For API documentation, see <a href="../standard-library.html" class="xref page">Standard Library</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="comments"><a class="anchor" href="#comments"></a><a class="link" href="#comments">Comments</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pkl has three forms of comments:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Line comment</dt>
<dd>
<p>A code comment that starts with a double-slash (<code>//</code>) and runs until the end of the line.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">// Single-line comment</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Block comment</dt>
<dd>
<p>A nestable multiline comment, which is typically used to comment out code.
Starts with <code>/*</code> and ends with <code>*/</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/*</span>
<span class="hljs-comment">  Multiline</span>
<span class="hljs-comment">  comment</span>
<span class="hljs-comment">*/</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Doc comment</dt>
<dd>
<p>A user-facing comment attached to a program member.
It starts with a triple-slash (<code>///</code>) and runs until the end of the line.
Doc comments on consecutive lines are merged.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// A *bird* superstar.</span>
<span class="hljs-comment">/// Unfortunately, extinct.</span>
<span class="hljs-property">dodo</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span></code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Doc comments are processed by <a href="../pkl-doc/index.html" class="xref page">Pkldoc</a>, Pkl&#8217;s documentation generator.
For details on their syntax, see <a href="#doc-comments">Doc Comments</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="numbers"><a class="anchor" href="#numbers"></a><a class="link" href="#numbers">Numbers</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pkl has two numeric types, <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Int">Int</a> and <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Float">Float</a>.
Their common supertype is <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Number">Number</a>.</p>
</div>
<div class="sect2">
<h3 id="integers"><a class="anchor" href="#integers"></a><a class="link" href="#integers">Integers</a></h3>
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Int">Int</a> is a 64-bit signed integer.</p>
</div>
<div class="paragraph">
<p>Integer literals can be written in decimal, hexadecimal, binary, or octal notation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">num1</span> <span class="hljs-operator">=</span> <span class="hljs-number">123</span>
<span class="hljs-property">num2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x012AFF</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">num3</span> <span class="hljs-operator">=</span> <span class="hljs-number">0b00010111</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">num4</span> <span class="hljs-operator">=</span> <span class="hljs-number">0o755</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>decimal: 76543</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>decimal: 23</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>decimal: 493</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Integers can optionally include an underscore as a separator to improve readability.
An underscore does not affect the integer&#8217;s value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">num1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1_000_000</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">num2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x0134_64DE</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">num3</span> <span class="hljs-operator">=</span> <span class="hljs-number">0b0001_0111</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">num4</span> <span class="hljs-operator">=</span> <span class="hljs-number">0o0134_6475</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Equivalent to <code>1000000</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Equivalent to <code>0x013464DE</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Equivalent to <code>0b00010111</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Equivalent to <code>0o01346475</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Negative integer literals start with a minus sign, as in <code>-123</code>.</p>
</div>
<div class="paragraph">
<p>Integers support the standard comparison operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">comparison1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">==</span> <span class="hljs-number">2</span>
<span class="hljs-property">comparison2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">2</span>
<span class="hljs-property">comparison3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">&gt;</span> <span class="hljs-number">2</span>
<span class="hljs-property">comparison4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">&lt;=</span> <span class="hljs-number">2</span>
<span class="hljs-property">comparison5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Integers support the following arithmetic operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">num1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">+</span> <span class="hljs-number">2</span>   <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">num2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">-</span> <span class="hljs-number">2</span>   <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">num3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">*</span> <span class="hljs-number">2</span>   <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">num4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">/</span> <span class="hljs-number">2</span>   <i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-property">num5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">~/</span> <span class="hljs-number">2</span>  <i class="conum" data-value="5"></i><b>(5)</b>
<span class="hljs-property">num6</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">%</span> <span class="hljs-number">2</span>   <i class="conum" data-value="6"></i><b>(6)</b>
<span class="hljs-property">num7</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-operator">**</span> <span class="hljs-number">2</span>  <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>addition (result: <code>7</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>subtraction (result: <code>3</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>multiplication (result: <code>10</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>division (result: <code>2.5</code>, always <code>Float</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>integer division (result: <code>2</code>, always <code>Int</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>remainder (result: <code>1</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>exponentiation (result: <code>25</code>)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Arithmetic overflows are caught and result in an error.</p>
</div>
<div class="paragraph">
<p>To restrict an integer&#8217;s range, use one of the predefined <a href="#predefined-type-aliases">type aliases</a>
or an <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Number#isBetween">isBetween</a> <a href="#type-constraints">type constraint</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">clientPort</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">UInt16</span>
<span class="hljs-property">serverPort</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span><span class="hljs-punctuation">(</span><span class="hljs-title function_ invoke__">isBetween</span><span class="hljs-punctuation">(</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1023</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="floats"><a class="anchor" href="#floats"></a><a class="link" href="#floats">Floats</a></h3>
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Float">Float</a> is a 64-bit <a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format">double-precision</a> floating point number.</p>
</div>
<div class="paragraph">
<p>Float literals use decimal notation.
They consist of an integer part, decimal point, fractional part, and exponent part.
The integer and exponent parts are optional.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">num1</span> <span class="hljs-operator">=</span> <span class="hljs-number">.23</span>
<span class="hljs-property">num2</span> <span class="hljs-operator">=</span> <span class="hljs-number">1.23</span>
<span class="hljs-property">num3</span> <span class="hljs-operator">=</span> <span class="hljs-number">1.23e2</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">num4</span> <span class="hljs-operator">=</span> <span class="hljs-number">1.23e-2</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: 1.23 * 10<sup>2</sup></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: 1.23 * 10<sup>-2</sup></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Negative float literals start with a minus sign, as in <code>-1.23</code>.</p>
</div>
<div class="paragraph">
<p>The special float values <em>not a number</em>, <em>positive infinity</em>, and <em>negative infinity</em> are written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">notANumber</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">NaN</span>
<span class="hljs-property">positiveInfinity</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Infinity</span>
<span class="hljs-property">negativeInfinity</span> <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-title class_">Infinity</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#NaN">NaN</a> and <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#Infinity">Infinity</a> properties are defined in the standard library.</p>
</div>
<div class="paragraph">
<p>Floats support the same comparison and arithmetic operators as integers.
Float literals with a fractional part of zero can be safely replaced with integer literals.
For example, it is safe to write <code>1.3 * 42</code> instead of <code>1.3 * 42.0</code>.</p>
</div>
<div class="paragraph">
<p>Floats can also include the same underscore separator as integers. For example, <code>1_000.4_400</code> is a float whose value is equivalent to <code>1000.4400</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
As integers are more convenient to use than floats with a fractional part of zero, we recommend requiring <code>x: Number</code> instead of <code>x: Float</code> in type annotations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To restrict a float to a finite value, use the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Number#isFinite">isFinite</a> <a href="#type-constraints">type constraint</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">x</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Float</span><span class="hljs-punctuation">(</span><span class="hljs-property">isFinite</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To restrict a float&#8217;s range, use the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Number#isBetween">isBetween</a> type constraint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">x</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Float</span><span class="hljs-punctuation">(</span><span class="hljs-title function_ invoke__">isBetween</span><span class="hljs-punctuation">(</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">10e6</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="booleans"><a class="anchor" href="#booleans"></a><a class="link" href="#booleans">Booleans</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Boolean">Boolean</a> is either <code>true</code> or <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Apart from the standard logical operators, <code>Boolean</code> has
<a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Boolean#xor()">xor</a> and <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Boolean#implies()">implies</a> methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span> <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-literal">false</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span> <span class="hljs-operator">||</span> <span class="hljs-literal">false</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">res3</span> <span class="hljs-operator">=</span> <span class="hljs-operator">!</span><span class="hljs-literal">false</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">res4</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">xor</span><span class="hljs-punctuation">(</span><span class="hljs-literal">false</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-property">res5</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">implies</span><span class="hljs-punctuation">(</span><span class="hljs-literal">false</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>logical conjunction (result: <code>false</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>logical disjunction (result: <code>true</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>logical negation (result: <code>true</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>exclusive disjunction (result: <code>true</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>logical implication (result: <code>false</code>)</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="strings"><a class="anchor" href="#strings"></a><a class="link" href="#strings">Strings</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/String">String</a> is a sequence of Unicode code points.</p>
</div>
<div class="paragraph">
<p>String literals are enclosed in double quotes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-string">&quot;Hello, World!&quot;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Except for a few minor differences <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>,
String literals have the same syntax and semantics as in Swift 5. Learn one of them, know both of them!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Inside a string literal, the following character escape sequences have special meaning:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\t</code> - tab</p>
</li>
<li>
<p><code>\n</code> - line feed</p>
</li>
<li>
<p><code>\r</code> - carriage return</p>
</li>
<li>
<p><code>\"</code> - verbatim quote</p>
</li>
<li>
<p><code>\\</code> - verbatim backslash</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unicode escape sequences have the form <code>\u{&lt;codePoint&gt;}</code>, where <code>&lt;codePoint&gt;</code> is a hexadecimal number between 0 and 10FFFF:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-string">&quot;<span class="hljs-char escape_">\u{26}</span> <span class="hljs-char escape_">\u{E9}</span> <span class="hljs-char escape_">\u{1F600}</span>&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>"&amp; Ã© ðŸ˜€"</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To concatenate strings, use the <code>+</code> (plus) operator, as in <code>"abc" + "def" + "ghi"</code>.</p>
</div>
<div class="sect2">
<h3 id="string-interpolation"><a class="anchor" href="#string-interpolation"></a><a class="link" href="#string-interpolation">String Interpolation</a></h3>
<div class="paragraph">
<p>To embed the result of expression <code>&lt;expr&gt;</code> in a string, use <code>\(&lt;expr&gt;)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Dodo&quot;</span>
<span class="hljs-property">greeting</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hi, <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">name</span><span class="hljs-char escape_">)</span></span>!&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>"Hi, Dodo!"</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before a result is inserted, it is converted to a string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>
<span class="hljs-property">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">x</span> <span class="hljs-operator">+</span> <span class="hljs-number">2</span><span class="hljs-char escape_">)</span></span> plus <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">x</span> <span class="hljs-operator">*</span> <span class="hljs-number">2</span><span class="hljs-char escape_">)</span></span> is <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-number">0x80</span><span class="hljs-char escape_">)</span></span>&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>"44 plus 84 is 128"</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="multiline-strings"><a class="anchor" href="#multiline-strings"></a><a class="link" href="#multiline-strings">Multiline Strings</a></h3>
<div class="paragraph">
<p>To write a string that spans multiple lines, use a multiline string literal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-string">&quot;&quot;&quot;</span>
<span class="hljs-string">Although the Dodo is extinct,</span>
<span class="hljs-string">the species will be remembered.</span>
<span class="hljs-string">&quot;&quot;&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiline string literals are delimited by three double quotes (<code>"""</code>).
String content and closing delimiter must each start on a new line.</p>
</div>
<div class="paragraph">
<p>The content of a multiline string starts on the first line after the opening quotes and ends on the last line before the closing quotes.
Line breaks are included in the string and normalized to <code>\n</code>.</p>
</div>
<div class="paragraph">
<p>The previous multiline string is equivalent to this single-line string.
Notice that there is no leading or trailing whitespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-string">&quot;Although the Dodo is extinct,<span class="hljs-char escape_">\n</span>the species will be remembered.&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>String interpolation, character escape sequences, and Unicode escape sequences work the same as for single-line strings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">bird</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Dodo&quot;</span>
<span class="hljs-property">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;&quot;</span>
<span class="hljs-string">Although the <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">bird</span><span class="hljs-char escape_">)</span></span> is extinct,</span>
<span class="hljs-string">the species will be remembered.</span>
<span class="hljs-string">&quot;&quot;&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each content line must begin with the same whitespace characters as the line containing the closing delimiter,
which is not included in the string. Any further leading whitespace characters are preserved.
In other words, line indentation is controlled by indenting lines relative to the closing delimiter.</p>
</div>
<div class="paragraph">
<p>In the following string, lines have no leading whitespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;&quot;</span>
<span class="hljs-string">  Although the Dodo</span>
<span class="hljs-string">  is extinct,</span>
<span class="hljs-string">  the species</span>
<span class="hljs-string">  will be remembered.</span>
<span class="hljs-string">  &quot;&quot;&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the following string, lines are indented between three and five spaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;&quot;</span>
<span class="hljs-string">     Although the Dodo</span>
<span class="hljs-string">       is extinct,</span>
<span class="hljs-string">     the species</span>
<span class="hljs-string">       will be remembered.</span>
<span class="hljs-string">  &quot;&quot;&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="custom-string-delimiters"><a class="anchor" href="#custom-string-delimiters"></a><a class="link" href="#custom-string-delimiters">Custom String Delimiters</a></h3>
<div class="paragraph">
<p>Some strings contain many verbatim backslash (<code>\</code>) or quote (<code>"</code>) characters.
A good example is regular expressions, which make frequent use of backslash characters for escaping.
In such cases, using the escape sequences <code>\\</code> and <code>\"</code> quickly becomes tedious and hampers readability.</p>
</div>
<div class="paragraph">
<p>Instead, leading/closing string delimiters can be customized to start/end with a pound sign (<code>#</code>).
This also affects the escape character, which changes from <code>\</code> to <code>\#</code>.</p>
</div>
<div class="paragraph">
<p>All backslash and quote characters in the following string are interpreted verbatim:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-string">#&quot; \\\\\ &quot;&quot;&quot;&quot;&quot; &quot;#</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Escape sequences and string interpolation still work, and now start with <code>\#</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">bird</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Dodo&quot;</span>
<span class="hljs-property">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">#&quot; \\\\\ <span class="hljs-char escape_">\#n</span> <span class="hljs-char escape_">\#u{12AF}</span> <span class="hljs-subst"><span class="hljs-char escape_">\#(</span><span class="hljs-property">bird</span><span class="hljs-char escape_">)</span></span> &quot;&quot;&quot;&quot;&quot; &quot;#</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>More generally, string delimiters and escape characters can be customized to contain <em>n</em> pound signs each, for n &gt;= 1.</p>
</div>
<div class="paragraph">
<p>In the following string, <em>n</em> is 2. As a result, the string content is interpreted verbatim:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-string">##&quot; \\\\\ \#\#\# &quot;&quot;&quot;&quot;&quot; &quot;##</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="string-api"><a class="anchor" href="#string-api"></a><a class="link" href="#string-api">String API</a></h3>
<div class="paragraph">
<p>The <code>String</code> class offers a <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/String">rich API</a>.
Here are just a few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">strLength</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;dodo&quot;</span><span class="hljs-punctuation">.</span><span class="hljs-property">length</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">reversedStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;dodo&quot;</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">reverse</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">hasAx</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;dodo&quot;</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">contains</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;alive&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">trimmed</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;  dodo  &quot;</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">trim</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>4</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>"odod"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: <code>false</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>result: <code>"dodo"</code></td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="durations"><a class="anchor" href="#durations"></a><a class="link" href="#durations">Durations</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Duration">Duration</a> has a <em>value</em> component of type <code>Number</code> and a <em>unit</em> component of type <code>String</code>.
The unit component is constrained to the units defined in <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#DurationUnit">DurationUnit</a>.</p>
</div>
<div class="paragraph">
<p>Durations are constructed with the following <code>Number</code> properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">duration1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">ns</span>  <span class="hljs-comment">// nanoseconds (smallest unit)</span>
<span class="hljs-property">duration2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">us</span>  <span class="hljs-comment">// microseconds</span>
<span class="hljs-property">duration3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">ms</span>  <span class="hljs-comment">// milliseconds</span>
<span class="hljs-property">duration4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span>   <span class="hljs-comment">// seconds</span>
<span class="hljs-property">duration5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-comment">// minutes</span>
<span class="hljs-property">duration6</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">h</span>   <span class="hljs-comment">// hours</span>
<span class="hljs-property">duration7</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">d</span>   <span class="hljs-comment">// days (largest unit)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A duration can be negative, as in <code>-5.min</code>.
It can have a floating point value, as in <code>5.13.min</code>.
The <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Duration#value">value</a> and <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Duration#unit">unit</a> properties provide access to the duration&#8217;s components.</p>
</div>
<div class="paragraph">
<p>Durations support the standard comparison operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">comparison1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">==</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span>
<span class="hljs-property">comparison2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span>
<span class="hljs-property">comparison3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">&gt;</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span>
<span class="hljs-property">comparison4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">&lt;=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span>
<span class="hljs-property">comparison5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Durations support the same arithmetic operators as numbers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">+</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span>    <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">-</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span>    <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">res3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span>      <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">res4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">/</span> <span class="hljs-number">3</span>      <i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-property">res5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">/</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span>  <i class="conum" data-value="5"></i><b>(5)</b>
<span class="hljs-property">res6</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">~/</span> <span class="hljs-number">3</span>     <i class="conum" data-value="6"></i><b>(6)</b>
<span class="hljs-property">res7</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">~/</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <i class="conum" data-value="7"></i><b>(7)</b>
<span class="hljs-property">res8</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">%</span> <span class="hljs-number">3</span>      <i class="conum" data-value="8"></i><b>(8)</b>
<span class="hljs-property">res9</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <span class="hljs-operator">**</span> <span class="hljs-number">3</span>     <i class="conum" data-value="9"></i><b>(9)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>5.05.min</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>4.95.min</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: <code>15.min</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>result: <code>1.6666666666666667.min</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>result: <code>1.6666666666666667</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>result: <code>1.min</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>result: <code>1</code></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>result: <code>2.min</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>result: <code>125.min</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The value component can be an expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>
<span class="hljs-property">xMinutes</span> <span class="hljs-operator">=</span> <span class="hljs-property">x</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">y</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>
<span class="hljs-property">xySeconds</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">x</span> <span class="hljs-operator">+</span> <span class="hljs-property">y</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>5.min</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>8.s</code></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-sizes"><a class="anchor" href="#data-sizes"></a><a class="link" href="#data-sizes">Data Sizes</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/DataSize">DataSize</a> has a <em>value</em> component of type <code>Number</code> and a <em>unit</em> component of type <code>String</code>.
The unit component is constrained to the units defined in <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#DataSizeUnit">DataSizeUnit</a>.</p>
</div>
<div class="paragraph">
<p>Data sizes with decimal units (factor 1000) are constructed with the following <code>Number</code> properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">datasize1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">b</span>  <span class="hljs-comment">// bytes (smallest unit)</span>
<span class="hljs-property">datasize2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">kb</span> <span class="hljs-comment">// kilobytes</span>
<span class="hljs-property">datasize3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-comment">// megabytes</span>
<span class="hljs-property">datasize4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">gb</span> <span class="hljs-comment">// gigabytes</span>
<span class="hljs-property">datasize5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">tb</span> <span class="hljs-comment">// terabytes</span>
<span class="hljs-property">datasize6</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">pb</span> <span class="hljs-comment">// petabytes (largest unit)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Data sizes with binary units (factor 1024) are constructed with the following <code>Number</code> properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">datasize1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">b</span>   <span class="hljs-comment">// bytes (smallest unit)</span>
<span class="hljs-property">datasize2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span> <span class="hljs-comment">// kibibytes</span>
<span class="hljs-property">datasize3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mib</span> <span class="hljs-comment">// mebibytes</span>
<span class="hljs-property">datasize4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">gib</span> <span class="hljs-comment">// gibibytes</span>
<span class="hljs-property">datasize5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">tib</span> <span class="hljs-comment">// tebibytes</span>
<span class="hljs-property">datasize6</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">pib</span> <span class="hljs-comment">// pebibytes (largest unit)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A data size can be negative, as in <code>-5.mb</code>.
It can have a floating point value, as in <code>5.13.mb</code>.
The <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/DataSize#value">value</a> and <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/DataSize#unit">unit</a> properties provide access to the data size&#8217;s components.</p>
</div>
<div class="paragraph">
<p>Data sizes support the standard comparison operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">comparison1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">==</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span>
<span class="hljs-property">comparison2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span>
<span class="hljs-property">comparison3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">&gt;</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span>
<span class="hljs-property">comparison4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">&lt;=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span>
<span class="hljs-property">comparison5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Data sizes support the same arithmetic operators as numbers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">+</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">-</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">res3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span>     <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">res4</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">/</span> <span class="hljs-number">3</span>     <i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-property">res5</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">/</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span>  <i class="conum" data-value="5"></i><b>(5)</b>
<span class="hljs-property">res6</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">~/</span> <span class="hljs-number">3</span>    <i class="conum" data-value="6"></i><b>(6)</b>
<span class="hljs-property">res7</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">~/</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <i class="conum" data-value="7"></i><b>(7)</b>
<span class="hljs-property">res8</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">%</span> <span class="hljs-number">3</span>     <i class="conum" data-value="8"></i><b>(8)</b>
<span class="hljs-property">res9</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <span class="hljs-operator">**</span> <span class="hljs-number">3</span>    <i class="conum" data-value="9"></i><b>(9)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>5.003072.mb</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>4.996928.mb</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: <code>15.mb</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>result: <code>1.6666666666666667.mb</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>result: <code>1.6666666666666667</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>result: <code>1.mb</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>result: <code>1</code></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>result: <code>2.mb</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>result: <code>125.mb</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The value component can be an expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>
<span class="hljs-property">xMegabytes</span> <span class="hljs-operator">=</span> <span class="hljs-property">x</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">y</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>
<span class="hljs-property">xyKibibytes</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">x</span> <span class="hljs-operator">+</span> <span class="hljs-property">y</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-property">kib</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>5.mb</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>8.kib</code></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="objects"><a class="anchor" href="#objects"></a><a class="link" href="#objects">Objects</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>An object is an ordered collection of <em>values</em> indexed by <em>name</em>.</p>
</div>
<div class="paragraph">
<p>An object&#8217;s key-value pairs are called its <em>properties</em>.
Property values are lazily evaluated on the first read.</p>
</div>
<div class="paragraph">
<p>Because Pkl&#8217;s objects differ in important ways from objects in general-purpose programming languages,
and because they are the backbone of most data models, understanding objects is the key to understanding Pkl.</p>
</div>
<div class="sect2">
<h3 id="defining-objects"><a class="anchor" href="#defining-objects"></a><a class="link" href="#defining-objects">Defining Objects</a></h3>
<div class="paragraph">
<p>Let&#8217;s define an object with properties <code>name</code> and <code>extinct</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">dodo</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Dodo&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-property">extinct</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-punctuation">}</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a module property named <code>dodo</code>.
The open curly brace (<code>{</code>) indicates that the value of this property is an object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines an object property named <code>name</code> with string value <code>"Dodo"</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines an object property named <code>extinct</code> with boolean value <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The closing curly brace indicates the end of the object definition.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To access an object property by name, use dot (<code>.</code>) notation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">dodoName</span> <span class="hljs-operator">=</span> <span class="hljs-property">dodo</span><span class="hljs-punctuation">.</span><span class="hljs-property">name</span>
<span class="hljs-property">dodoIsExtinct</span> <span class="hljs-operator">=</span> <span class="hljs-property">dodo</span><span class="hljs-punctuation">.</span><span class="hljs-property">extinct</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Objects can be nested:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">dodo</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Dodo&quot;</span>
  <span class="hljs-property">taxonomy</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="hljs-property">`class`</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Aves&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines an object property named <code>taxonomy</code>.
The open curly brace indicates that its value is another object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The word <code>class</code> is a keyword of Pkl, and needs to be wrapped in backticks (<code>`</code>) to be used as a property.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you probably guessed, the nested property <code>class</code> can be accessed with <code>dodo.taxonomy.class</code>.</p>
</div>
<div class="paragraph">
<p>Like all values, objects are <em>immutable</em>, which is just a fancy (and short!) way to say that their properties never change.
So what happens when Dodo moves to a different street? Do we have to construct a new object from scratch?</p>
</div>
</div>
<div class="sect2">
<h3 id="amending-objects"><a class="anchor" href="#amending-objects"></a><a class="link" href="#amending-objects">Amending Objects</a></h3>
<div class="paragraph">
<p>Fortunately, we don&#8217;t have to.
An object can be <em>amended</em> to form a new object that only differs in selected properties.
Here is how this looks:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">tortoise</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">dodo</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;GalÃ¡pagos tortoise&quot;</span>
  <span class="hljs-property">taxonomy</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">`class`</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Reptilia&quot;</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a module property named <code>tortoise</code>.
Its value is an object that <em>amends</em> <code>dodo</code>.
Note that the amended object must be enclosed in parentheses.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Object property <code>tortoise.taxonomy</code> <em>amends</em> <code>dodo.taxonomy</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Object property <code>tortoise.taxonomy.class</code> <em>overrides</em> <code>dodo.taxonomy.class</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you can see, it is easy to construct a new object that overrides selected properties of an existing object,
even if, as in our example, the overridden property is nested inside another object.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If this way of constructing new objects from existing objects reminds you of prototypical inheritance, you are spot-on:
Pkl objects use prototypical inheritance as known from languages such as JavaScript.
But unlike in JavaScript, their prototype chain cannot be directly accessed or even modified.
Another difference is that in Pkl, object properties are late-bound. Read on to see what this means.
</td>
</tr>
</table>
</div>
<div id="amends-declaration" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Amends declaration vs. amends expression</div>
<div class="paragraph">
<p>The <a href="#defining-objects">defining objects</a> and <a href="#amending-objects">amending objects</a> sections cover two notations that are both a form of amending; called an <em>amends declaration</em> and an <em>amends expression</em>, respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeon</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Turtle dove&quot;</span>
  <span class="hljs-property">extinct</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">parrot</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">pigeon</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Amends declaration.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Amends expression.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An amends declaration amends a property of the same name if the property exists within a parent module.
Otherwise, an amends declaration implicitly amends <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Dynamic">Dynamic</a>.</p>
</div>
<div class="paragraph">
<p>Another way to think about an amends declaration is that it is shorthand for assignment.
In practical terms, <code>pigeon {}</code> is the same as <code>pigeon = (super.pigeon) {}</code>.</p>
</div>
<div class="paragraph">
<p>Amending object bodies can be chained for both an amends declaration and an amends expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeon</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Common wood pigeon&quot;</span>
<span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">extinct</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
<span class="hljs-punctuation">}</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">dodo</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">pigeon</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Dodo&quot;</span>
<span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">extinct</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
<span class="hljs-punctuation">}</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Chained amends declaration.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Chained amends expression (<code>(pigeon) { &#8230;&#8203; } { &#8230;&#8203; }</code> is the amends expression).</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="late-binding"><a class="anchor" href="#late-binding"></a><a class="link" href="#late-binding">Late Binding</a></h3>
<div class="paragraph">
<p>Let&#8217;s move on to Pkl&#8217;s secret sauce:
the ability to define an object property&#8217;s value in terms of another property&#8217;s value, and the resulting <em>late binding</em> effect.
Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">penguin</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">eggIncubation</span> <span class="hljs-operator">=</span> <span class="hljs-number">40</span><span class="hljs-punctuation">.</span><span class="hljs-property">d</span>
  <span class="hljs-property">adultWeightInGrams</span> <span class="hljs-operator">=</span> <span class="hljs-property">eggIncubation</span><span class="hljs-punctuation">.</span><span class="hljs-property">value</span> <span class="hljs-operator">*</span> <span class="hljs-number">100</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">adultWeightInGrams</span> <span class="hljs-operator">=</span> <span class="hljs-property">penguin</span><span class="hljs-punctuation">.</span><span class="hljs-property">adultWeightInGrams</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>4000</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We have defined a hypothetical <code>penguin</code> object whose <code>adultWeightInGrams</code> property is defined in terms of the <code>eggIncubation</code> duration.
Can you guess what happens when <code>penguin</code> is amended and its <code>eggIncubation</code> overridden?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">madeUpBird</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">penguin</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">eggIncubation</span> <span class="hljs-operator">=</span> <span class="hljs-number">11</span><span class="hljs-punctuation">.</span><span class="hljs-property">d</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">adultWeightInGrams</span> <span class="hljs-operator">=</span> <span class="hljs-property">madeUpBird</span><span class="hljs-punctuation">.</span><span class="hljs-property">adultWeightInGrams</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>1100</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you can see, <code>madeUpBird</code>'s <code>adultWeightInGrams</code> changed along with its <code>eggIncubation</code>.
This is what we mean when we say that object properties are <em>late-bound</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Spreadsheet Programming</div>
<div class="paragraph">
<p>A good analogy is that object properties behave like spreadsheet cells.
When they are linked, changes to "downstream" properties automatically propagate to "upstream" properties.
The main difference is that editing a spreadsheet cell changes the state of the spreadsheet,
whereas "editing" a property results in a new object, leaving the original object untouched.
It is as if you made a copy of the entire spreadsheet whenever you edited a cell!</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Late binding of properties is an incredibly useful feature for a configuration language.
It is used extensively in Pkl code (especially in templates) and is the key to understanding how Pkl works.</p>
</div>
</div>
<div class="sect2">
<h3 id="transforming-objects"><a class="anchor" href="#transforming-objects"></a><a class="link" href="#transforming-objects">Transforming Objects</a></h3>
<div class="paragraph">
<p>Say we have the following object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">dodo</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Dodo&quot;</span>
  <span class="hljs-property">extinct</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>How can property <code>name</code> be removed?</p>
</div>
<div class="paragraph">
<p>The recipe for transforming an object is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Convert the object to a map.</p>
</li>
<li>
<p>Transform the map using <code>Map</code>'s <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Map">rich API</a>.</p>
</li>
<li>
<p>If necessary, convert the map back to an object.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Equipped with this knowledge, let&#8217;s try to accomplish our objective:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-property">dodo</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toMap</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">remove</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;name&quot;</span><span class="hljs-punctuation">)</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toDynamic</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting dynamic object is equivalent to <code>dodo</code>, except that it no longer has a <code>name</code> property.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Lazy vs. Eager Data Types</div>
<div class="paragraph">
<p>Converting an object to a map is a transition from a <em>lazy</em> to an <em>eager</em> data type.
All of the object&#8217;s properties are evaluated and all references between them are resolved.</p>
</div>
<div class="paragraph">
<p>If the map is later converted back to an object, subsequent changes to the object&#8217;s properties no longer propagate to (previously) dependent properties.
To make these boundaries clear, transitioning between <em>lazy</em> and <em>eager</em> data types always requires an explicit method call, such as <code>toMap()</code> or <code>toDynamic()</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="typed-objects"><a class="anchor" href="#typed-objects"></a><a class="link" href="#typed-objects">Typed Objects</a></h3>
<div class="paragraph">
<p>Pkl has two kinds of objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Dynamic">Dynamic</a> object has no predefined structure.<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>
When a dynamic object is amended, not only can existing properties be overridden or amended, but new properties can also be added.
So far, we have only used dynamic objects in this chapter.</p>
</li>
<li>
<p>A <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Typed">Typed</a> object has a fixed structure described by a class definition.
When a typed object is amended, its properties can be overridden or amended, but new properties cannot be added.
In other words, the new object has the same class as the original object.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">When to Use Typed vs. Dynamic Objects</div>
<div class="ulist">
<ul>
<li>
<p>Use typed objects to build schema-backed data models that are validated<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup>.
This is what most templates do.</p>
</li>
<li>
<p>Use dynamic objects to build schema-less data models that are not validated.
Dynamic objects are useful for ad-hoc tasks, tasks that do not justify the effort of writing and maintaining a schema, and for representing data whose structure is unknown.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that every <a href="#modules">module</a> is a typed object. Its properties implicitly define a class,
and new properties cannot be added when amending the module.</p>
</div>
<div class="paragraph">
<p>A typed object is backed by a <em>class</em>.
Let&#8217;s look at an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
  <span class="hljs-property">migratory</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Boolean</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeon</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-property">migratory</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a class named <code>Bird</code> with properties <code>name</code>, <code>lifespan</code> and <code>migratory</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a module property named <code>pigeon</code>.
Its value is a typed object constructed by instantiating class <code>Bird</code>.
A type only needs to be stated when the property does not have or inherit a <a href="#type-annotations">type annotation</a>.
Otherwise, amend syntax (<code>pigeon { &#8230;&#8203; }</code>) or shorthand instantiation syntax (<code>pigeon = new { &#8230;&#8203; }</code>) should be used.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Congratulations, you have constructed your first typed object<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>!
How does it differ from a dynamic object?</p>
</div>
<div class="paragraph">
<p>The answer is that a typed object has a fixed structure prescribed by its class, which cannot be changed when amending the object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">faultyPigeon</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-property">hobby</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;singing&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Evaluating this gives:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Cannot find property <strong>hobby</strong> in object of type <strong>repl#Bird</strong>.

Available properties:
lifespan
name</code></pre>
</div>
</div>
<div class="paragraph">
<p>Class structure is also enforced when instantiating a class.
Let&#8217;s try to override property <code>name</code> with a value of the wrong type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">faultyPigeon2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Evaluating this, also fails:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Expected value of type <strong>String</strong>, but got type <strong>Duration</strong>.
Value: 3.min</code></pre>
</div>
</div>
<div class="paragraph">
<p>Typed objects are the fundamental building block for constructing validated data models in Pkl.
To dive deeper into this topic, continue with <a href="#classes">Classes</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Converting untyped objects to typed objects</div>
<div class="paragraph">
<p>When you have a <code>Dynamic</code> that has all the properties (with the right types and meeting all constraints), you can convert it to a <code>Typed</code> by using <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Dynamic#toTyped()"><code>toTyped(&lt;class&gt;)</code></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeon</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dynamic</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toTyped</span><span class="hljs-punctuation">(</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Instead of a <code>new Bird</code>, <code>pigeon</code> can be defined with a <code>new Dynamic</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>That <code>Dynamic</code> is then converted to a <code>Bird</code>.</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="properties"><a class="anchor" href="#properties"></a><a class="link" href="#properties">Property Modifiers</a></h3>
<div class="sect3">
<h4 id="hidden-properties"><a class="anchor" href="#hidden-properties"></a><a class="link" href="#hidden-properties">Hidden Properties</a></h4>
<div class="paragraph">
<p>A property with the modifier <code>hidden</code> is omitted from the rendered output and object conversions.
Hidden properties are also ignored when evaluating equality or hashing (e.g. for <code>Mapping</code> or <code>Map</code> keys).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
  <span class="hljs-keyword">hidden</span> <span class="hljs-property">nameAndLifespanInIndex</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">name</span><span class="hljs-char escape_">)</span></span>, <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">lifespan</span><span class="hljs-char escape_">)</span></span>&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">nameSignWidth</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">UInt</span> <span class="hljs-operator">=</span> <span class="hljs-property">nameAndLifespanInIndex</span><span class="hljs-punctuation">.</span><span class="hljs-property">length</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeon</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeonInIndex</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-property">nameAndLifespanInIndex</span> <i class="conum" data-value="4"></i><b>(4)</b>

<span class="hljs-property">pigeonDynamic</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toDynamic</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="5"></i><b>(5)</b>

<span class="hljs-property">favoritePigeon</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">pigeon</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">nameAndLifespanInIndex</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Bettie, <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">lifespan</span><span class="hljs-char escape_">)</span></span>&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">samePigeon</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span> <span class="hljs-operator">==</span> <span class="hljs-property">favoritePigeon</span> <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Properties defined as <code>hidden</code> are accessible on any <code>Bird</code> instance, but not output by default.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Non-hidden properties can refer to hidden properties as usual.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>pigeon</code> is an object with <em>four</em> properties, but is rendered with <em>three</em> properties.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Accessing a <code>hidden</code> property from outside the class and object is like any other property.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Object conversions omit hidden properties, so the resulting <code>Dynamic</code> has three properties.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Objects that differ only in <code>hidden</code> property values are considered equal</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Invoking Pkl on this file produces the following result.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeon</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-property">nameSignWidth</span> <span class="hljs-operator">=</span> <span class="hljs-number">9</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">pigeonInIndex</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon, 8&quot;</span>
<span class="hljs-property">pigeonDynamic</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-property">nameSignWidth</span> <span class="hljs-operator">=</span> <span class="hljs-number">9</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">favoritePigeon</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-property">nameSignWidth</span> <span class="hljs-operator">=</span> <span class="hljs-number">9</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">samePigeon</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="local-properties"><a class="anchor" href="#local-properties"></a><a class="link" href="#local-properties">Local properties</a></h4>
<div class="paragraph">
<p>A property with the modifier <code>local</code> can only be referenced in the lexical scope of its definition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
  <span class="hljs-keyword">local</span> <span class="hljs-property">separator</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;,&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-keyword">hidden</span> <span class="hljs-property">nameAndLifespanInIndex</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">name</span><span class="hljs-char escape_">)</span></span><span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">separator</span><span class="hljs-char escape_">)</span></span> <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">lifespan</span><span class="hljs-char escape_">)</span></span>&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeon</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeonInIndex</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-property">nameAndLifespanInIndex</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">pigeonSeparator</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-property">separator</span> <span class="hljs-comment">// Error </span><i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This property can only be accessed from inside this <em>class definition</em>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Non-local properties can refer to the local property as usual.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <em>value</em> of <code>separator</code> occurs in <code>nameAndLifespanInIndex</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Pkl does not accept this, as there is no property <code>separator</code> on a <code>Bird</code> instance.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Because a <code>local</code> property is added to the lexical scope, but not (observably) to the object, you can add <code>local</code> properties to <code>Listing</code>s and <code>Mapping</code>s.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Import clauses define local properties</div>
<div class="paragraph">
<p>An <em>import clause</em> defines a local property in the containing module.
This means <code>import "someModule.pkl"</code> is effectively <code>const local someModule = import("someModule.pkl")</code>.
Also, <code>import "someModule.pkl" as otherName</code> is effectively <code>const local otherName = import("someModule.pkl")</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="fixed-properties"><a class="anchor" href="#fixed-properties"></a><a class="link" href="#fixed-properties">Fixed properties</a></h4>
<div class="paragraph">
<p>A property with the <code>fixed</code> modifier cannot be assigned to or amended when defining an object of its class.</p>
</div>
<div class="listingblock">
<div class="title">Bird.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl">fixed <span class="hljs-property">laysEggs</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Boolean</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>

fixed <span class="hljs-property">birds</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-string">&quot;Hawk&quot;</span>
  <span class="hljs-string">&quot;Penguin&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When amending, assigning to a <code>fixed</code> property is an error.
Similarly, it is an error to use an <a href="#amends-declaration">amends declaration</a> on a fixed property:</p>
</div>
<div class="listingblock">
<div class="title">invalid.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;Bird.pkl&quot;</span>

<span class="hljs-property">laysEggs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">birds</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-string">&quot;Giraffe&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Error: cannot assign to fixed property <code>laysEggs</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Error: cannot amend fixed property <code>birds</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When extending a class and overriding an existing property definition, the fixedness of the overridden property must be preserved.
If the property in the parent class is declared <code>fixed</code>, the child property must also be declared <code>fixed</code>.
If the property in the parent class is not declared <code>fixed</code>, the child property may not add the <code>fixed</code> modifier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  fixed <span class="hljs-property">canFly</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Boolean</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Penguin</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">canFly</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span> <i class="conum" data-value="1"></i><b>(1)</b>
  fixed <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Penguin&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Error: missing modifier <code>fixed</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Error: modifier <code>fixed</code> cannot be applied to property <code>name</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>fixed</code> modifier is useful for defining properties that are meant to be derived from other properties.
In the following snippet, the property <code>result</code> is not meant to be assigned to, because it is derived
from other properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">wingspan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
  <span class="hljs-property">weight</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
  fixed <span class="hljs-property">wingspanWeightRatio</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span> <span class="hljs-operator">=</span> <span class="hljs-property">wingspan</span> <span class="hljs-operator">/</span> <span class="hljs-property">weight</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Another use-case for <code>fixed</code> is to define properties that are meant to be fixed to a class definition.
In the example below, the <code>species</code> of a bird is tied to the class, and therefore is declared <code>fixed</code>.</p>
</div>
<div class="paragraph">
<p>Note that it is possible to define a <code>fixed</code> property without a value, for one of two reasons:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The type has a default value that makes an explicit default redundant.</p>
</li>
<li>
<p>The property is meant to be overridden by a child class.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  fixed <span class="hljs-property">species</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Osprey</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  fixed <span class="hljs-property">species</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Pandion haliaetus&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>No explicit default because the property is overridden by a child class.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Overrides the type from <code>String</code> to the <a href="#string-literal-types">string literal type</a> <code>"Pandion haliaetus"</code>.<br>
Assigning an explicit default would be redundant, therefore it is omitted.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="const-properties"><a class="anchor" href="#const-properties"></a><a class="link" href="#const-properties">Const properties</a></h4>
<div class="paragraph">
<p>A property with the <code>const</code> modifier behaves like the <a href="#fixed-properties"><code>fixed</code></a> modifier,
with the additional rule that it cannot reference non-const properties or methods.</p>
</div>
<div class="listingblock">
<div class="title">Bird.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl">const <span class="hljs-property">laysEggs</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Boolean</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>

const <span class="hljs-property">examples</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-string">&quot;Hawk&quot;</span>
  <span class="hljs-string">&quot;Penguin&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Referencing any non-const property or method is an error.</p>
</div>
<div class="listingblock">
<div class="title">invalid.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeonName</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>

const <span class="hljs-keyword">function</span> <span class="hljs-title function_">birdLifespan</span><span class="hljs-punctuation">(</span><span class="hljs-params">i</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">i</span> <span class="hljs-operator">/</span> <span class="hljs-number">4</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toInt</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
<span class="hljs-punctuation">}</span>

const <span class="hljs-property">bird</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeonName</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-title function_ invoke__">birdLifespan</span><span class="hljs-punctuation">(</span><span class="hljs-number">24</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Error: cannot reference non-const property <code>pigeonName</code> from a const property.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Allowed: <code>birdLifespan</code> is const.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is okay to reference another value <em>within</em> the same const property.</p>
</div>
<div class="listingblock">
<div class="title">valid.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
  <span class="hljs-property">description</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">speciesName</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Bird&quot;</span>
<span class="hljs-punctuation">}</span>

const <span class="hljs-property">bird</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-property">description</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;species: <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">speciesName</span><span class="hljs-char escape_">)</span></span>, lifespan: <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">lifespan</span><span class="hljs-char escape_">)</span></span>&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>lifespan</code> is declared within property <code>bird</code>. <code>speciesName</code> resolves to <code>this.speciesName</code>, where <code>this</code> is a value within property <code>bird</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because <code>const</code> members can only reference themselves and other <code>const</code> members, they are not <a href="#late-binding">late bound</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>const</code> modifier implies that it is also <a href="#fixed-properties">fixed</a>.
Therefore, the same rules that apply to <code>fixed</code> also apply to <code>const</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>const</code> property cannot be assigned to or amended when defining an object of its class.</p>
</li>
<li>
<p>The const-ness of a property or method must be preserved when it is overridden by a child class.</p>
</li>
</ul>
</div>
<div id="class-and-annotation-const" class="paragraph">
<p><strong>Class, Annotation, and Typealias Scoping</strong></p>
</div>
<div class="paragraph">
<p>In these following scenarios, any reference to a property or method of its enclosing module requires that the referenced member is <code>const</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Class body</p>
</li>
<li>
<p>Annotation body</p>
</li>
<li>
<p>Typealiased constrained type</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">invalid2.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeonName</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeonName</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-operator">@</span><span class="hljs-title class_">Deprecated</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Replace with <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">pigeonName</span><span class="hljs-char escape_">)</span></span>&quot;</span> <span class="hljs-punctuation">}</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">oldPigeonName</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>

<span class="hljs-keyword">typealias</span> <span class="hljs-title class_">IsPigeonName</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-property">pigeonName</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Error: cannot reference non-const property <code>pigeonName</code> from a class.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Error: cannot reference non-const property <code>pigeonName</code> from an annotation.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Error: cannot reference non-const property <code>pigeonname</code> from a typealias.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This rule exists because classes, annotations, and typealiases are not <a href="#late-binding">late bound</a>;
it is not possible to change the definition of these members by amending the module
where it is defined.</p>
</div>
<div class="paragraph">
<p>Generally, there are two strategies for referencing such properties:</p>
</div>
<div class="paragraph">
<p><strong>Add the <code>const</code> modifier to the referenced property</strong></p>
</div>
<div class="paragraph">
<p>One solution is to add the <code>const</code> modifier to the property being referenced.</p>
</div>
<div class="listingblock">
<div class="title">Birds.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-diff hljs" data-lang="diff">-pigeonName: String = "Pigeon"
+const pigeonName: String = "Pigeon"

 class Bird {
   name: String = pigeonName
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This solution makes sense if <code>pigeonName</code> does not get assigned/amended when amending module <code>Birds.pkl</code> (modules are regular objects that can be amended).</p>
</div>
<div class="paragraph">
<p><strong>Self-import the module</strong></p>
</div>
<div class="listingblock">
<div class="title">Birds.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-diff hljs" data-lang="diff">+import "Birds.pkl" <i class="conum" data-value="1"></i><b>(1)</b>
+
 pigeonName: String = "Pigeon"

 class Bird {
-   name: String = pigeonName
+   name: String = Birds.pigeonName
 }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>module <code>Birds</code> imports itself</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This solution works because an import clause implicitly defines a <code>const local</code> property and amending this module does not affect a self-import.</p>
</div>
<div class="paragraph">
<p>This makes sense if property <code>pigeonName</code> <strong>does</strong> get assigned/amended when amending module <code>Birds.pkl</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="listings"><a class="anchor" href="#listings"></a><a class="link" href="#listings">Listings</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Listing">Listing</a> is an ordered, indexed collection of <em>elements</em>.</p>
</div>
<div class="paragraph">
<p>A listing&#8217;s elements have zero-based indexes and are lazily evaluated on the first read.</p>
</div>
<div class="paragraph">
<p>Listings combine qualities of lists and objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Like lists, listings can contain arbitrary elements.</p>
</li>
<li>
<p>Like objects, listings excel at defining and amending nested literal data structures.</p>
</li>
<li>
<p>Like objects, listings can only be directly manipulated through amendment,
but converting them to a list (and, if necessary, back to a listing) opens the door to arbitrary transformations.</p>
</li>
<li>
<p>Like object properties, listing elements are evaluated lazily, can be defined in terms of each other, and are late-bound.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">When to use Listing vs. <a href="#lists">List</a></div>
<div class="ulist">
<ul>
<li>
<p>When a collection of elements needs to be specified literally, use a listing.</p>
</li>
<li>
<p>When a collection of elements needs to be transformed in a way that cannot be achieved by <a href="#amending-listings">amending</a> a listing, use a list.</p>
</li>
<li>
<p>If in doubt, use a listing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Templates and schemas should almost always use listings instead of lists.
Note that listings can be converted to lists when the need arises.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="defining-listings"><a class="anchor" href="#defining-listings"></a><a class="link" href="#defining-listings">Defining Listings</a></h3>
<div class="paragraph">
<p>Listings have a literal syntax that is similar to that of objects.
Here is a listing with two elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seed&quot;</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a module property named <code>birds</code> with a value of type <code>Listing</code>.
A type only needs to be stated when the property does not have or inherit a <a href="#listing-type-annotations">type annotation</a>.
Otherwise, amend syntax (<code>birds { &#8230;&#8203; }</code>) or shorthand instantiation syntax (<code>birds = new { &#8230;&#8203; }</code>) should be used.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a listing element of type <code>Dynamic</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines another listing element of type <code>Dynamic</code>.
The order of definitions is relevant.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To access an element by index, use the <code>[]</code> (subscript) operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">firstBirdName</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds</span>[<span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">.</span><span class="hljs-property">name</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">secondBirdDiet</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds</span>[<span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">.</span><span class="hljs-property">diet</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>"Pigeon"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>"Berries"</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Listings can contain arbitrary types of elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">listing</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-string">&quot;Pigeon&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="hljs-string">&quot;Barn owl&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a listing element of type <code>String</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a listing element of type <code>Duration</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines a listing element of type <code>Listing</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Listings can have <code>local</code> properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">listing</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">local</span> <span class="hljs-property">pigeon</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">pigeon</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-string">&quot;A &quot;</span> <span class="hljs-operator">+</span> <span class="hljs-property">pigeon</span> <span class="hljs-operator">+</span> <span class="hljs-string">&quot; is a bird&quot;</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a local property with the value <code>"Pigeon"</code>.
Local properties can have a type annotation, as in <code>pigeon: String = "Pigeon"</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a listing element that references the local property.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines another listing element that references the local property.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="amending-listings"><a class="anchor" href="#amending-listings"></a><a class="link" href="#amending-listings">Amending Listings</a></h3>
<div class="paragraph">
<p>Let&#8217;s say we have the following listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To add, override, or amend elements of this listing, amend the listing itself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds2</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">birds</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Barn owl&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Mice&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Worms&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Albatross&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Fish&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a module property named <code>birds2</code>. Its value is a listing that amends <code>birds</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a listing element of type <code>Dynamic</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Amends the listing element at index 0 (whose name is <code>"Pigeon"</code>) and overrides property <code>diet</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Overrides the listing element at index 1 (whose name is <code>"Parrot"</code>) with an entirely new dynamic object.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="late-binding-2"><a class="anchor" href="#late-binding-2"></a><a class="link" href="#late-binding-2">Late Binding</a></h3>
<div class="paragraph">
<p>A listing element can be defined in terms of another element.
To reference the element at index <code>&lt;index&gt;</code>, use <code>this[&lt;index&gt;]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">(</span><span class="hljs-keyword">this</span>[<span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a listing element of type <code>Dynamic</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a listing element that amends the element at index 0 and overrides <code>name</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Listing elements are late-bound:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">newBirds</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">birds</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  [<span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Worms&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">secondBirdDiet</span> <span class="hljs-operator">=</span> <span class="hljs-property">newBirds</span>[<span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">.</span><span class="hljs-property">diet</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Amends listing <code>birds</code> and overrides property <code>diet</code> of element 0 (whose name is "Pigeon"`) to have the value <code>"Worms"</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Because element 1 is defined in terms of element 0, its <code>diet</code> property also changes to <code>"Worms"</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="transforming-listings"><a class="anchor" href="#transforming-listings"></a><a class="link" href="#transforming-listings">Transforming Listings</a></h3>
<div class="paragraph">
<p>Say we have the following listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>How can the order of elements be reversed programmatically?</p>
</div>
<div class="paragraph">
<p>The recipe for transforming a listing is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Convert the listing to a list.</p>
</li>
<li>
<p>Transform the list using <code>List</code>'s <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/List">rich API</a>.</p>
</li>
<li>
<p>If necessary, convert the list back to a listing.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Often, transformations happen in a <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/PcfRenderer#converters">converter</a> of a <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/ValueRenderer">value renderer</a>.
Because most value renderers treat lists the same as listings, it is often not necessary to convert back to a listing.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Equipped with this knowledge, let&#8217;s try to accomplish our objective:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">reversedbirds</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toList</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">reverse</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toListing</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>result</code> now contains the same elements as <code>birds</code>, but in reverse order.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Lazy vs. Eager Data Types</div>
<div class="paragraph">
<p>Converting a listing to a list is a transition from a <em>lazy</em> to an <em>eager</em> data type.
All of the listing&#8217;s elements are evaluated and all references between them are resolved.</p>
</div>
<div class="paragraph">
<p>If the list is later converted back to a listing, subsequent changes to the listing&#8217;s elements no longer propagate to (previously) dependent elements.
To make these boundaries clear, transitioning between <em>lazy</em> and <em>eager</em> data types always requires an explicit method call, such as <code>toList()</code> or <code>toListing()</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="default-element"><a class="anchor" href="#default-element"></a><a class="link" href="#default-element">Default Element</a></h3>
<div class="paragraph">
<p>Listings can have a <em>default element</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span> <i class="conum" data-value="5"></i><b>(5)</b>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Amends the <code>default</code> element and sets property <code>lifespan</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a new listing element that implicitly amends the default element.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines a new property called <code>name</code>. Property <code>lifespan</code> is inherited from the default element.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Defines a new listing element that implicitly amends the default element.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Overrides the default for property <code>lifespan</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>default</code> is a hidden (that is, not rendered) <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Listing#default">property</a> defined in class <code>Listing</code>.
If <code>birds</code> had a <a href="#listing-type-annotations">type annotation</a>, a suitable default element would be inferred from its type parameter.
If, as in our example, no type annotation is provided or inherited, the default element is the empty <code>Dynamic</code> object.</p>
</div>
<div class="paragraph">
<p>Like regular listing elements, the default element is late-bound.
As a result, defaults can be changed retroactively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds2</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">birds</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because both of <code>birds</code>'s elements amend the default element, changing the default element also changes them.
An equivalent literal definition of <code>birds2</code> would look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that Parrot kept its diet because its prior self defined it explicitly, overriding any default.</p>
</div>
<div class="paragraph">
<p>If you are interested in the technical underpinnings of default elements (and not afraid of dragons!), continue with <a href="#function-amending">Function Amending</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="listing-type-annotations"><a class="anchor" href="#listing-type-annotations"></a><a class="link" href="#listing-type-annotations">Type Annotations</a></h3>
<div class="paragraph">
<p>To declare the type of a property that is intended to hold a listing, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">x</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">ElementType</span><span class="hljs-punctuation">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This declaration has the following effects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x</code> is initialized with an empty listing.</p>
</li>
<li>
<p>If <code>ElementType</code> has a <a href="#default-values">default value</a>, that value becomes the listing&#8217;s default element.</p>
</li>
<li>
<p>The first time <code>x</code> is read,</p>
<div class="ulist">
<ul>
<li>
<p>its value is checked to have type <code>Listing</code>.</p>
</li>
<li>
<p>the listing&#8217;s elements are checked to have the type <code>ElementType</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">birds</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the default value for type <code>Bird</code> is <code>new Bird {}</code>, that value becomes the listing&#8217;s default element.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s go ahead and populate <code>birds</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Thanks to <code>birds</code>'s default element, which was inferred from its type,
it is not necessary to state the type of each list element
(<code>new Bird { &#8230;&#8203; }</code>, <code>new Bird { &#8230;&#8203; }</code>, etc.).</p>
</div>
<div class="sect3">
<h4 id="distinct-elements"><a class="anchor" href="#distinct-elements"></a><a class="link" href="#distinct-elements">Distinct Elements</a></h4>
<div class="paragraph">
<p>To constrain a listing to distinct elements, use <code>Listing</code>'s <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Listing#isDistinct">isDistinct</a> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">birds</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span><span class="hljs-punctuation">(</span><span class="hljs-property">isDistinct</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is as close as Pkl&#8217;s late-bound data types (objects, listings, and mappings) get to a <a href="#sets">Set</a>.</p>
</div>
<div class="paragraph">
<p>To demand distinct names instead of distinct <code>Bird</code> objects, use <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Listing#isDistinctBy()">isDistinctBy()</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span><span class="hljs-punctuation">(</span><span class="hljs-title function_ invoke__">isDistinctBy</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">it</span><span class="hljs-punctuation">.</span><span class="hljs-property">name</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mappings"><a class="anchor" href="#mappings"></a><a class="link" href="#mappings">Mappings</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Mapping">Mapping</a> is an ordered collection of <em>values</em> indexed by <em>key</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Most of what has been said about <a href="#listings">listings</a> also applies to mappings.
Nevertheless, this section is written to stand on its own.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A mapping&#8217;s key-value pairs are called its <em>entries</em>.
Keys are eagerly evaluated; values are lazily evaluated on the first read.</p>
</div>
<div class="paragraph">
<p>Mappings combine qualities of maps and objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Like maps, mappings can contain arbitrary key-value pairs.</p>
</li>
<li>
<p>Like objects, mappings excel at defining and amending nested literal data structures.</p>
</li>
<li>
<p>Like objects, mappings can only be directly manipulated through amendment,
but converting them to a map (and, if necessary, back to a mapping) opens the door to arbitrary transformations.</p>
</li>
<li>
<p>Like object properties, a mapping&#8217;s values (but not its keys) are evaluated lazily, can be defined in terms of each other, and are late-bound.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">When to use Mapping vs. <a href="#maps">Map</a></div>
<div class="ulist">
<ul>
<li>
<p>When key-value style data needs to be specified literally, use a mapping.</p>
</li>
<li>
<p>When key-value style data needs to be transformed in a way that cannot be achieved by <a href="#amending-mappings">amending</a> a mapping, use a map.</p>
</li>
<li>
<p>If in doubt, use a mapping.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Templates and schemas should almost always use mappings instead of maps.
Note that mappings can be converted to maps when the need arises.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="defining-mappings"><a class="anchor" href="#defining-mappings"></a><a class="link" href="#defining-mappings">Defining Mappings</a></h3>
<div class="paragraph">
<p>Mappings have the same literal syntax as objects, except that keys enclosed in <code>[]</code> take the place of property names.
Here is a mapping with two entries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a module property named <code>birds</code> with a value of type <code>Mapping</code>.
A type only needs to be stated when the property does not have or inherit a <a href="#mapping-type-annotations">type annotation</a>.
Otherwise, amend syntax (<code>birds { &#8230;&#8203; }</code>) or shorthand instantiation syntax (<code>birds = new { &#8230;&#8203; }</code>) should be used.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a mapping entry with the key <code>"Pigeon"</code> and a value of type <code>Dynamic</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines a mapping entry with the key <code>"Parrot"</code> and a value of type <code>Dynamic</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To access a value by key, use the <code>[]</code> (subscript) operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeon</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds</span>[<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span>
<span class="hljs-property">parrot</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds</span>[<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mappings can contain arbitrary types of values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">mapping</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;number&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>
  [<span class="hljs-string">&quot;list&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">)</span>
  [<span class="hljs-string">&quot;nested mapping&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
      <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Although string keys are most common, mappings can contain arbitrary types of keys:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">mapping</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-number">3</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>
  [<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dynamic</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abc&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Keys can be computed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">mapping</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">reverse</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mappings can have <code>local</code> properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">mapping</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">local</span> <span class="hljs-property">parrot</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">friend</span> <span class="hljs-operator">=</span> <span class="hljs-property">parrot</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a local property name <code>parrot</code> with the value <code>"Parrot"</code>.
Local properties can have a type annotation, as in <code>parrot: String = "Parrot"</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a mapping entry whose value references <code>parrot</code>.
The local property is visible to values but not keys.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="amending-mappings"><a class="anchor" href="#amending-mappings"></a><a class="link" href="#amending-mappings">Amending Mappings</a></h3>
<div class="paragraph">
<p>Let&#8217;s say we have the following mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To add, override, or amend entries of this mapping, amend the mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds2</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">birds</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  [<span class="hljs-string">&quot;Barn owl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">15</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Mice&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a module property named <code>birds2</code>. Its value is a mapping that amends <code>birds</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a mapping entry with the key <code>"Barn owl"</code> and a value of type <code>Dynamic</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Amends mapping entry <code>"Pigeon"</code> and overrides property <code>diet</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Overrides mapping entry <code>"Parrot"</code> with an entirely new value of type <code>Dynamic</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="late-binding-3"><a class="anchor" href="#late-binding-3"></a><a class="link" href="#late-binding-3">Late Binding</a></h3>
<div class="paragraph">
<p>A mapping entry&#8217;s value can be defined in terms of another entry&#8217;s value.
To reference the value with key <code>&lt;key&gt;</code>, use <code>this[&lt;key&gt;]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-keyword">this</span>[<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a mapping entry with the key <code>"Pigeon"</code> and a value of type <code>Dynamic</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a mapping entry with the key <code>"Parrot"</code> and a value that amends <code>"Pigeon"</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Mapping values are late-bound:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds2</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">birds</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">parrotDiet</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds2</span>[<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">.</span><span class="hljs-property">diet</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Amends mapping <code>birds</code> and overrides <code>"Pigeon"</code>'s <code>diet</code> property to have value <code>"Seeds"</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Because <code>"Parrot"</code> is defined in terms of <code>"Pigeon"</code>, its <code>diet</code> property also changes to <code>"Seeds"</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="transforming-mappings"><a class="anchor" href="#transforming-mappings"></a><a class="link" href="#transforming-mappings">Transforming Mappings</a></h3>
<div class="paragraph">
<p>Say we have the following mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-keyword">this</span>[<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>How can <code>birds</code>'s keys be reversed programmatically?</p>
</div>
<div class="paragraph">
<p>The recipe for transforming a mapping is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Convert the mapping to a map.</p>
</li>
<li>
<p>Transform the map using <code>Map</code>'s <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Map">rich API</a>.</p>
</li>
<li>
<p>If necessary, convert the map back to a mapping.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Often, transformations happen in a <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/PcfRenderer#converters">converter</a> of a <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/ValueRenderer">value renderer</a>.
As most value renderers treat maps the same as mappings, it is often not necessary to convert back to a mapping.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Equipped with this knowledge, let&#8217;s try to accomplish our objective:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">result</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toMap</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">mapKeys</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">key</span><span class="hljs-punctuation">,</span> <span class="hljs-params">value</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">key</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">reverse</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
  <span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toMapping</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>result</code> contains the same values as <code>birds</code>, but its keys have changed to <code>"noegiP"</code> and <code>"torraP"</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Lazy vs. Eager Data Types</div>
<div class="paragraph">
<p>Converting a mapping to a map is a transition from a <em>lazy</em> to an <em>eager</em> data type.
All of the mapping&#8217;s values are evaluated and all references between them are resolved.
(Mapping keys are eagerly evaluated.)</p>
</div>
<div class="paragraph">
<p>If the map is later converted back to a mapping, changes to the mapping&#8217;s values no longer propagate to (previously) dependent values.
To make these boundaries clear, transitioning between <em>lazy</em> and <em>eager</em> data types always requires an explicit method call, such as <code>toMap()</code> or <code>toMapping()</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="default-value"><a class="anchor" href="#default-value"></a><a class="link" href="#default-value">Default Value</a></h3>
<div class="paragraph">
<p>Mappings can have a <em>default value</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span> <i class="conum" data-value="5"></i><b>(5)</b>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Amends the <code>default</code> value and sets property <code>lifespan</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a mapping entry with the key <code>"Pigeon"</code> that implicitly amends the default value.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines a new property called <code>diet</code>. Property <code>lifespan</code> is inherited from the default value.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Defines a mapping entry with the key <code>"Parrot"</code> that implicitly amends the default value.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Overrides the default for property <code>lifespan</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>default</code> is a hidden (that is, not rendered) <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Mapping#default">property</a> defined in class <code>Mapping</code>.
If <code>birds</code> had a <a href="#mapping-type-annotations">type annotation</a>, a suitable default value would be inferred from its second type parameter.
If, as in our example, no type annotation is provided or inherited, the default value is the empty <code>Dynamic</code> object.</p>
</div>
<div class="paragraph">
<p>Like regular mapping values, the default value is late-bound.
As a result, defaults can be changed retroactively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds2</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">birds</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because both of <code>birds</code>'s mapping values amend the default value, changing the default value also changes them.
An equivalent literal definition of <code>birds2</code> would look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that Parrot kept its lifespan because its prior self defined it explicitly, overriding any default.</p>
</div>
<div class="paragraph">
<p>If you are interested in the technical underpinnings of default values, continue with <a href="#function-amending">Function Amending</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="mapping-type-annotations"><a class="anchor" href="#mapping-type-annotations"></a><a class="link" href="#mapping-type-annotations">Type Annotations</a></h3>
<div class="paragraph">
<p>To declare the type of a property that is intended to hold a mapping, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">x</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Mapping</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">KeyType</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">ValueType</span><span class="hljs-punctuation">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This declaration has the following effects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x</code> is initialized with an empty mapping.</p>
</li>
<li>
<p>If <code>ValueType</code> has a <a href="#default-values">default value</a>, that value becomes the mapping&#8217;s default value.</p>
</li>
<li>
<p>The first time <code>x</code> is read,</p>
<div class="ulist">
<ul>
<li>
<p>its value is checked to have type <code>Mapping</code>.</p>
</li>
<li>
<p>the mapping&#8217;s keys are checked to have type <code>KeyType</code>.</p>
</li>
<li>
<p>the mapping&#8217;s values are checked to have type <code>ValueType</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">birds</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Mapping</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the default value for type <code>Bird</code> is <code>new Bird {}</code>, that value becomes the mapping&#8217;s default value.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s go ahead and populate <code>birds</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Thanks to <code>birds</code>'s default value, which was inferred from its type,
it is not necessary to state the type of each mapping value
(<code>["Pigeon"] = new Bird { &#8230;&#8203; }</code>, <code>["Parrot"] = new Bird { &#8230;&#8203; }</code>, etc.).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="classes"><a class="anchor" href="#classes"></a><a class="link" href="#classes">Classes</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Classes are arranged in a single inheritance hierarchy.
At the top of the hierarchy sits class <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Any">Any</a>; at the bottom, type <a href="#nothing-type">nothing</a>.</p>
</div>
<div class="paragraph">
<p>Classes contain properties and methods, which can be <code>local</code> to their declaring scope.
Properties can also be <code>hidden</code> from rendering.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-keyword">hidden</span> <span class="hljs-property">taxonomy</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Taxonomy</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Taxonomy</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">`species`</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Common wood pigeon&quot;</span>
  <span class="hljs-property">taxonomy</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">species</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Columba palumbus&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeonClass</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">getClass</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Declaration of new class instances will fail when property names are misspelled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">// Detects the spelling mistake</span>
<span class="hljs-property">parrot</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">namw</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="class-inheritance"><a class="anchor" href="#class-inheritance"></a><a class="link" href="#class-inheritance">Class Inheritance</a></h3>
<div class="paragraph">
<p>Pkl supports single inheritance with a Java(Script)-like syntax.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ParentBird</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">kids</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">&gt;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">ParentBird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Old Pigeon&quot;</span>
  <span class="hljs-property">kids</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon Jr.&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Teen Pigeon&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="methods"><a class="anchor" href="#methods"></a><a class="link" href="#methods">Methods</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pkl methods can be defined on classes and modules using the <code>function</code> keyword.
Methods may access properties of their containing type.
Submodules and subclasses can override them.</p>
</div>
<div class="paragraph">
<p>Like Java and most other object-oriented languages, Pkl uses <em>single dispatch</em>&#8201;&#8212;&#8201;methods are dynamically dispatched based on the receiver&#8217;s runtime type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span><span class="hljs-punctuation">(</span><span class="hljs-params">bird</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello, <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-params">bird</span><span class="hljs-punctuation">.</span><span class="hljs-property">name</span><span class="hljs-char escape_">)</span></span>!&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">greetPigeon</span><span class="hljs-punctuation">(</span><span class="hljs-params">bird</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-operator">=</span> <span class="hljs-params">bird</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">greet</span><span class="hljs-punctuation">(</span><span class="hljs-property">pigeon</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>

<span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">parrot</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">greeting1</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">greet</span><span class="hljs-punctuation">(</span><span class="hljs-property">parrot</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">greeting2</span> <span class="hljs-operator">=</span> <span class="hljs-title function_ invoke__">greetPigeon</span><span class="hljs-punctuation">(</span><span class="hljs-property">parrot</span><span class="hljs-punctuation">)</span>  <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Instance method of class <code>Bird</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Module method.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call instance method on <code>pigeon</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Call module method (on <code>this</code>).</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Methods do not support named parameters or default parameter values.
The <a href="../../../blog/class-as-a-function.html" class="xref page">Class-as-a-function</a> pattern may be a suitable replacement.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In most cases, methods without parameters should not be defined.
Instead, use <a href="#fixed-properties"><code>fixed</code> properties</a> on the module or class.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="modules"><a class="anchor" href="#modules"></a><a class="link" href="#modules">Modules</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction"><a class="anchor" href="#introduction"></a><a class="link" href="#introduction">Introduction</a></h3>
<div class="paragraph">
<p>Modules are the unit of loading, executing, and sharing Pkl code.
Every file containing Pkl code is a module.
By convention, module files have a <code>.pkl</code> extension.</p>
</div>
<div class="paragraph">
<p>Modules have a <a href="#module-names">Module Name</a> and are loaded from a <a href="#module-uris">Module URI</a>.</p>
</div>
<div class="paragraph">
<p>At runtime, modules are represented as objects of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Module">Module</a>.
The precise runtime type of a module is a subclass of <code>Module</code> containing the module&#8217;s property and method definitions.</p>
</div>
<div class="paragraph">
<p>Like class members, module members may have type annotations, which are validated at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">timeout</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Duration</span><span class="hljs-punctuation">(</span><span class="hljs-property">isPositive</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">ms</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span><span class="hljs-punctuation">(</span><span class="hljs-params">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello, <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-params">name</span><span class="hljs-char escape_">)</span></span>!&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because modules are regular objects, they can be assigned to properties and passed to and returned from methods.</p>
</div>
<div class="paragraph">
<p>Modules can be <a href="#import-module">imported</a> by other modules.
In analogy to objects, modules can serve as templates for other modules through <a href="#module-amend">amending</a>.
In analogy to classes, modules can be <a href="#module-extend">extended</a> to add additional module members.</p>
</div>
</div>
<div class="sect2">
<h3 id="module-names"><a class="anchor" href="#module-names"></a><a class="link" href="#module-names">Module Names</a></h3>
<div class="paragraph">
<p>Modules may declare their name by way of a <em>module clause</em>, which consists of the keyword <code>module</code> followed by a qualified name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// My bird module.</span>
<span class="hljs-keyword">module</span> <span class="hljs-property">com</span><span class="hljs-punctuation">.</span><span class="hljs-property">animals</span><span class="hljs-punctuation">.</span><span class="hljs-title class_">Birds</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A module clause must come first in a module.
Its doc comment, if present, holds the module&#8217;s overall documentation.</p>
</div>
<div class="paragraph">
<p>In the absence of a module clause, a module&#8217;s name is inferred from the module URI from which the module was first loaded.
For example, the inferred name for a module first loaded from <code>https://example.com/pkl/bird.pkl</code> is <code>bird</code>.</p>
</div>
<div class="paragraph">
<p>Module names do not affect evaluation but are used in diagnostic messages and Pkldoc.
In particular, they are the first component (everything before the hash sign) of fully qualified member names such as <code>pkl.base#Int</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Modules shared with other parties should declare a qualified module name, which is more unique and stable than an inferred name.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="module-uris"><a class="anchor" href="#module-uris"></a><a class="link" href="#module-uris">Module URIs</a></h3>
<div class="paragraph">
<p>Modules are loaded from <em>module URIs</em>.</p>
</div>
<div class="paragraph">
<p>By default, the following URI types are available for import:</p>
</div>
<div class="sect3">
<h4 id="file-uri"><a class="anchor" href="#file-uri"></a><a class="link" href="#file-uri">File URI:</a></h4>
<div class="paragraph">
<p>Example: <code>file:///path/to/my_module.pkl</code></p>
</div>
<div class="paragraph">
<p>Represents a module located on a file system.</p>
</div>
</div>
<div class="sect3">
<h4 id="https-uri"><a class="anchor" href="#https-uri"></a><a class="link" href="#https-uri">HTTP(S) URI:</a></h4>
<div class="paragraph">
<p>Example: <code>https://example.com/my_module.pkl</code></p>
</div>
<div class="paragraph">
<p>Represents a module imported via an HTTP(S) GET request.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Modules loaded from HTTP(S) URIs are only cached until the <code>pkl</code> command exits or the <code>Evaluator</code> object is closed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="module-path-uri"><a class="anchor" href="#module-path-uri"></a><a class="link" href="#module-path-uri">Module path URI:</a></h4>
<div class="paragraph">
<p>Example: <code>modulepath:/path/to/my_module.pkl</code></p>
</div>
<div class="paragraph">
<p>Module path URIs are resolved relative to the <em>module path</em>, a search path for modules similar to Java&#8217;s class path (see the <code>--module-path</code> CLI option).
For example, given the module path <code>/dir1:/zip1.zip:/jar1.jar</code>, module <code>modulepath:/path/to/my_module.pkl</code> will be searched for in the following locations:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>/dir1/path/to/my_module.pkl</code></p>
</li>
<li>
<p><code>/path/to/my_module.pkl</code> within <code>/zip1.zip</code></p>
</li>
<li>
<p><code>/path/to/my_module.pkl</code> within <code>/jar1.jar</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When evaluating Pkl code from Java, <code>modulepath:/path/to/my_module.pkl</code> corresponds to class path location <code>path/to/my_module.pkl</code>.
In a typical Java project, this corresponds to file path <code>src/main/resources/path/to/my_module.pkl</code> or <code>src/test/resources/path/to/my_module.pkl</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="package-asset-uri"><a class="anchor" href="#package-asset-uri"></a><a class="link" href="#package-asset-uri">Package asset URI:</a></h4>
<div class="paragraph">
<p>Example: <code>package://example.com/mypackage@1.0.0#/my_module.pkl</code></p>
</div>
<div class="paragraph">
<p>Represent a module within a <em>package</em>.
A package is a shareable archive of modules and resources that are published to the internet.</p>
</div>
<div class="paragraph">
<p>To import <code>package://example.com/mypackage@1.0.0#/my_module.pkl</code>, Pkl follows these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make an HTTPS GET request to <code>https://example.com/mypackage@1.0.0</code> to retrieve the package&#8217;s metadata.</p>
</li>
<li>
<p>From the package metadata, download the referenced zip archive, and validate its checksum.</p>
</li>
<li>
<p>Resolve path <code>/my_module.pkl</code> within the package&#8217;s zip archive.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A package asset URI has the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>'package://' &lt;host&gt; &lt;path&gt; '@' &lt;semver&gt; '#' &lt;asset path&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Optionally, the SHA-256 checksum of the package can also be specified:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">'package://' &lt;host&gt; &lt;path&gt; '@' &lt;semver&gt; '::sha256:' &lt;sha256-checksum&gt; '#' &lt;asset path&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Packages can be managed as dependencies within a <em>project</em>.
For more details, consult the <a href="#projects">project</a> section of the language reference.</p>
</div>
</div>
<div class="sect3">
<h4 id="standard-library-uri"><a class="anchor" href="#standard-library-uri"></a><a class="link" href="#standard-library-uri">Standard Library URI</a></h4>
<div class="paragraph">
<p>Example: <code>pkl:math</code></p>
</div>
<div class="paragraph">
<p>Standard library modules are named <code>pkl.&lt;simpleName&gt;</code> and have module URIs of the form <code>pkl:&lt;simpleName&gt;</code>.
For example, module <code>pkl.math</code> has module URI <code>pkl:math</code>.
See the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/">API Docs</a> for the complete list of standard library modules.</p>
</div>
</div>
<div class="sect3">
<h4 id="relative-uris"><a class="anchor" href="#relative-uris"></a><a class="link" href="#relative-uris">Relative URIs</a></h4>
<div class="paragraph">
<p>Relative module URIs are interpreted relative to the URI of the enclosing module.
For example, a module with URI <code>modulepath:/animals/birds/pigeon.pkl</code>
can import <code>modulepath:/animals/birds/parrot.pkl</code>
with <code>import "parrot.pkl"</code> or <code>import "/animals/birds/parrot.pkl"</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Paths on Windows</div>
<div class="paragraph">
<p>Relative paths use the <code>/</code> character as the directory separator on all platforms, including Windows.</p>
</div>
<div class="paragraph">
<p>Paths that contain drive letters (e.g. <code>C:</code>) must be declared as an absolute file URI, for example: <code>import "file:///C:/path/to/my/module.pkl"</code>. Otherwise, they are interpreted as a URI scheme.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When importing a relative directory or file that starts with <code>@</code>, the import string must be prefixed with <code>./</code>.
Otherwise, this syntax will be interpreted as <a href="#dependency-notation">dependency notation</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="dependency-notation"><a class="anchor" href="#dependency-notation"></a><a class="link" href="#dependency-notation">Dependency notation URIs</a></h4>
<div class="paragraph">
<p>Example: <code>@birds/bird.pkl</code></p>
</div>
<div class="paragraph">
<p>Dependency notation URIs represent a path within a <a href="#project-dependencies">project or package dependency</a>.
For example, import <code>@birds/bird.pkl</code> represents path <code>/bird.pkl</code> in a dependency named "birds".</p>
</div>
<div class="paragraph">
<p>A dependency is either a remote package or a local project dependency.</p>
</div>
</div>
<div class="sect3">
<h4 id="extension-points"><a class="anchor" href="#extension-points"></a><a class="link" href="#extension-points">Extension points</a></h4>
<div class="paragraph">
<p>Pkl embedders can register additional module loaders that recognize other types of module URIs.</p>
</div>
</div>
<div class="sect3">
<h4 id="evaluation"><a class="anchor" href="#evaluation"></a><a class="link" href="#evaluation">Evaluation</a></h4>
<div class="paragraph">
<p>Module URIs can be evaluated directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ pkl eval path/to/mymodule.pkl
$ pkl eval file:///path/to/my_module.pkl
$ pkl eval https://apple.com/path/to/mymodule.pkl
$ pkl eval --module-path=/pkl-modules modulepath:/path/to/my_module.pkl
$ pkl eval pkl:math</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="triple-dot-module-uris"><a class="anchor" href="#triple-dot-module-uris"></a><a class="link" href="#triple-dot-module-uris">Triple-dot Module URIs</a></h4>
<div class="paragraph">
<p>To simplify referencing ancestor modules in a hierarchical module structure,
relative file and module path URIs may start with <code>.../</code>, a generalization of <code>../</code>.
Module URI <code>.../foo/bar/baz.pkl</code> resolves to the first existing module among
<code>../foo/bar/baz.pkl</code>, <code>../../foo/bar/baz.pkl</code>, <code>../../../foo/bar/baz.pkl</code>, and so on.
Furthermore, module URI <code>...</code> is equivalent to <code>.../&lt;currentFileName&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Using triple-dot module URIs never resolve to the current module.
For example, a module at path <code>foo/bar.pkl</code> that references module URI <code>.../foo/bar.pkl</code>
does not resolve to itself.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="module-amend"><a class="anchor" href="#module-amend"></a><a class="link" href="#module-amend">Amending a Module</a></h3>
<div class="paragraph">
<p>Recall how an object is amended:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeon</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">parrot</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">pigeon</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>   <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Object <code>parrot</code> amends object <code>pigeon</code>, inheriting all of its members.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>parrot</code> overrides <code>name</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Amending a module works in the same way, except that the syntax differs slightly:</p>
</div>
<div class="listingblock">
<div class="title">pigeon.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">parrot.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;pigeon.pkl&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>     <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Module <code>parrot</code> amends module <code>pigeon</code>, inheriting all of its members.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>parrot</code> overrides <code>name</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A module is amended by way of an <em>amends clause</em>, which consists of the keyword <code>amends</code> followed by the <a href="#module-uris">module URI</a> of the module to amend.</p>
</div>
<div class="paragraph">
<p>An amends clause comes after the module clause (if present) and before any import clauses:</p>
</div>
<div class="listingblock">
<div class="title">parrot.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">module</span> <span class="hljs-property">parrot</span>

<span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;pigeon.pkl&quot;</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;other.pkl&quot;</span>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>At most one amends clause is permitted.
A module cannot have both an amends clause and an extends clause.</p>
</div>
<div class="paragraph">
<p>An amending module has the same type (that is, module class) as the module it amends.
As a consequence, it cannot define new properties, methods, or classes, unless they are declared as <code>local</code>.
In our example, this means that module <code>parrot</code> can only define (and thus override) the property <code>name</code>.
Spelling mistakes such as <code>namw</code> are caught immediately, rather than accidentally defining a new property.</p>
</div>
<div class="paragraph">
<p>Amending is used to fill in <em>template modules</em>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The template module defines which properties exist, their types, and what module output is desired (for example JSON indented with two spaces).</p>
</li>
<li>
<p>The amending module fills in property values as required, relying on the structure, defaults and validation provided by the template module.</p>
</li>
<li>
<p>The amending module is evaluated to produce the final result.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Template modules are often provided by third parties and served over HTTPS.</p>
</div>
</div>
<div class="sect2">
<h3 id="module-extend"><a class="anchor" href="#module-extend"></a><a class="link" href="#module-extend">Extending a Module</a></h3>
<div class="paragraph">
<p>Recall how a class is extended:</p>
</div>
<div class="listingblock">
<div class="title">PigeonAndParrot.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pigeon</span> <span class="hljs-punctuation">{</span>   <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Parrot</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Pigeon</span> <span class="hljs-punctuation">{</span>   <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>               <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>              <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="hljs-property">extinct</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>               <i class="conum" data-value="5"></i><b>(5)</b>

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">say</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pkl is great!&quot;</span>   <i class="conum" data-value="6"></i><b>(6)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Class <code>Pigeon</code> is declared as <code>open</code> for extension.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Class <code>Parrot</code> extends <code>Pigeon</code>, inheriting all of its members.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>Parrot</code> overrides <code>name</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>Parrot</code> overrides <code>diet</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>Parrot</code> defines a new property named <code>extinct</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>Parrot</code> defines a new function named <code>say</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Extending a module works in the same way, except that the syntax differs slightly:</p>
</div>
<div class="listingblock">
<div class="title">pigeon.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">open</span> <span class="hljs-keyword">module</span> <span class="hljs-property">pigeon</span>   <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Module <code>pigeon</code> is declared as <code>open</code> for extension.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">parrot.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">extends</span> <span class="hljs-string">&quot;pigeon.pkl&quot;</span>    <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>         <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>        <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">extinct</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>         <i class="conum" data-value="4"></i><b>(4)</b>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">say</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pkl is great!&quot;</span> <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Module <code>parrot</code> extends module <code>pigeon</code>, inheriting all of its members.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>parrot</code> overrides <code>name</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>parrot</code> overrides <code>diet</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>parrot</code> defines a new property named <code>extinct</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>parrot</code> defines a new function named <code>say</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A module is extended by way of an <em>extends clause</em>, which consists of the keyword <code>extends</code> followed by the <a href="#module-uris">module URI</a> of the module to extend.
The extends clause comes after the module clause (if present) and before any import clauses.
Only modules declared as <code>open</code> can be extended.</p>
</div>
<div class="listingblock">
<div class="title">parrot.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">module</span> <span class="hljs-property">parrot</span>

<span class="hljs-keyword">extends</span> <span class="hljs-string">&quot;pigeon.pkl&quot;</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;other.pkl&quot;</span>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
<span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Berries&quot;</span>
<span class="hljs-property">extinct</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">say</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pkl is great!&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>At most one extends clause is permitted.
A module cannot have both an amends clause and an extends clause.</p>
</div>
<div class="paragraph">
<p>Extending a module implicitly defines a new module class that extends the original module&#8217;s class.</p>
</div>
</div>
<div class="sect2">
<h3 id="import-module"><a class="anchor" href="#import-module"></a><a class="link" href="#import-module">Importing a Module</a></h3>
<div class="paragraph">
<p>A module import makes the imported module accessible to the importing module.
A module is imported by way of either an <a href="#import-clause">import clause</a>, or an <a href="#import-expression">import expression</a>.</p>
</div>
<div class="sect3">
<h4 id="import-clause"><a class="anchor" href="#import-clause"></a><a class="link" href="#import-clause">Import Clauses</a></h4>
<div class="paragraph">
<p>An import clause consists of the keyword <code>import</code> followed by the <a href="#module-uris">module URI</a> of the module to import.
An import clause comes after module, amends and extends clauses (if present), and before the module body:</p>
</div>
<div class="listingblock">
<div class="title">parrot.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">module</span> <span class="hljs-property">parrot</span>

<span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;pigeon.pkl&quot;</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;module1.pkl&quot;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;module2.pkl&quot;</span>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple import clauses are permitted.</p>
</div>
<div class="paragraph">
<p>A module import implicitly defines a new <code>const local</code> property through which the imported module can be accessed.
(Remember that modules are regular objects.)
The name of this property, called <em>import name</em>, is constructed from the module URI as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Strip the URI scheme, including the colon (<code>:</code>).</p>
</li>
<li>
<p>Strip everything up to and including the last forward slash (<code>/</code>).</p>
</li>
<li>
<p>Strip any trailing <code>.pkl</code> file extension.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here are some examples:</p>
</div>
<div class="listingblock">
<div class="title">Local file import</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;modules/pigeon.pkl&quot;</span> <span class="hljs-comment">// relative to current module</span>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-property">name</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">HTTPS import</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;https://mycompany.com/modules/pigeon.pkl&quot;</span>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-property">name</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Standard library import</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;pkl:math&quot;</span>

<span class="hljs-property">pi</span> <span class="hljs-operator">=</span> <span class="hljs-property">math</span><span class="hljs-punctuation">.</span><span class="hljs-title class_">Pi</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Package import</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;package://example.com/birds@1.0.0#/sparrow.pkl&quot;</span>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-property">sparrow</span><span class="hljs-punctuation">.</span><span class="hljs-property">name</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because its members are automatically visible in every module, the <code>pkl:base</code> module is typically not imported.</p>
</div>
<div class="paragraph">
<p>Occasionally, the default import name for a module may not be convenient or appropriate:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If not a valid identifier, the import name needs to be enclosed in backticks on each use, for example, <code>&#96;my-module&#96;.someMember</code>.</p>
</li>
<li>
<p>The import name may clash with other names in the importing module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In such a case, a different import name can be chosen:</p>
</div>
<div class="listingblock">
<div class="title">parrot.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;pigeon.pkl&quot;</span> <span class="hljs-keyword">as</span> <span class="hljs-property">piggy</span>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
<span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-property">piggy</span><span class="hljs-punctuation">.</span><span class="hljs-property">diet</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">What makes a good module file name?</div>
<div class="paragraph">
<p>When creating a new module, especially one intended for import into other modules, try to choose a module file name that makes a good import name:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>short</p>
<div class="paragraph">
<p>Less than six characters, not counting the <code>.pkl</code> file extension, is a good rule of thumb.</p>
</div>
</li>
<li>
<p>valid identifier</p>
<div class="paragraph">
<p>Stick to alphanumeric characters. Use an underscore (<code>_</code>) instead of a hyphen (<code>-</code>) as a name separator.</p>
</div>
</li>
<li>
<p>descriptive</p>
<div class="paragraph">
<p>An import name should make sense on its own and when used in qualified member names.</p>
</div>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="import-expression"><a class="anchor" href="#import-expression"></a><a class="link" href="#import-expression">Import Expressions (<code>import()</code>)</a></h4>
<div class="paragraph">
<p>An import expression consists of the keyword <code>import</code>, followed by a <a href="#module-uris">module URI</a> wrapped in parentheses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">module</span> <span class="hljs-property">birds</span>

<span class="hljs-property">pigeon</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">import</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;pigeon.pkl&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">parrot</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">import</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;parrot.pkl&quot;</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Unlike import clauses, import expressions only import a value, and do not import a type.
A type is a name that can be used in type positions, for example, as a type annotation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="globbed-imports"><a class="anchor" href="#globbed-imports"></a><a class="link" href="#globbed-imports">Globbed Imports</a></h3>
<div class="paragraph">
<p>Multiple modules may be imported at once with <code>import*</code>.
When importing multiple modules, a glob pattern is used to match against existing resources.
A globbed import evaluates to a <code>Mapping</code>, where keys are the expanded form of the glob and values are import expressions on each individual module.</p>
</div>
<div class="paragraph">
<p>Globbed imports can be expressed as either a clause or as an expression.
When expressed as a clause, they follow the same naming rules as a normal <a href="#import-clause">import clause</a>: they introduce a local property equal to the last path segment without the <code>.pkl</code> extension.
A globbed import clause cannot be used as a type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import*</span> <span class="hljs-string">&quot;birds/*.pkl&quot;</span> <span class="hljs-keyword">as</span> <span class="hljs-property">allBirds</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-keyword">import*</span> <span class="hljs-string">&quot;reptiles/*.pkl&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>

<span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">import*</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/*.pkl&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Globbed import clause</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Globbed import clause without an explicit name (will import the name <code>*</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Globbed import expression</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Assuming that a file system contains these files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">.
â”œâ”€â”€ birds/
â”‚  â”œâ”€â”€ pigeon.pkl
â”‚  â”œâ”€â”€ parrot.pkl
â”‚  â””â”€â”€ falcon.pkl
â””â”€â”€ index.pkl</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following two snippets are logically identical:</p>
</div>
<div class="listingblock">
<div class="title">index.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">import*</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/*.pkl&quot;</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">index.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;birds/pigeon.pkl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">import</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/pigeon.pkl&quot;</span><span class="hljs-punctuation">)</span>
  [<span class="hljs-string">&quot;birds/parrot.pkl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">import</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/parrot.pkl&quot;</span><span class="hljs-punctuation">)</span>
  [<span class="hljs-string">&quot;birds/falcon.pkl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">import</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/falcon.pkl&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, only the <code>file</code> and <code>package</code> schemes are globbable.
Globbing another scheme will cause Pkl to throw.</p>
</div>
<div class="paragraph">
<p>Pkl can be extended to provide custom globbable schemes through the <a href="https://github.com/apple/pkl/tree/0.26.3/pkl-core/src/main/java/org/pkl/core/module/ModuleKey.java">ModuleKey</a>
SPI.</p>
</div>
<div class="paragraph">
<p>When globbing within <a href="#package-asset-uri">packages</a>, only the asset path (the fragment section) is globbable.
Otherwise, characters are interpreted verbatim, and not treated as glob wildcards.</p>
</div>
<div class="paragraph">
<p>For details on how glob patterns work, refer to <a href="#glob-patterns">Glob Patterns</a> in the Advanced Topics section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When globbing files, symbolic links are not followed. Additionally, the <code>.</code> and <code>..</code> entries are skipped.<br>
This behavior is similar to the behavior of Bash with <code>shopt -s dotglob</code> enabled.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="security-checks"><a class="anchor" href="#security-checks"></a><a class="link" href="#security-checks">Security Checks</a></h3>
<div class="paragraph">
<p>When attempting to directly evaluate a module, as in <code>pkl eval myModule.pkl</code>,
the following security checks are performed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The module URI is checked against the module allowlist (<code>--allowed-modules</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The module allowlist is a comma-separated list of regular expressions.
For access to be granted, at least one regular expression must match a prefix of the module URI.
For example, the allowlist <code>file:,https:</code> grants access to any module whose URI starts with <code>file:</code> or <code>https:</code>.</p>
</div>
<div class="paragraph">
<p>When a module attempts to load another module (via <code>amends</code>, <code>extends</code>, or <code>imports</code>),
the following security checks are performed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The target module URI is checked against the module allowlist (<code>--allowed-modules</code>).</p>
</li>
<li>
<p>The source and target modules' <em>trust levels</em> are determined and compared.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For access to be granted, the source module&#8217;s trust level must be higher than or equal to the target module&#8217;s trust level.
By default, there are five trust levels, listed from highest to lowest:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>repl:</code> modules (code evaluated in the REPL)</p>
</li>
<li>
<p><code>file:</code> modules</p>
</li>
<li>
<p><code>modulepath:</code> modules</p>
</li>
<li>
<p>All other modules (for example <code>https:</code>)</p>
</li>
<li>
<p><code>pkl:</code> modules (standard library)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, this means that <code>file:</code> modules can import <code>https:</code> modules, but not the other way around.</p>
</div>
<div class="paragraph">
<p>If a module URI is resolved in multiple steps, all URIs are subject to the above security checks.
An example of this is an HTTPS URL that results in a redirect.</p>
</div>
<div class="paragraph">
<p>Pkl embedders can further customize security checks.</p>
</div>
</div>
<div class="sect2">
<h3 id="module-output"><a class="anchor" href="#module-output"></a><a class="link" href="#module-output">Module Output</a></h3>
<div class="paragraph">
<p>By default, the output of evaluating a module is the entire module rendered as Pcf.
There are two ways to change this behavior:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>Outside</em> the language, by using the <code>--format</code> CLI option or the <code>outputFormat</code> Gradle task property.</p>
</li>
<li>
<p><em>Inside</em> the language, by configuring a module&#8217;s <code>output</code> property.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="cli"><a class="anchor" href="#cli"></a><a class="link" href="#cli">CLI</a></h4>
<div class="paragraph">
<p>Given the following module:</p>
</div>
<div class="listingblock">
<div class="title">config.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>
<span class="hljs-property">b</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>pkl eval config.pkl</code>, which is shorthand for <code>pkl eval --format pcf config.pkl</code>, renders the module as Pcf:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>
<span class="hljs-property">b</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>pkl eval --format yaml config.pkl</code> renders the module as YAML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">a: 10
b:
  c: 20</code></pre>
</div>
</div>
<div class="paragraph">
<p>Likewise, <code>pkl eval --format json config.pkl</code> renders the module as JSON.</p>
</div>
</div>
<div class="sect3">
<h4 id="in-language"><a class="anchor" href="#in-language"></a><a class="link" href="#in-language">In-language</a></h4>
<div class="paragraph">
<p>Now let&#8217;s do the same&#8201;&#8212;&#8201;and more&#8201;&#8212;&#8201;inside the language.</p>
</div>
<div class="paragraph">
<p>Modules have an <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Module#output">output</a> property that controls what the module&#8217;s output is and how that output is rendered.</p>
</div>
<div class="paragraph">
<p>To control <strong>what</strong> the output is, set the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/ModuleOutput#value">output.value</a> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>
<span class="hljs-property">b</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">value</span> <span class="hljs-operator">=</span> <span class="hljs-property">b</span> <span class="hljs-comment">// defaults to `outer`, which is the entire module</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To control <em>how</em> the output is rendered, set the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/ModuleOutput#renderer">output.renderer</a> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>
<span class="hljs-property">b</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">renderer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YamlRenderer</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The standard library provides these renderers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/JsonRenderer">JsonRenderer</a></p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/jsonnet/Renderer">jsonnet.Renderer</a></p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/PcfRenderer">PcfRenderer</a></p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/PListRenderer">PListRenderer</a></p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/PropertiesRenderer">PropertiesRenderer</a></p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/protobuf/Renderer">protobuf.Renderer</a></p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/xml/Renderer">xml.Renderer</a></p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/YamlRenderer">YamlRenderer</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To render a format that is not yet supported, you can implement your own renderer by extending the class <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/ValueRenderer">ValueRenderer</a>.</p>
</div>
<div class="paragraph">
<p>The standard library renderers can be configured with <em>value converters</em>, which influence how particular values are rendered.</p>
</div>
<div class="paragraph">
<p>For example, since YAML does not have a standard way to represent data sizes, a plain <code>YamlRenderer</code> cannot render <code>DataSize</code> values.
However, we can teach it to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">quota</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">memory</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span><span class="hljs-punctuation">.</span><span class="hljs-property">mb</span>
  <span class="hljs-property">disk</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span><span class="hljs-punctuation">.</span><span class="hljs-property">gb</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">renderer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YamlRenderer</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">converters</span> <span class="hljs-punctuation">{</span>
      [<span class="hljs-title class_">DataSize</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">size</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-string">&quot;<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-params">size</span><span class="hljs-punctuation">.</span><span class="hljs-property">value</span><span class="hljs-char escape_">)</span></span> <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-params">size</span><span class="hljs-punctuation">.</span><span class="hljs-property">unit</span><span class="hljs-char escape_">)</span></span>&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">quota:
  memory: 100 MB
  disk: 20 GB</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to <em>type</em> based converters, renderers also support <em>path</em> based converters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">renderer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YamlRenderer</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">converters</span> <span class="hljs-punctuation">{</span>
      [<span class="hljs-string">&quot;quota.memory&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">size</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-string">&quot;<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-params">size</span><span class="hljs-punctuation">.</span><span class="hljs-property">value</span><span class="hljs-char escape_">)</span></span> <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-params">size</span><span class="hljs-punctuation">.</span><span class="hljs-property">unit</span><span class="hljs-char escape_">)</span></span>&quot;</span>
      [<span class="hljs-string">&quot;quota.disk&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">size</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-string">&quot;<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-params">size</span><span class="hljs-punctuation">.</span><span class="hljs-property">value</span><span class="hljs-char escape_">)</span></span> <span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-params">size</span><span class="hljs-punctuation">.</span><span class="hljs-property">unit</span><span class="hljs-char escape_">)</span></span>&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For more on path-based converters, see <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/PcfRenderer#converters">PcfRenderer.converters</a>.</p>
</div>
<div class="paragraph">
<p>Sometimes it is useful to directly compute the final module output, bypassing <code>output.value</code> and <code>output.converters</code>.
To do so, set the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/ModuleOutput#text">output.text</a> property to a String value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// defaults to `renderer.render(value)`</span>
  <span class="hljs-property">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;this is the final output&quot;</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toUpperCase</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">THIS IS THE FINAL OUTPUT</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="multiple-file-output"><a class="anchor" href="#multiple-file-output"></a><a class="link" href="#multiple-file-output">Multiple File Output</a></h4>
<div class="paragraph">
<p>It is sometimes desirable for a single module to produce multiple output files.
This is possible by configuring a module&#8217;s <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/ModuleOutput#files"><code>output.files</code></a> property
and specifying the <a href="../pkl-cli/index.html#multiple-file-output-path" class="xref page"><code>--multiple-file-output-path</code></a>
(or <code>-m</code> for short) CLI option.</p>
</div>
<div class="paragraph">
<p>Here is an example that produces a JSON and a YAML file:</p>
</div>
<div class="listingblock">
<div class="title">birds.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeon</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">parrot</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">files</span> <span class="hljs-punctuation">{</span>
    [<span class="hljs-string">&quot;birds/pigeon.json&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-property">value</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span>
      <span class="hljs-property">renderer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonRenderer</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
    [<span class="hljs-string">&quot;birds/parrot.yaml&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-property">value</span> <span class="hljs-operator">=</span> <span class="hljs-property">parrot</span>
      <span class="hljs-property">renderer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YamlRenderer</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Running <code>pkl eval -m output/ birds.pkl</code> produces the following output files:</p>
</div>
<div class="listingblock">
<div class="title">output/birds/pigeon.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "Pigeon",
  "diet": "Seeds"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">output/birds/parrot.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">name: Parrot
diet: Berries</code></pre>
</div>
</div>
<div class="paragraph">
<p>Within <code>output.files</code>,
a key determines a file&#8217;s path relative to <code>--multiple-file-output-path</code>,
and a value determines the file&#8217;s contents.
If a file&#8217;s path resolves to a location outside <code>--multiple-file-output-path</code>,
evaluation fails with an error.
Non-existing parent directories are created.</p>
</div>
<div class="sect4">
<h5 id="aggregating-module-outputs"><a class="anchor" href="#aggregating-module-outputs"></a><a class="link" href="#aggregating-module-outputs">Aggregating Module Outputs</a></h5>
<div class="paragraph">
<p>A value within <code>output.files</code> can be another module&#8217;s <code>output</code>.
With this, a module can aggregate the outputs of multiple other modules.
Here is an example:</p>
</div>
<div class="listingblock">
<div class="title">pigeon.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">renderer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonRenderer</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">parrot.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parrot&quot;</span>
<span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">renderer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YamlRenderer</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">birds.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;pigeon.pkl&quot;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;parrot.pkl&quot;</span>

<span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">files</span> <span class="hljs-punctuation">{</span>
    [<span class="hljs-string">&quot;birds/pigeon.json&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-property">output</span>
    [<span class="hljs-string">&quot;birds/parrot.yaml&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-property">parrot</span><span class="hljs-punctuation">.</span><span class="hljs-property">output</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When aggregating module outputs,
the appropriate file extensions can be obtained programmatically:</p>
</div>
<div class="listingblock">
<div class="title">birds.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;pigeon.pkl&quot;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;parrot.pkl&quot;</span>

<span class="hljs-property">output</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">files</span> <span class="hljs-punctuation">{</span>
    [<span class="hljs-string">&quot;birds/pigeon.<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-property">output</span><span class="hljs-punctuation">.</span><span class="hljs-property">renderer</span><span class="hljs-punctuation">.</span><span class="hljs-property">extension</span><span class="hljs-char escape_">)</span></span>&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span><span class="hljs-punctuation">.</span><span class="hljs-property">output</span>
    [<span class="hljs-string">&quot;birds/parrot.<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">parrot</span><span class="hljs-punctuation">.</span><span class="hljs-property">output</span><span class="hljs-punctuation">.</span><span class="hljs-property">renderer</span><span class="hljs-punctuation">.</span><span class="hljs-property">extension</span><span class="hljs-char escape_">)</span></span>&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-property">parrot</span><span class="hljs-punctuation">.</span><span class="hljs-property">output</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="null-values"><a class="anchor" href="#null-values"></a><a class="link" href="#null-values">Null Values</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The keyword <code>null</code> indicates the absence of a value.
<code>null</code> is an instance of <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Null">Null</a>, a direct subclass of <code>Any</code>.</p>
</div>
<div class="sect2">
<h3 id="non-null-operator"><a class="anchor" href="#non-null-operator"></a><a class="link" href="#non-null-operator">Non-Null Operator</a></h3>
<div class="paragraph">
<p>The <code>!!</code> (non-null) operator asserts that its operand is non-null.
Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">nameNonNull</span> <span class="hljs-operator">=</span> <span class="hljs-property">name</span>!!  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">name2</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>
<span class="hljs-property">name2NonNull</span> <span class="hljs-operator">=</span> <span class="hljs-property">name2</span>!! <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>"Pigeon"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <em>Error: Expected a non-null value, but got <code>null</code>.</em></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="null-coalescing"><a class="anchor" href="#null-coalescing"></a><a class="link" href="#null-coalescing">Null Coalescing</a></h3>
<div class="paragraph">
<p>The <code>??</code> (null coalescing) operator fills in a default for a <code>null</code> value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-property">value</span> <span class="hljs-operator">??</span> <span class="hljs-property">default</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above expression evaluates to <code>value</code> if <code>value</code> is non-null, and to <code>default</code> otherwise.
Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">nameOrParrot</span> <span class="hljs-operator">=</span> <span class="hljs-property">name</span> <span class="hljs-operator">??</span> <span class="hljs-string">&quot;Parrot&quot;</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">name2</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>
<span class="hljs-property">name2OrParrot</span> <span class="hljs-operator">=</span> <span class="hljs-property">name2</span> <span class="hljs-operator">??</span> <span class="hljs-string">&quot;Parrot&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>"Pigeon"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>"Parrot"</code></td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Default non-null behavior</div>
<div class="paragraph">
<p>Many languages allow <code>null</code> for (almost) every type, but Pkl does not.
Any type can be extended to include <code>null</code> by appending <code>?</code> to the type.</p>
</div>
<div class="paragraph">
<p>For example, <code>parrot: Bird</code> will always be non-null, but <code>pigeon: Bird?</code> could be <code>null</code> - and <em>is</em> by default,
if <code>pigeon</code> is never amended. This means if you try to coalesce a (non-nullable) typed variable,
the result is always that variableâ€™s value.</p>
</div>
<div class="paragraph">
<p>As per our example <code>parrot ?? pigeon == parrot</code> always holds,
but <code>pigeon ?? parrot</code> could either be <code>pigeon</code> or <code>parrot</code>,
depending on whether <code>pigeon</code> was ever amended with a non-null value.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="null-propagation"><a class="anchor" href="#null-propagation"></a><a class="link" href="#null-propagation">Null Propagation</a></h3>
<div class="paragraph">
<p>The <code>?.</code> (null propagation) operator provides null-safe access to a member whose receiver may be <code>null</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-property">value</span><span class="hljs-punctuation">?.</span><span class="hljs-property">member</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above expression evaluates to <code>value.member</code> if <code>value</code> is non-null, and to <code>null</code> otherwise.
Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">nameLength</span> <span class="hljs-operator">=</span> <span class="hljs-property">name</span><span class="hljs-punctuation">?.</span><span class="hljs-property">length</span>          <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">nameUpper</span> <span class="hljs-operator">=</span> <span class="hljs-property">name</span><span class="hljs-punctuation">?.</span><span class="hljs-title function_ invoke__">toUpperCase</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>    <i class="conum" data-value="2"></i><b>(2)</b>

<span class="hljs-property">name2</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>
<span class="hljs-property">name2Length</span> <span class="hljs-operator">=</span> <span class="hljs-property">name2</span><span class="hljs-punctuation">?.</span><span class="hljs-property">length</span>        <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">name2Upper</span> <span class="hljs-operator">=</span> <span class="hljs-property">name2</span><span class="hljs-punctuation">?.</span><span class="hljs-title function_ invoke__">toUpperCase</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>  <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>6</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>"PIGEON"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: <code>null</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>result: <code>null</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>?.</code> operator is often combined with <code>??</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>
<span class="hljs-property">nameLength</span> <span class="hljs-operator">=</span> <span class="hljs-property">name</span><span class="hljs-punctuation">?.</span><span class="hljs-property">length</span> <span class="hljs-operator">??</span> <span class="hljs-number">0</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>0</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ifnonnull-method"><a class="anchor" href="#ifnonnull-method"></a><a class="link" href="#ifnonnull-method">ifNonNull Method</a></h3>
<div class="paragraph">
<p>The <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Null#ifNonNull()">ifNonNull()</a> method is a generalization of the <a href="#null-propagation">null propagation</a> operator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-property">name</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">ifNonNull</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-title function_ invoke__">doSomethingWith</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above expression evaluates to <code>doSomethingWith(name)</code> if <code>name</code> is non-null, and to <code>null</code> otherwise.
Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">nameWithTitle</span> <span class="hljs-operator">=</span> <span class="hljs-property">name</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">ifNonNull</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-string">&quot;Dr.&quot;</span> <span class="hljs-operator">+</span> <span class="hljs-params">it</span><span class="hljs-punctuation">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">name2</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>
<span class="hljs-property">name2WithTitle</span> <span class="hljs-operator">=</span> <span class="hljs-property">name2</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">ifNonNull</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-string">&quot;Dr.&quot;</span> <span class="hljs-operator">+</span> <span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>"Dr. Pigeon"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>null</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nonnull-type-alias"><a class="anchor" href="#nonnull-type-alias"></a><a class="link" href="#nonnull-type-alias">NonNull Type Alias</a></h3>
<div class="paragraph">
<p>To express that a property can have any type except <code>Null</code>, use the <code>NonNull</code> <a href="#type-aliases">type alias</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">x</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">NonNull</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="if-expressions"><a class="anchor" href="#if-expressions"></a><a class="link" href="#if-expressions">If Expressions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <code>if</code> expression serves the same role as the ternary operator (<code>? :</code>) in other languages.
Every <code>if</code> expression must have an <code>else</code> branch.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">num</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-number">2</span> <span class="hljs-operator">+</span> <span class="hljs-number">2</span> <span class="hljs-operator">==</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span> <span class="hljs-number">1984</span> <span class="hljs-keyword">else</span> <span class="hljs-number">42</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>42</code></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources"><a class="anchor" href="#resources"></a><a class="link" href="#resources">Resources</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pkl programs can read external resources, such as environment variables or text files.</p>
</div>
<div class="paragraph">
<p>To read a resource, use a <code>read</code> expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">path</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">read</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;env:PATH&quot;</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the following resource URI schemes are supported:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">env: </dt>
<dd>
<p>Reads an environment variable.
Result type is <code>String</code>.</p>
</dd>
<dt class="hdlist1">prop: </dt>
<dd>
<p>Reads an external property set via the <code>-p name=value</code> CLI option.
Result type is <code>String</code>.</p>
</dd>
<dt class="hdlist1">file: </dt>
<dd>
<p>Reads a file from the file system.
Result type is <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Resource">Resource</a>.</p>
</dd>
<dt class="hdlist1">http(s): </dt>
<dd>
<p>Reads an HTTP(S) resource.
Result type is <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Resource">Resource</a>.</p>
</dd>
<dt class="hdlist1">modulepath: </dt>
<dd>
<p>Reads a resource from the module path (<code>--module-path</code>) or JVM class path.
Result type is <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Resource">Resource</a>.
See <a href="#module-path-uri">Module Path URI</a> for further information.</p>
</dd>
<dt class="hdlist1">package: </dt>
<dd>
<p>Reads a resource from a <em>package</em>. Result type is <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Resource">Resource</a>. See <a href="#package-asset-uri">Package asset URI:</a> for further information.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Relative resource URIs are resolved against the enclosing module&#8217;s URI.</p>
</div>
<div class="paragraph">
<p>Resources are cached in memory on the first read.
Therefore, subsequent reads are guaranteed to return the same result.</p>
</div>
<div class="sect2">
<h3 id="nullable-reads"><a class="anchor" href="#nullable-reads"></a><a class="link" href="#nullable-reads">Nullable Reads</a></h3>
<div class="paragraph">
<p>If a resource does not exist or cannot be read, <code>read()</code> fails with an error.
To recover from the absence of a resource, use <code>read?()</code> instead,
which returns <code>null</code> for absent resources:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">port</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">read?</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;env:PORT&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">?.</span><span class="hljs-title function_ invoke__">toInt</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">??</span> <span class="hljs-number">1234</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="globbed-reads"><a class="anchor" href="#globbed-reads"></a><a class="link" href="#globbed-reads">Globbed Reads</a></h3>
<div class="paragraph">
<p>Multiple resources may be read at the same time with <code>read*()</code>.
When reading multiple resources, a glob pattern is used to match against existing resources.
A globbed read returns a <code>Mapping</code>, where the keys are the expanded form of the glob, and values are <code>read</code> expressions on each individual resource.</p>
</div>
<div class="paragraph">
<p>Assuming that a file system contains these files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">.
â”œâ”€â”€ birds/
â”‚  â”œâ”€â”€ pigeon.pkl
â”‚  â”œâ”€â”€ parrot.pkl
â”‚  â””â”€â”€ falcon.pkl
â””â”€â”€ index.pkl</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following two snippets are logically identical:</p>
</div>
<div class="listingblock">
<div class="title">index.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birdFiles</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">read*</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/*.pkl&quot;</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">index.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birdFiles</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;birds/pigeon.pkl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">read</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/pigeon.pkl&quot;</span><span class="hljs-punctuation">)</span>
  [<span class="hljs-string">&quot;birds/parrot.pkl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">read</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/parrot.pkl&quot;</span><span class="hljs-punctuation">)</span>
  [<span class="hljs-string">&quot;birds/falcon.pkl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">read</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;birds/falcon.pkl&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the following schemes support globbing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>modulepath</code></p>
</li>
<li>
<p><code>file</code></p>
</li>
<li>
<p><code>env</code></p>
</li>
<li>
<p><code>prop</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Globbing other resources results in an error.</p>
</div>
<div class="paragraph">
<p>For details on how glob patterns work, reference <a href="#glob-patterns">Glob Patterns</a> in the Advanced Topics section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When globbing files, symbolic links are not followed. Additionally, the <code>.</code> and <code>..</code> entries are skipped.<br>
This behavior is similar to the behavior of Bash with <code>shopt -s dotglob</code> enabled.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>env</code> and <code>prop</code> schemes are considered opaque, as they do not have traditional hierarchical elements like a host, path, or query string.</p>
</div>
<div class="paragraph">
<p>While globbing is traditionally viewed as a way to match elements in a file system, a glob pattern is simply a way to match strings.
Thus, environment variables and external properties can be globbed, where their names get matched according to the rules described by the glob pattern.</p>
</div>
<div class="paragraph">
<p>To match all values within these schemes, use the <code>**</code> wildcard.
This has the effect of matching names that contain a forward slash too (<code>/</code>).
For example, the expression <code>read*("env:**")</code> will evaluate to a Mapping of all environment variables.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="extending-resource-readers"><a class="anchor" href="#extending-resource-readers"></a><a class="link" href="#extending-resource-readers">Extending resource readers</a></h3>
<div class="paragraph">
<p>When Pkl is embedded within another runtime, it can be extended to read other kinds of resources.</p>
</div>
<div class="paragraph">
<p>When embedded into a JVM application, new resources may be read by implementing the <a href="https://github.com/apple/pkl/tree/0.26.3/pkl-core/src/main/java/org/pkl/core/resource/ResourceReader.java">ResourceReader</a> SPI.
When Pkl is embedded within Swift, new resources may be read by implementing the <a href="https://github.com/apple/pkl-swift/blob/main/Sources/PklSwift/Reader.swift">ResourceReader</a> interface.
When Pkl is embedded within Go, new resources may be read by implementing the <a href="https://github.com/apple/pkl-go/blob/main/pkl/reader.go">ResourceReader</a> interface.</p>
</div>
</div>
<div class="sect2">
<h3 id="resource-allowlist"><a class="anchor" href="#resource-allowlist"></a><a class="link" href="#resource-allowlist">Resource Allowlist</a></h3>
<div class="paragraph">
<p>When attempting to read a resource, the resource URI is checked against the resource allowlist (<code>--allowed-resources</code>).
In embedded mode, the allowlist is configured via an evaluator&#8217;s <a href="https://github.com/apple/pkl/tree/0.26.3/pkl-core/src/main/java/org/pkl/core/SecurityManager.java">SecurityManager</a>.</p>
</div>
<div class="paragraph">
<p>The resource allowlist is a comma-separated list of regular expressions.
For access to be granted, at least one regular expression must match a prefix of the resource URI.
For example, the allowlist <code>file:,https:</code> grants access to any resource whose URI starts with <code>file:</code> or <code>https:</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="errors"><a class="anchor" href="#errors"></a><a class="link" href="#errors">Errors</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>By design, errors are fatal in Pkl&#8201;&#8212;&#8201;there is no way to recover from them.
To raise an error, use a <code>throw</code> expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">myValue</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">throw</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;You won&#39;t be able to recover from this one!&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>myValue</code> never receives a value because the program exits.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The error message is printed to the console and the program exits.
In embedded mode, a <a href="https://github.com/apple/pkl/tree/0.26.3/pkl-core/src/main/java/org/pkl/core/PklException.java">PklException</a> is thrown.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="debugging"><a class="anchor" href="#debugging"></a><a class="link" href="#debugging">Debugging</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>When debugging Pkl code, it can be useful to print the value of an expression.
To do so, use a <code>trace</code> expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">num1</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>
<span class="hljs-property">num2</span> <span class="hljs-operator">=</span> <span class="hljs-number">16</span>
<span class="hljs-property">res</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">trace</span><span class="hljs-punctuation">(</span><span class="hljs-property">num1</span> <span class="hljs-operator">*</span> <span class="hljs-property">num2</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tracing an expression does not affect its result, but prints both its source code and result on standard error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">pkl: TRACE: num1 * num2 = 672 (at file:///some/module.pkl, line 42)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-topics"><a class="anchor" href="#advanced-topics"></a><a class="link" href="#advanced-topics">Advanced Topics</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section discusses language features that are generally more relevant to template and library authors than template consumers.</p>
</div>
<div class="paragraph">
<p><a href="#meaning-of-new">Meaning of <code>new</code></a><br>
<a href="#let-expressions">Let Expressions</a><br>
<a href="#type-tests">Type Tests</a><br>
<a href="#type-casts">Type Casts</a><br>
<a href="#lists">Lists</a><br>
<a href="#sets">Sets</a><br>
<a href="#maps">Maps</a><br>
<a href="#regular-expressions">Regular Expressions</a><br>
<a href="#type-aliases">Type Aliases</a><br>
<a href="#type-annotations">Type Annotations</a><br>
<a href="#anonymous-functions">Anonymous Functions</a><br>
<a href="#amend-null">Amending Null Values</a><br>
<a href="#when-generators">When Generators</a><br>
<a href="#for-generators">For Generators</a><br>
<a href="#spread-syntax">Spread Syntax</a><br>
<a href="#member-predicates">Member Predicates (<code>[[&#8230;&#8203;]]</code>)</a><br>
<a href="#glob-patterns">Glob Patterns</a><br>
<a href="#doc-comments">Doc Comments</a><br>
<a href="#name-resolution">Name Resolution</a><br>
<a href="#grammar-definition">Grammar Definition</a><br>
<a href="#reserved-keywords">Reserved Keywords</a><br>
<a href="#blank-identifiers">Blank Identifiers</a><br>
<a href="#projects">Projects</a></p>
</div>
<div class="sect2">
<h3 id="meaning-of-new"><a class="anchor" href="#meaning-of-new"></a><a class="link" href="#meaning-of-new">Meaning of <code>new</code></a></h3>
<div class="paragraph">
<p>Objects in Pkl always <a href="#amending-objects">amends</a> <em>some</em> value.
The <code>new</code> keyword is a special case of amending where a contextual value is amended.
In Pkl, there are two forms of <code>new</code> objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>new</code> with explicit type information, for example, <code>new Foo {}</code>.</p>
</li>
<li>
<p><code>new</code> without type information, for example, <code>new {}</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="type-defaults"><a class="anchor" href="#type-defaults"></a><a class="link" href="#type-defaults">Type defaults</a></h4>
<div class="paragraph">
<p>To understand instantiation cases without explicit parent or type information, it&#8217;s important to first understand implicit default values.
When a property is declared in a module or class but is not provided an explicit default value, the property&#8217;s default value becomes the type&#8217;s default value.
Similarly, when <code>Listing</code> and <code>Mapping</code> types are declared with explicit type arguments for their element or value, their <code>default</code> property amends that declared type.
When <code>Listing</code> and <code>Mapping</code> types are declared without type arguments, their <code>default</code> property amends an empty <code>Dynamic</code> object.
Some types, including <code>Pair</code> and primitives like <code>String</code>, <code>Number</code>, and <code>Boolean</code> have no default value; attempting to render such a property results in the error "Tried to read property <code>&lt;name&gt;</code> but its value is undefined".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;polly&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">bird</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">birdListing</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">birdMapping</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Mapping</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Without an explicit default value, this property has default value <code>new Bird { name = "polly" }</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>With an explicit element type argument, this property&#8217;s default value is equivalent to <code>new Listing&lt;Bird&gt; { default = (_) &#8594; new Bird { name = "polly" } }</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>With an explicit value type argument, this property&#8217;s default value is equivalent to <code>new Mapping&lt;String, Bird&gt; { default = (_) &#8594; new Bird { name = "polly" } }</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="explicitly-typed-new"><a class="anchor" href="#explicitly-typed-new"></a><a class="link" href="#explicitly-typed-new">Explicitly Typed <code>new</code></a></h4>
<div class="paragraph">
<p>Instantiating an object with <code>new &lt;type&gt;</code> results in a value that amends the specified type&#8217;s default value.
Notably, creating a <code>Listing</code> element or assigning a <code>Mapping</code> entry value with an explicitly typed <code>new</code> ignores the object&#8217;s <code>default</code> value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-comment">/// The name of the bird</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>

  <span class="hljs-comment">/// Whether this is a bird of prey or not.</span>
  <span class="hljs-property">isPredatory</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Boolean</span><span class="hljs-operator">?</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">newProperty</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Warbler&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">someListing</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">isPredatory</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Sand Piper&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">someMapping</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">isPredatory</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Penguin&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Penguin&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Assigning a <code>new</code> explicitly-typed value to a property.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Adding an <code>new</code> explicitly-typed <code>Listing</code> element.
The value will not have property <code>isPredatory = true</code> as the <code>default</code> property of the <code>Listing</code> is not used.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Assigning a <code>new</code> explicitly-typed value to a <code>Mapping</code> entry.
The value will not have property <code>isPredatory = true</code> as the <code>default</code> property of the <code>Mapping</code> is not used.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="implicitly-typed-new"><a class="anchor" href="#implicitly-typed-new"></a><a class="link" href="#implicitly-typed-new">Implicitly Typed <code>new</code></a></h4>
<div class="paragraph">
<p>When using the implicitly typed <code>new</code> invocation, there is no explicit parent value to amend.
In these cases, Pkl infers the amend operation&#8217;s parent value based on context:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When assigning to a declared property, the property&#8217;s default value is amended (<a href="#amend-null">including <code>null</code></a>).
If there is no type associated with the property, an empty <code>Dynamic</code> object is amended.</p>
</li>
<li>
<p>When assigning to an entry (e.g. a <code>Mapping</code> member) or element (e.g. a <code>Listing</code> member), the enclosing object&#8217;s <code>default</code> property is applied to the corresponding index or key, respectively, to produce the value to be amended.</p>
</li>
<li>
<p>In other cases, evaluation fails with the error message "Cannot tell which parent to amend".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The type annotation of a <a href="#methods">method</a> parameter is not used for inference.
In this case, the argument&#8217;s type should be specified explicitly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">listHatchlings</span><span class="hljs-punctuation">(</span><span class="hljs-params">items</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">&gt;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-keyword">for</span> <span class="hljs-punctuation">(</span><span class="hljs-property">item</span> <span class="hljs-keyword">in</span> <span class="hljs-params">items</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-string">&quot;<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">name</span><span class="hljs-char escape_">)</span></span>:<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">item</span><span class="hljs-char escape_">)</span></span>&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">typedProperty</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Swift&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">untypedProperty</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-property">hello</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;world&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">typedListing</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Kite&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">untypedListing</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="hljs-property">hello</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;there&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">typedMapping</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Mapping</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span> <span class="hljs-params">entryKey</span> <span class="hljs-punctuation">-&gt;</span>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-params">entryKey</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Saltmarsh Sparrow&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Sharp-tailed Sparrow&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">amendedMapping</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">typedMapping</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Saltmarsh Sparrow&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span> <i class="conum" data-value="6"></i><b>(6)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Aviary</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">birds</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Osprey&quot;</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">aviary</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Aviary</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="7"></i><b>(7)</b>
    <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Kiwi&quot;</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">swiftHatchlings</span> <span class="hljs-operator">=</span> <span class="hljs-property">typedProperty</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">listHatchlings</span><span class="hljs-punctuation">(</span><span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-string">&quot;Poppy&quot;</span>; <span class="hljs-string">&quot;Chirpy&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="8"></i><b>(8)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Assignment to a property with an explicitly declared type, amending <code>new Bird {}</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Assignment to an undeclared property in module context, amending <code>new Dynamic {}</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>Listing</code> element creation, amending implicit <code>default</code>, <code>new Bird {}</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>Listing</code> element creation, amending implicit <code>default</code>, <code>new Dynamic {}</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>Mapping</code> value assignment, amdending the result of applying <code>default</code> to <code>"Saltmarsh Sparrow"</code>, <code>new Bird { name = "Saltmarsh Sparrow" }</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>Mapping</code> value assignment <em>replacing</em> the parent&#8217;s entry, amending the result of applying <code>default</code> to <code>"Saltmarsh Sparrow"</code>, <code>new Bird { name = "Saltmarsh Sparrow" }</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Admending the property default value <code>new Listing { new Bird { name = "Osprey" } }</code>; the result contains both birds.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Error: Cannot tell which parent to amend.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="let-expressions"><a class="anchor" href="#let-expressions"></a><a class="link" href="#let-expressions">Let Expressions</a></h3>
<div class="paragraph">
<p>A <code>let</code> expression is Pkl&#8217;s version of an (immutable) local variable.
Its syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">let (&lt;name&gt; = &lt;value&gt;) &lt;expr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>let</code> expression is evaluated as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>&lt;name&gt;</code> is bound to <code>&lt;value&gt;</code>, itself an expression.</p>
</li>
<li>
<p><code>&lt;expr&gt;</code> is evaluated, which can refer to <code>&lt;value&gt;</code> by its <code>&lt;name&gt;</code> (this is the point).</p>
</li>
<li>
<p>The result of &lt;expr&gt; becomes the result of the overall expression.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birdDiets</span> <span class="hljs-operator">=</span>
  <span class="hljs-keyword">let</span> <span class="hljs-punctuation">(</span><span class="hljs-property">diets</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Seeds&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Berries&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Mice&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
  <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-property">diets</span>[<span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-property">diets</span>[<span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>birdDiets = List("Mice", "Seeds")</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>let</code> expressions serve two purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They introduce a human-friendly name for a potentially complex expression.</p>
</li>
<li>
<p>They evaluate a potentially expensive expression that is used in multiple places only once.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>let</code> expressions can have type annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birdDiets</span> <span class="hljs-operator">=</span>
  <span class="hljs-keyword">let</span> <span class="hljs-punctuation">(</span><span class="hljs-property">diets</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Seeds&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Berries&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Mice&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
  <span class="hljs-property">diets</span>[<span class="hljs-number">2</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">+</span> <span class="hljs-property">diets</span>[<span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>birdDiets = List("Mice", "Seeds")</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>let</code> expressions can be stacked:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birdDiets</span> <span class="hljs-operator">=</span>
  <span class="hljs-keyword">let</span> <span class="hljs-punctuation">(</span><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Barn owl&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
  <span class="hljs-keyword">let</span> <span class="hljs-punctuation">(</span><span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Seeds&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Mice&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Berries&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
  <span class="hljs-property">birds</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">zip</span><span class="hljs-punctuation">(</span><span class="hljs-property">diet</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>birdDiets = List(Pair("Pigeon", "Seeds"), Pair("Barn owl", "Mice"), Pair("Parrot", "Berries"))</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="type-tests"><a class="anchor" href="#type-tests"></a><a class="link" href="#type-tests">Type Tests</a></h3>
<div class="paragraph">
<p>To test if a value conforms to a type, use the <em>is</em> operator.</p>
</div>
<div class="paragraph">
<p>All the following tests hold:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">test1</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Int</span>
<span class="hljs-property">test2</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Number</span>
<span class="hljs-property">test3</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Any</span>
<span class="hljs-property">test4</span> <span class="hljs-operator">=</span> <span class="hljs-operator">!</span><span class="hljs-punctuation">(</span><span class="hljs-number">42</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">)</span>

<span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Base</span>

<span class="hljs-property">base</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Base</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>

<span class="hljs-property">test5</span> <span class="hljs-operator">=</span> <span class="hljs-property">base</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Base</span>
<span class="hljs-property">test6</span> <span class="hljs-operator">=</span> <span class="hljs-property">base</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Any</span>
<span class="hljs-property">test7</span> <span class="hljs-operator">=</span> <span class="hljs-operator">!</span><span class="hljs-punctuation">(</span><span class="hljs-property">base</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Derived</span><span class="hljs-punctuation">)</span>

<span class="hljs-property">derived</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Derived</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>

<span class="hljs-property">test8</span> <span class="hljs-operator">=</span> <span class="hljs-property">derived</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Derived</span>
<span class="hljs-property">test9</span> <span class="hljs-operator">=</span> <span class="hljs-property">derived</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Base</span>
<span class="hljs-property">test10</span> <span class="hljs-operator">=</span> <span class="hljs-property">derived</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Any</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A value can be tested against any type, not just a class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">test1</span> <span class="hljs-operator">=</span> <span class="hljs-property">email</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-title function_ invoke__">contains</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;@&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">test2</span> <span class="hljs-operator">=</span> <span class="hljs-property">map</span> <span class="hljs-keyword">is</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Int</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Base</span><span class="hljs-punctuation">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">test3</span> <span class="hljs-operator">=</span> <span class="hljs-property">name</span> <span class="hljs-keyword">is</span> <span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-operator">|</span><span class="hljs-string">&quot;Barn owl&quot;</span><span class="hljs-operator">|</span><span class="hljs-string">&quot;Parrot&quot;</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>email</code> is tested for being a string that contains a <code>@</code> sign</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>map</code> is tested for being a map from <code>Int</code> to <code>Base</code> values</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>name</code> is tested for being one of <code>"Pigeon"</code>, <code>"Barn owl"</code>, or <code>"Parrot"</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="type-casts"><a class="anchor" href="#type-casts"></a><a class="link" href="#type-casts">Type Casts</a></h3>
<div class="paragraph">
<p>The <em>as</em> (type cast) operator performs a runtime type check on its operand.
If the type check succeeds, the operand is returned as-is; otherwise, an error is thrown.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Barn owl&quot;</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">names</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toList</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">map</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">it</span><span class="hljs-punctuation">.</span><span class="hljs-property">name</span><span class="hljs-punctuation">)</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Although type casts are never mandatory in Pkl, they occasionally help humans and tools better understand an expression&#8217;s type.</p>
</div>
</div>
<div class="sect2">
<h3 id="lists"><a class="anchor" href="#lists"></a><a class="link" href="#lists">Lists</a></h3>
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/List">List</a> is an ordered, indexed collection of <em>elements</em>.</p>
</div>
<div class="paragraph">
<p>A list&#8217;s elements have zero-based indexes and are eagerly evaluated.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">When to use List vs. <a href="#listings">Listing</a></div>
<div class="ulist">
<ul>
<li>
<p>When a collection of elements needs to be specified literally, use a listing.</p>
</li>
<li>
<p>When a collection of elements needs to be transformed in a way that cannot be achieved by <a href="#amending-listings">amending</a> a listing, use a list.</p>
</li>
<li>
<p>If in doubt, use a listing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Templates and schemas should almost always use listings instead of lists.
Note that listings can be converted to lists when the need arises.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Lists are constructed with the <code>List()</code> method<sup class="footnote" id="_footnote_soft-keyword">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">list1</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">list2</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">list3</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;x&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: empty list</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: list of length 3</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: heterogeneous list whose last element is another list</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To concatenate lists, use the <code>+</code> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">5</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To access a list element by index, use the <code>[]</code> (subscript) operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">list</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">listElement</span> <span class="hljs-operator">=</span> <span class="hljs-property">list</span>[<span class="hljs-number">2</span><span class="hljs-punctuation">]</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>3</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Class <code>List</code> offers a <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/List">rich API</a>.
Here are just a few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">list</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-property">list</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">contains</span><span class="hljs-punctuation">(</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-property">list</span><span class="hljs-punctuation">.</span><span class="hljs-property">first</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">res3</span> <span class="hljs-operator">=</span> <span class="hljs-property">list</span><span class="hljs-punctuation">.</span><span class="hljs-property">rest</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">res4</span> <span class="hljs-operator">=</span> <span class="hljs-property">list</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">reverse</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-property">res5</span> <span class="hljs-operator">=</span> <span class="hljs-property">list</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">drop</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">take</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="5"></i><b>(5)</b>
<span class="hljs-property">res6</span> <span class="hljs-operator">=</span> <span class="hljs-property">list</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">map</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">n</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">n</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>true</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>1</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: <code>List(2, 3, 4)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>result: <code>List(4, 3, 2, 1)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>result: <code>List(2, 3)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>result: <code>List(3, 6, 9, 12)</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="sets"><a class="anchor" href="#sets"></a><a class="link" href="#sets">Sets</a></h3>
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Set">Set</a> is an ordered collection of unique <em>elements</em>.</p>
</div>
<div class="paragraph">
<p>A set&#8217;s elements are eagerly evaluated.</p>
</div>
<div class="paragraph">
<p>Sets are constructed with the <code>Set()</code> method<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">res3</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">res4</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;x&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: empty set</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: set of length 3</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: same set of length 3</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>result: heterogeneous set that contains a list as its last element</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To compute the union of sets, use the <code>+</code> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>Set(1, 2, 3, 5)</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Class <code>Set</code> offers a <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Set">rich API</a>.
Here are just a few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">set</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-property">set</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">contains</span><span class="hljs-punctuation">(</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-property">set</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">drop</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">take</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">res3</span> <span class="hljs-operator">=</span> <span class="hljs-property">set</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">map</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">n</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">n</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">res4</span> <span class="hljs-operator">=</span> <span class="hljs-property">set</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">intersect</span><span class="hljs-punctuation">(</span><span class="hljs-title class_">Set</span><span class="hljs-punctuation">(</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">9</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>true</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>Set(2, 3)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: <code>Set(3, 6, 9, 12)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>result: <code>Set(3, 2)</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="maps"><a class="anchor" href="#maps"></a><a class="link" href="#maps">Maps</a></h3>
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Map">Map</a> is an ordered collection of <em>values</em> indexed by <em>key</em>.</p>
</div>
<div class="paragraph">
<p>A map&#8217;s key-value pairs are called its <em>entries</em>.
Keys and values are eagerly evaluated.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">When to use Map vs. <a href="#mappings">Mapping</a></div>
<div class="ulist">
<ul>
<li>
<p>When key-value style data needs to be specified literally, use a mapping.</p>
</li>
<li>
<p>When key-value style data needs to be transformed in ways that cannot be achieved by <a href="#amending-mappings">amending</a> a mapping, use a map.</p>
</li>
<li>
<p>If in doubt, use a mapping.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Templates and schemas should almost always use mappings instead of maps.
(Note that mappings can be converted to maps when the need arises.)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Maps are constructed by passing alternating keys and values to the <code>Map()</code> method<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">map1</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">map2</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;one&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;two&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">map3</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;x&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">min</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: empty map</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: set of length 3</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: heterogeneous map whose last value is another map</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Any Pkl value can be used as a map key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Dynamic</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-number">10</span><span class="hljs-punctuation">.</span><span class="hljs-property">gb</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To merge maps, use the <code>+</code> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">combinedMaps</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;one&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;two&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;four&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>Map(1, "three", 2, "two", 4, "four")</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To access a value by key, use the <code>[]</code> (subscript) operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">map</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">gb</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">10</span><span class="hljs-punctuation">.</span><span class="hljs-property">gb</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">parrotValue</span> <span class="hljs-operator">=</span> <span class="hljs-property">map</span>[<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>10.gb</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Class <code>Map</code> offers a <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Map">rich API</a>.
Here are just a few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">map</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">gb</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">10</span><span class="hljs-punctuation">.</span><span class="hljs-property">gb</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-property">map</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">containsKey</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-property">map</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">containsValue</span><span class="hljs-punctuation">(</span><span class="hljs-number">8</span><span class="hljs-punctuation">.</span><span class="hljs-property">gb</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">res3</span> <span class="hljs-operator">=</span> <span class="hljs-property">map</span><span class="hljs-punctuation">.</span><span class="hljs-property">isEmpty</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">res4</span> <span class="hljs-operator">=</span> <span class="hljs-property">map</span><span class="hljs-punctuation">.</span><span class="hljs-property">length</span> <i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-property">res5</span> <span class="hljs-operator">=</span> <span class="hljs-property">map</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">getOrNull</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Falcon&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>true</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>false</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: <code>false</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>result: <code>2</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>result: <code>null</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="regular-expressions"><a class="anchor" href="#regular-expressions"></a><a class="link" href="#regular-expressions">Regular Expressions</a></h3>
<div class="paragraph">
<p>A value of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Regex">Regex</a> is a regular expression with the same syntax and semantics as a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html">Java regular expression</a>.</p>
</div>
<div class="paragraph">
<p>Regular expressions are constructed with the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#Regex()">Regex()</a> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">emailRegex</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Regex</span><span class="hljs-punctuation">(</span><span class="hljs-string">#&quot;([\w\.]+)@([\w\.]+)&quot;#</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice the use of custom string delimiters <code>#"</code> and <code>"#</code>, which change the string&#8217;s escape character from <code>\</code> to <code>\#</code>.
As a consequence, the regular expression&#8217;s backslash escape character no longer requires escaping.</p>
</div>
<div class="paragraph">
<p>To test if a string fully matches a regular expression, use <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/String#matches()">String.matches()</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-string">&quot;pigeon@example.com&quot;</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">matches</span><span class="hljs-punctuation">(</span><span class="hljs-property">emailRegex</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Many <code>String</code> methods accept either a <code>String</code> or <code>Regex</code> argument.
Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&lt;pigeon@example.com&gt;&quot;</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">contains</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;pigeon@example.com&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&lt;pigeon@example.com&gt;&quot;</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">contains</span><span class="hljs-punctuation">(</span><span class="hljs-property">emailRegex</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To find all matches of a regex in a string, use <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Regex#match">Regex.findMatchesIn()</a>.
The result is a list of <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/RegexMatch">RegexMatch</a> objects containing details about each match:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">matches</span> <span class="hljs-operator">=</span> <span class="hljs-property">emailRegex</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">findMatchesIn</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;pigeon@example.com / falcon@example.com / parrot@example.com&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">list1</span> <span class="hljs-operator">=</span> <span class="hljs-property">matches</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">drop</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">map</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">it</span><span class="hljs-punctuation">.</span><span class="hljs-property">start</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">list2</span> <span class="hljs-operator">=</span> <span class="hljs-property">matches</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">drop</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">map</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">it</span><span class="hljs-punctuation">.</span><span class="hljs-property">value</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">list3</span> <span class="hljs-operator">=</span> <span class="hljs-property">matches</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">drop</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">map</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">it</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">it</span><span class="hljs-punctuation">.</span><span class="hljs-property">groups</span>[<span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">.</span><span class="hljs-property">value</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>List(0, 19, 40)</code> (the entire match, <code>matches[0]</code>, was dropped)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>result: <code>List("<a href="mailto:pigeon@example.com">pigeon@example.com</a>", "<a href="mailto:falcon@example.com">falcon@example.com</a>", "<a href="mailto:parrot@example.com">parrot@example.com</a>")</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>result: <code>List("pigeon, falcon, parrot")</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="type-aliases"><a class="anchor" href="#type-aliases"></a><a class="link" href="#type-aliases">Type Aliases</a></h3>
<div class="paragraph">
<p>A <em>type alias</em> introduces a new name for a (potentially complicated) type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">typealias</span> <span class="hljs-title class_">EmailAddress</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-title function_ invoke__">matches</span><span class="hljs-punctuation">(</span><span class="hljs-title class_">Regex</span><span class="hljs-punctuation">(</span><span class="hljs-string">#&quot;.+@.+&quot;#</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once a type alias has been defined, it can be used in type annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">email</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">EmailAddress</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;pigeon@example.com&quot;</span>

<span class="hljs-property">emailList</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">EmailAddress</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;pigeon@example.com&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;parrot@example.com&quot;</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>New type aliases can be defined in terms of existing ones:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">typealias</span> <span class="hljs-title class_">EmailList</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">EmailAddress</span><span class="hljs-punctuation">&gt;</span>

<span class="hljs-property">emailList</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">EmailList</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;pigeon@example.com&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;parrot@example.com&quot;</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Type aliases can have type parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">typealias</span> <span class="hljs-title class_">StringMap</span><span class="hljs-operator">&lt;</span><span class="hljs-title class_">Value</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Value</span><span class="hljs-punctuation">&gt;</span>

<span class="hljs-property">map</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">StringMap</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Int</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">42</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Falcon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">21</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Code generators have different strategies for dealing with type aliases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <a href="../java-binding/codegen.html" class="xref page">Java</a> code generator inlines them</p>
</li>
<li>
<p>the <a href="../kotlin-binding/codegen.html" class="xref page">Kotlin</a> code generator turns them into Kotlin type aliases.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Type aliases for unions of <a href="#string-literal-types">String Literal Types</a> are turned into enum classes by both code generators.</p>
</div>
<div class="sect3">
<h4 id="predefined-type-aliases"><a class="anchor" href="#predefined-type-aliases"></a><a class="link" href="#predefined-type-aliases">Predefined Type Aliases</a></h4>
<div class="paragraph">
<p>The <em>pkl.base</em> module defines the following type aliases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#Int8">Int8</a> (-128 to 127)</p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#Int16">Int16</a> (-32,768 to 32,767)</p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#Int32">Int32</a> (-2,147,483,648 to 2,147,483,647)</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#UInt8">UInt8</a> (0 to 255)</p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#UInt16">UInt16</a> (0 to 65,535)</p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#UInt32">UInt32</a> (0 to 4,294,967,295)</p>
</li>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#UInt">UInt</a> (0 to 9,223,372,036,854,775,807)</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/#Uri">Uri</a> (any String value)</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Note that <code>UInt</code> has the same maximum value as <code>Int</code>, half of what would normally be expected.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The main purpose of the provided integer aliases is to enforce the range of an integer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">port</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">UInt16</span> <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This gives:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Type constraint <strong>isBetween(0, 65535)</strong> violated.
Value: -1</code></pre>
</div>
</div>
<div class="paragraph">
<p>To restrict a number to a custom range, use the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Number#isBetween">isBetween</a> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">port</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span><span class="hljs-punctuation">(</span><span class="hljs-title function_ invoke__">isBetween</span><span class="hljs-punctuation">(</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1023</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-number">443</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Remember that numbers are always instances of <code>Int</code> or <code>Float</code>.
Type aliases such as <code>UInt16</code> only check that numbers are within a certain range.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <a href="../java-binding/codegen.html" class="xref page">Java</a> and <a href="../kotlin-binding/codegen.html" class="xref page">Kotlin</a> code generators
map predefined type aliases to the most suitable Java and Kotlin types.
For example, <code>UInt8</code> is mapped to <code>java.lang.Byte</code> and <code>kotlin.Byte</code>, and <code>Uri</code> is mapped to <code>java.net.URI</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="type-annotations"><a class="anchor" href="#type-annotations"></a><a class="link" href="#type-annotations">Type Annotations</a></h3>
<div class="paragraph">
<p>Property and method definitions may optionally contain type annotations.
Type annotations serve the following purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Documentation
+ Type annotations help to document data models. They are included in any generated documentation.</p>
</li>
<li>
<p>Validation
+ Type annotations are validated at runtime.</p>
</li>
<li>
<p>Defaults
+ Type-annotated properties have <a href="#default-values">Default Values</a>.</p>
</li>
<li>
<p>Code Generation
+ Type annotations enable statically typed access to configuration data through code generation.</p>
</li>
<li>
<p>Tooling
+ Type annotations enable advanced tooling features such as code completion in editors.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="class-types"><a class="anchor" href="#class-types"></a><a class="link" href="#class-types">Class Types</a></h4>
<div class="paragraph">
<p>Any class can be used as a type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">bird</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declares an instance property of type <code>String</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declares a module property of type <code>Bird</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="module-types"><a class="anchor" href="#module-types"></a><a class="link" href="#module-types">Module Types</a></h4>
<div class="paragraph">
<p>Any module import can be used as type:</p>
</div>
<div class="listingblock">
<div class="title">bird.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
<span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">birds.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;bird.pkl&quot;</span>

<span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-property">bird</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">parrot</span><span class="hljs-punctuation">:</span> <span class="hljs-property">bird</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Guaranteed to amend <em>bird.pkl</em>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As a special case, the <code>module</code> keyword denotes the <em>enclosing</em> module&#8217;s type:</p>
</div>
<div class="listingblock">
<div class="title">bird.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
<span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span>
<span class="hljs-property">friends</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-property">module</span><span class="hljs-punctuation">&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">pigeon.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;bird.pkl&quot;</span>

<span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
<span class="hljs-property">friends</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-built_in">import</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;falcon.pkl&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>falcon.pkl</em> (not shown here) is guaranteed to amend <em>bird.pkl</em>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="type-aliases-2"><a class="anchor" href="#type-aliases-2"></a><a class="link" href="#type-aliases-2">Type Aliases</a></h4>
<div class="paragraph">
<p>Any <a href="#type-aliases">type alias</a> can be used as a type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">typealias</span> <span class="hljs-title class_">EmailAddress</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-title function_ invoke__">contains</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;@&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

<span class="hljs-property">email</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">EmailAddress</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">emailList</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">EmailAddress</span><span class="hljs-punctuation">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>equivalent to <code>email: String(contains("@"))</code> for type checking purposes</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>equivalent to <code>emailList: List&lt;String(contains("@"))&gt;</code> for type checking purposes</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="nullable-types"><a class="anchor" href="#nullable-types"></a><a class="link" href="#nullable-types">Nullable Types</a></h4>
<div class="paragraph">
<p>Class types such as <code>Bird</code> (see above) do not admit <code>null</code> values.
To turn them into <em>nullable types</em>, append a question mark (<code>?</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">bird</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>   <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">bird2</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span><span class="hljs-operator">?</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>throws <code>Type mismatch: Expected a value of type Bird, but got null</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>succeeds</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The only class types that admit <code>null</code> values despite not ending in <code>?</code> are <code>Any</code> and <code>Null</code>.
(<code>Null</code> is not very useful as a type because it <em>only</em> admits <code>null</code> values.)
<code>Any?</code> and <code>Null?</code> are equivalent to <code>Any</code> and <code>Null</code>, respectively.
In some languages, nullable types are also known as <em>optional types</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="generic-types"><a class="anchor" href="#generic-types"></a><a class="link" href="#generic-types">Generic Types</a></h4>
<div class="paragraph">
<p>The following class types are <em>generic types</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Pair</code></p>
</li>
<li>
<p><code>Collection</code></p>
</li>
<li>
<p><code>Listing</code></p>
</li>
<li>
<p><code>List</code></p>
</li>
<li>
<p><code>Mapping</code></p>
</li>
<li>
<p><code>Set</code></p>
</li>
<li>
<p><code>Map</code></p>
</li>
<li>
<p><code>Function0</code></p>
</li>
<li>
<p><code>Function1</code></p>
</li>
<li>
<p><code>Function2</code></p>
</li>
<li>
<p><code>Function3</code></p>
</li>
<li>
<p><code>Function4</code></p>
</li>
<li>
<p><code>Function5</code></p>
</li>
<li>
<p><code>Class</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A generic type has constituent types written in angle brackets (<code>&lt;&gt;</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pair</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Pair</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>    <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">coll</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Collection</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>      <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">list</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>            <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">set</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>              <i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-property">map</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>      <i class="conum" data-value="5"></i><b>(5)</b>
<span class="hljs-property">mapping</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Mapping</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a pair <code>String</code> and <code>Bird</code> as types for the first and second element, respectively</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>a collection of <code>Bird</code> elements</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>a list of <code>Bird</code> elements</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>a set of <code>Bird</code> elements</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>a map with <code>String</code> keys and <code>Bird</code> values</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>a mapping of <code>String</code> keys and <code>Bird</code> values</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Omitting the constituent types is equivalent to declaring them as <code>unknown</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pair</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Pair</span>       <span class="hljs-comment">// equivalent to `Pair&lt;unknown, unknown&gt;`</span>
<span class="hljs-property">coll</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Collection</span> <span class="hljs-comment">// equivalent to `Collection&lt;unknown&gt;`</span>
<span class="hljs-property">list</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">List</span>       <span class="hljs-comment">// equivalent to `List&lt;unknown&gt;`</span>
<span class="hljs-property">set</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Set</span>         <span class="hljs-comment">// equivalent to `Set&lt;unknown&gt;`</span>
<span class="hljs-property">map</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Map</span>         <span class="hljs-comment">// equivalent to `Map&lt;unknown, unknown&gt;`</span>
<span class="hljs-property">mapping</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Mapping</span>    <span class="hljs-comment">// equivalent to `Mapping&lt;unknown, unknown&gt;`</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>unknown</code> type is both a top and a bottom type.
When a static type analyzer encounters an expression of <code>unknown</code> type,
it backs off and trusts the user that they know what they are doing.</p>
</div>
</div>
<div class="sect3">
<h4 id="union-types"><a class="anchor" href="#union-types"></a><a class="link" href="#union-types">Union Types</a></h4>
<div class="paragraph">
<p>A value of type <code>A | B</code>, read "A or B", is either a value of type <code>A</code> or a value of type <code>B</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-punctuation">}</span>

<span class="hljs-property">bird1</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-operator">|</span><span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-property">bird2</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-operator">|</span><span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span> <span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>More complex union types can be formed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">foo</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Boolean</span><span class="hljs-operator">|</span><span class="hljs-title class_">Number</span><span class="hljs-operator">|</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">&gt;</span><span class="hljs-operator">|</span><span class="hljs-title class_">Bird</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Union types have no implicit default values, but an explicit type can be chosen using a <code>*</code> marker:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">foo</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;a&quot;</span><span class="hljs-operator">|</span><span class="hljs-string">&quot;b&quot;</span>       <span class="hljs-comment">// undefined. Will throw an error if not amended</span>
<span class="hljs-property">bar</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;a&quot;</span><span class="hljs-operator">|</span><span class="hljs-operator">*</span><span class="hljs-string">&quot;b&quot;</span>      <span class="hljs-comment">// default value will be taken from type &quot;b&quot;</span>
<span class="hljs-property">baz</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;a&quot;</span><span class="hljs-operator">|</span><span class="hljs-string">&quot;b&quot;</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a&quot;</span> <span class="hljs-comment">// explicit value is given</span>
<span class="hljs-property">qux</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-operator">|</span><span class="hljs-operator">*</span><span class="hljs-title class_">Int</span>   <span class="hljs-comment">// default taken from Int, but Int has no default. Will throw if not amended</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Union types often come in handy when writing schemas for legacy JSON or YAML files.</p>
</div>
</div>
<div class="sect3">
<h4 id="string-literal-types"><a class="anchor" href="#string-literal-types"></a><a class="link" href="#string-literal-types">String Literal Types</a></h4>
<div class="paragraph">
<p>A string literal type admits a single string value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">diet</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Seeds&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While occasionally useful on their own,
string literal types are often combined with <a href="#union-types">Union Types</a> to form enumerated types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">diet</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Seeds&quot;</span><span class="hljs-operator">|</span><span class="hljs-string">&quot;Berries&quot;</span><span class="hljs-operator">|</span><span class="hljs-string">&quot;Insects&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To reuse an enumerated type, introduce a type alias:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">typealias</span> <span class="hljs-title class_">Diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span><span class="hljs-operator">|</span><span class="hljs-string">&quot;Berries&quot;</span><span class="hljs-operator">|</span><span class="hljs-string">&quot;Insects&quot;</span>
<span class="hljs-property">diet</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Diet</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Java and Kotlin code generators turn type aliases for enumerated types into enum classes.</p>
</div>
</div>
<div class="sect3">
<h4 id="nothing-type"><a class="anchor" href="#nothing-type"></a><a class="link" href="#nothing-type">Nothing Type</a></h4>
<div class="paragraph">
<p>The <code>nothing</code> type is the bottom type of Pkl&#8217;s type system, the counterpart of top type <code>Any</code>.</p>
</div>
<div class="paragraph">
<p>The bottom type is assignment-compatible with every other type, and no other type is assignment-compatible with it.</p>
</div>
<div class="paragraph">
<p>Being assignment-compatible with every other type may sound too good to be true, but there is a catch&#8201;&#8212;&#8201;the <code>nothing</code> type has no values!</p>
</div>
<div class="paragraph">
<p>Despite being a lonely type, <code>nothing</code> has practical applications.
For example, it is used in the standard library&#8217;s <code>TODO()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">function</span> <span class="hljs-title class_">TODO</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">:</span> <span class="hljs-type">nothing</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">throw</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;TODO&quot;</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>nothing</code> return type indicates that a method never returns normally but always throws an error.</p>
</div>
</div>
<div class="sect3">
<h4 id="unknown-type"><a class="anchor" href="#unknown-type"></a><a class="link" href="#unknown-type">Unknown Type</a></h4>
<div class="paragraph">
<p>The <code>unknown</code> type <sup class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup> is <code>nothing</code>'s even stranger cousin: it is both a top and bottom type!
This makes <code>unknown</code> assignment-compatible with every other type, and every other type assignment-compatible with <code>unknown</code>.</p>
</div>
<div class="paragraph">
<p>When a static type analyzer encounters a value of <code>unknown</code> type,
it backs off and trusts the code&#8217;s author to know what they are doing&#8201;&#8212;&#8201;for example, whether a method called on the value exists.</p>
</div>
</div>
<div class="sect3">
<h4 id="progressive-disclosure"><a class="anchor" href="#progressive-disclosure"></a><a class="link" href="#progressive-disclosure">Progressive Disclosure</a></h4>
<div class="paragraph">
<p>In the spirit of <a href="https://en.wikipedia.org/wiki/Progressive_disclosure">progressive disclosure</a>, type annotations are optional in Pkl.
Omitting a type annotation is equivalent to specifying the type <code>unknown</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">map</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Map</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">say</span><span class="hljs-punctuation">(</span><span class="hljs-params">name</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-params">name</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>shorthand for <code>lifespan: unknown = 42</code>
(As a dynamically typed language, Pkl does not try to statically infer types.)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>shorthand for <code>map: Map&lt;unknown, unknown&gt; = Map()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>shorthand for <code>function say(name: unknown): unknown = name</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="default-values"><a class="anchor" href="#default-values"></a><a class="link" href="#default-values">Default Values</a></h4>
<div class="paragraph">
<p>Type-annotated properties have implicit "empty" default values depending on their type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span>

<span class="hljs-property">coll</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Collection</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>         <span class="hljs-comment">// = List() </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">list</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>               <span class="hljs-comment">// = List() </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">set</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Set</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>                 <span class="hljs-comment">// = Set() </span><i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-property">map</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>         <span class="hljs-comment">// = Map() </span><i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-property">listing</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Listing</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span>         <span class="hljs-comment">// = new Listing { default = (index) -&gt; new Bird {} } </span><i class="conum" data-value="5"></i><b>(5)</b>
<span class="hljs-property">mapping</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Mapping</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-comment">// = new Mapping { default = (key) -&gt; new Bird {} } </span><i class="conum" data-value="6"></i><b>(6)</b>
<span class="hljs-property">obj</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span>                      <span class="hljs-comment">// = new Bird {} </span><i class="conum" data-value="7"></i><b>(7)</b>
<span class="hljs-property">nullable</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span><span class="hljs-operator">?</span>                <span class="hljs-comment">// = Null(new Bird {}) </span><i class="conum" data-value="8"></i><b>(8)</b>
<span class="hljs-property">union</span><span class="hljs-punctuation">:</span> <span class="hljs-operator">*</span><span class="hljs-title class_">Bird</span><span class="hljs-operator">|</span><span class="hljs-title class_">String</span>            <span class="hljs-comment">// = new Bird {} </span><i class="conum" data-value="9"></i><b>(9)</b>
<span class="hljs-property">stringLiteral</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Pigeon&quot;</span>        <span class="hljs-comment">// = &quot;Pigeon&quot; </span><i class="conum" data-value="10"></i><b>(10)</b>
<span class="hljs-property">nullish</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Null</span>                  <span class="hljs-comment">// = null </span><i class="conum" data-value="11"></i><b>(11)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Properties of type <code>Collection</code> default to the empty list.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Properties of type <code>List</code> default to the empty list.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Properties of type <code>Set</code> default to the empty set.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Properties of type <code>Map</code> default to the empty map.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Properties of type <code>Listing&lt;X&gt;</code> default to an empty listing whose default element is the default for <code>X</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Properties of type <code>Mapping&lt;X, Y&gt;</code> default to an empty mapping whose default value is the default for <code>Y</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Properties of non-external class type <code>X</code> default to <code>new X {}</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Properties of type <code>X?</code> default to <code>Null(x)</code> where <code>x</code> is the default for <code>X</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Properties with a union type have no default value. By prefixing one of the types in a union with a <code>*</code>, the default of that type is chosen as the default for the union.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Properties with a string literal type default to the type&#8217;s only value.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Properties of type <code>Null</code> default to <code>null</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See <a href="#amend-null">Amending Null Values</a> for further information.</p>
</div>
<div class="paragraph">
<p>Properties of the following types do not have implicit default values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>abstract</code> classes, including <code>Any</code> and <code>NotNull</code></p>
</li>
<li>
<p>Union types, unless an explicit default is given by prefixing one of the types with <code>*</code>.</p>
</li>
<li>
<p><code>external</code> (built-in) classes, including:</p>
<div class="ulist">
<ul>
<li>
<p><code>String</code></p>
</li>
<li>
<p><code>Boolean</code></p>
</li>
<li>
<p><code>Int</code></p>
</li>
<li>
<p><code>Float</code></p>
</li>
<li>
<p><code>Duration</code></p>
</li>
<li>
<p><code>DataSize</code></p>
</li>
<li>
<p><code>Pair</code></p>
</li>
<li>
<p><code>Regex</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Accessing a property that neither has an (implicit or explicit) default value nor has been overridden throws an error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="type-constraints"><a class="anchor" href="#type-constraints"></a><a class="link" href="#type-constraints">Type Constraints</a></h4>
<div class="paragraph">
<p>A type may be followed by a comma-separated list of <em>type constraints</em> enclosed in round brackets (<code>()</code>).
A type constraint is a boolean expression that must hold for the annotated element.
Type constraints enable advanced runtime validation that goes beyond the capabilities of static type checking.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-property">length</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span>     <span class="hljs-comment">//  </span><i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">parent</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-keyword">this</span> <span class="hljs-operator">!=</span> <span class="hljs-property">name</span><span class="hljs-punctuation">)</span>  <span class="hljs-comment">//  </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">parent</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon Sr.&quot;</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Restricts <code>name</code> to have at least three characters.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of the bird (<code>this</code>) should not be the same as the name of the <code>parent</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Note how <code>parent</code> is different from <code>name</code>. If they were the same, we would be thrown a constraint error.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the following example, we define a <code>Bird</code> with a name of only two characters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// fails the constraint because [name] is less than 3 characters</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pi&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Boolean expressions are convenient for ad-hoc type constraints.
Alternatively, type constraints can be given as lambda expressions accepting a single argument, namely the value to be validated.
This allows for the abstraction and reuse of type constraints.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Project</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">local</span> <span class="hljs-property">emailAddress</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">str</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">str</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">matches</span><span class="hljs-punctuation">(</span><span class="hljs-title class_">Regex</span><span class="hljs-punctuation">(</span><span class="hljs-string">#&quot;.+@.+&quot;#</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
  <span class="hljs-property">email</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-property">emailAddress</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">project</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Project</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">email</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;projectPigeon@example.com&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">project</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Project</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// fails the constraint because `&quot;projectPigeon-example.com&quot;` doesn&#39;t match the regular expression.</span>
  <span class="hljs-property">email</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;projectPigeon-example.com&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="composite-type-constraints"><a class="anchor" href="#composite-type-constraints"></a><a class="link" href="#composite-type-constraints">Composite Type Constraints</a></h5>
<div class="paragraph">
<p>A composite type can have type constraints for the overall type, its constituent types, or both.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Project</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">local</span> <span class="hljs-property">emailAddress</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">str</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">str</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">matches</span><span class="hljs-punctuation">(</span><span class="hljs-title class_">Regex</span><span class="hljs-punctuation">(</span><span class="hljs-string">#&quot;.+@.+&quot;#</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
  <span class="hljs-comment">// constrain the nullable type&#39;s element type</span>
  <span class="hljs-property">type</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-title function_ invoke__">contains</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;source&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-operator">?</span>
  <span class="hljs-comment">// constrain the map type and its key/value types</span>
  <span class="hljs-property">contacts</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-operator">!</span><span class="hljs-property">isEmpty</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">(</span><span class="hljs-property">emailAddress</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">&gt;</span><span class="hljs-punctuation">(</span><span class="hljs-property">length</span> <span class="hljs-operator">&lt;=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">project</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Project</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">type</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;open-source&quot;</span>
  <span class="hljs-property">contacts</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;pigeon@example.com&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="anonymous-functions"><a class="anchor" href="#anonymous-functions"></a><a class="link" href="#anonymous-functions">Anonymous Functions</a></h3>
<div class="paragraph">
<p>An <em>anonymous function</em> is a function without a name.</p>
</div>
<div class="paragraph">
<p>Most modern general-purpose programming languages support anonymous functions,
under names such as <em>lamba expressions</em>, <em>arrow functions</em>, <em>function literals</em>, <em>closures</em>, or <em>procs</em>.</p>
</div>
<div class="paragraph">
<p>Anonymous functions have their own literal syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">() -&gt; expr <i class="conum" data-value="1"></i><b>(1)</b>
(param) -&gt; expr <i class="conum" data-value="2"></i><b>(2)</b>
(param1, param2, ..., paramN) -&gt; expr <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Zero-parameter lambda expression</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Single-parameter lambda expression</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Multi-parameter lambda expression</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-punctuation">(</span><span class="hljs-params">n</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">n</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This anonymous function accepts a parameter named <code>n</code>, multiplies it by 3, and returns the result.</p>
</div>
<div class="paragraph">
<p>Anonymous functions are values of type <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Function">Function</a>, more specifically
<a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Function0">Function0</a>, <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Function1">Function1</a>,
<a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Function2">Function2</a>, <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Function3">Function3</a>,
<a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Function4">Function4</a>, or <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Function5">Function5</a>.
They cannot have more than five parameters.</p>
</div>
<div class="paragraph">
<p>To invoke an anonymous function, call its <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Function1#apply()">apply</a> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">n</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">n</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">apply</span><span class="hljs-punctuation">(</span><span class="hljs-number">4</span><span class="hljs-punctuation">)</span> <span class="hljs-comment">// 12</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Many standard library methods accept anonymous functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">map</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">n</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">n</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <span class="hljs-comment">// List(3, 6, 9)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Anonymous functions can be assigned to properties, thereby giving them a name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">add</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">a</span><span class="hljs-punctuation">,</span> <span class="hljs-params">b</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">a</span> <span class="hljs-operator">+</span> <span class="hljs-params">b</span>
<span class="hljs-property">added</span> <span class="hljs-operator">=</span> <span class="hljs-property">add</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">apply</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If an anonymous function is not intended to be passed as value, it is customary to declare a method instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span><span class="hljs-punctuation">(</span><span class="hljs-params">a</span><span class="hljs-punctuation">,</span> <span class="hljs-params">b</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-params">a</span> <span class="hljs-operator">+</span> <span class="hljs-params">b</span>
<span class="hljs-property">added</span> <span class="hljs-operator">=</span> <span class="hljs-title function_ invoke__">add</span><span class="hljs-punctuation">(</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An anonymous function&#8217;s parameters can have type annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl expression hljs" data-lang="pkl expression"><span class="hljs-punctuation">(</span><span class="hljs-params">a</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Number</span><span class="hljs-punctuation">,</span> <span class="hljs-params">b</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Number</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">a</span> <span class="hljs-operator">+</span> <span class="hljs-params">b</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Applying this function to arguments not of type <code>Number</code> results in an error.</p>
</div>
<div class="paragraph">
<p>Anonymous functions are <em>closures</em>: They can access members defined in a lexically enclosing scope, even after leaving that scope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>
<span class="hljs-property">addToA</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">b</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Number</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-property">a</span> <span class="hljs-operator">+</span> <span class="hljs-params">b</span>
<span class="hljs-property">list</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">map</span><span class="hljs-punctuation">(</span><span class="hljs-property">addToA</span><span class="hljs-punctuation">)</span> <span class="hljs-comment">// List(43, 44, 45)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Single-parameter anonymous functions can also be applied with the <code>|&gt;</code> (pipe) operator,
which expects a function argument to the left and an anonymous function to the right.
The pipe operator works especially well for chaining multiple functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">mul3</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">n</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">n</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span>
<span class="hljs-property">add2</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">n</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">n</span> <span class="hljs-operator">+</span> <span class="hljs-number">2</span>

<span class="hljs-property">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>
  <span class="hljs-operator">|&gt;</span> <span class="hljs-property">mul3</span>
  <span class="hljs-operator">|&gt;</span> <span class="hljs-property">add2</span>
  <span class="hljs-operator">|&gt;</span> <span class="hljs-property">mul3</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>42</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Like methods, anonymous functions can be recursive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">factor</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-params">n</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Number</span><span class="hljs-punctuation">(</span><span class="hljs-property">isPositive</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span><span class="hljs-params">n</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span> <span class="hljs-params">n</span> <span class="hljs-keyword">else</span> <span class="hljs-params">n</span> <span class="hljs-operator">*</span> <span class="hljs-property">factor</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">apply</span><span class="hljs-punctuation">(</span><span class="hljs-params">n</span> <span class="hljs-operator">-</span> <span class="hljs-number">1</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">num</span> <span class="hljs-operator">=</span> <span class="hljs-property">factor</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">apply</span><span class="hljs-punctuation">(</span><span class="hljs-number">5</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>result: <code>120</code></td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="mixins"><a class="anchor" href="#mixins"></a><a class="link" href="#mixins">Mixins</a></h4>
<div class="paragraph">
<p>A mixin is an anonymous function used to apply the same modification to different objects.</p>
</div>
<div class="paragraph">
<p>Even though mixins are regular functions, they are best created with object syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">withDiet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mixin</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mixins can optionally specify which type of object they apply to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">diet</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-punctuation">}</span>

<span class="hljs-property">withDietTyped</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mixin</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For properties with type annotation, the shorthand <code>new { &#8230;&#8203; }</code> syntax can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">withDietTyped</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Mixin</span><span class="hljs-punctuation">&lt;</span><span class="hljs-title class_">Bird</span><span class="hljs-punctuation">&gt;</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To apply a mixin, use the <code>|&gt;</code> (pipe) operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pigeon</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">pigeonWithDiet</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span> <span class="hljs-operator">|&gt;</span> <span class="hljs-property">withDiet</span>

<span class="hljs-property">barnOwl</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Barn owl&quot;</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">barnOwlWithDiet</span> <span class="hljs-operator">=</span> <span class="hljs-property">barnOwl</span> <span class="hljs-operator">|&gt;</span> <span class="hljs-property">withDiet</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>withDiet</code> can be generalized by turning it into a factory method for mixins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">function</span> <span class="hljs-title function_">withDiet</span><span class="hljs-punctuation">(</span><span class="hljs-params">_diet</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mixin</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-params">_diet</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">seedPigeon</span> <span class="hljs-operator">=</span> <span class="hljs-property">pigeon</span> <span class="hljs-operator">|&gt;</span> <span class="hljs-title function_ invoke__">withDiet</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Seeds&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-title class_">MiceBarnOwl</span> <span class="hljs-operator">=</span> <span class="hljs-property">barnOwl</span> <span class="hljs-operator">|&gt;</span> <span class="hljs-title function_ invoke__">withDiet</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Mice&quot;</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mixins can themselves be modified with <a href="#function-amending">function amending</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="function-amending"><a class="anchor" href="#function-amending"></a><a class="link" href="#function-amending">Function Amending</a></h4>
<div class="paragraph">
<p>An anonymous function that returns an object can be amended with the same syntax as that object.
The result is a new function that accepts the same number of parameters as the original function,
applies the original function to them, and amends the returned object.</p>
</div>
<div class="paragraph">
<p>Function amending is a special form of function composition.
Thanks to function amending, <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Listing#default">Listing.default</a>
and <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/base/Mapping#default">Mapping.default</a> can be treated as if they were objects,
only gradually revealing their true (single-parameter function) nature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Amends the <code>default</code> function, which returns a default mapping value given a mapping key, and sets property <code>diet</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Implicitly applies the amended <code>default</code> function and amends the returned object with property <code>lifespan</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The result is a mapping whose entry <code>"Pigeon"</code> has both <code>diet</code> and <code>lifespan</code> set.</p>
</div>
<div class="paragraph">
<p>When amending an anonymous function, it is possible to access its parameters
by declaring a comma-separated, arrow (<code>&#8594;</code>) terminated parameter list after the opening curly brace (<code>{</code>).</p>
</div>
<div class="paragraph">
<p>Once again, this is especially useful to configure a listing&#8217;s or mapping&#8217;s <code>default</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mapping</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span> <span class="hljs-params">key</span> <span class="hljs-punctuation">-&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-params">key</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span> <i class="conum" data-value="2"></i><b>(2)</b>
  [<span class="hljs-string">&quot;Barn owl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Amends the <code>default</code> function and sets the <code>name</code> property to the mapping entry&#8217;s key.
To access the <code>default</code> function&#8217;s key parameter, it is declared with <code>key &#8594;</code>.
(Any other parameter name could be chosen, but <code>key</code> is customary for default functions.)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a mapping entry with key <code>"Pigeon"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines a mapping entry with key <code>"Barn owl"</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The result is a mapping with two entries <code>"Pigeon"</code> and <code>"Barn owl"</code> whose <code>name</code> properties are set to their keys.</p>
</div>
<div class="paragraph">
<p>Function amending can also be used to refine <a href="#mixins">mixins</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="amend-null"><a class="anchor" href="#amend-null"></a><a class="link" href="#amend-null">Amending Null Values</a></h3>
<div class="paragraph">
<p>It&#8217;s time to lift a secret: The predefined <code>null</code> value is just one of the potentially many values of type <code>Null</code>.</p>
</div>
<div class="paragraph">
<p>First, here are the technical facts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Null values are constructed with <code>pkl.base#Null()</code>.</p>
</li>
<li>
<p><code>Null(x)</code> constructs a null value that is equivalent to <code>x</code> when amended.
In other words, <code>Null(x) { &#8230;&#8203; }</code> is equivalent to <code>x { &#8230;&#8203; }</code>.</p>
</li>
<li>
<p>All null values are equal according to <code>==</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We say that <code>Null(x)</code> is a "null value with default x".
But what is it useful for?</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Null values with default are used to define properties that are null ("switched off") by default but have a default value once amended ("switched on").</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="title">template.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">// we don&#39;t have a pet yet, but already know that it is going to be a bird</span>
<span class="hljs-property">pet</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Null</span><span class="hljs-punctuation">(</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Dynamic</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">animal</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;bird&quot;</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;template.pkl&quot;</span>

<span class="hljs-comment">// We got a pet, let&#39;s fill in its name</span>
<span class="hljs-property">pet</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parry the Parrot&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A null value can be switched on without adding or overriding a property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;template.pkl&quot;</span>

<span class="hljs-comment">// We do not need to name anything if we have no pet yet</span>
<span class="hljs-property">pet</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The predefined <code>null</code> value is defined as <code>Null(new Dynamic {})</code>.
In other words, amending <code>null</code> is equivalent to amending <code>Dynamic {}</code> (the empty dynamic object):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pet</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">pet</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Parry the Parrot&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In most cases, the <code>Null()</code> method is not used directly.
Instead, it is used under the hood to create implicit defaults for properties with nullable type:</p>
</div>
<div class="listingblock">
<div class="title">template.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pet</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
  <span class="hljs-property">animal</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;bird&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// defaults to `Null(Pet {})`</span>
<span class="hljs-property">pet</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Pet</span><span class="hljs-operator">?</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;template.pkl&quot;</span>

<span class="hljs-property">pet</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Perry the Parrot&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The general rule is: A property with nullable type <code>X?</code> defaults to <code>Null(x)</code> if type <code>X</code> has default value <code>x</code>, and to <code>null</code> if <code>X</code> has no default value.</p>
</div>
</div>
<div class="sect2">
<h3 id="when-generators"><a class="anchor" href="#when-generators"></a><a class="link" href="#when-generators">When Generators</a></h3>
<div class="paragraph">
<p><code>when</code> generators conditionally generate object members.
They come in two variants:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>when (&lt;condition&gt;) { &lt;members&gt; }</code></p>
</li>
<li>
<p><code>when (&lt;condition&gt;) { &lt;members&gt; } else { &lt;members&gt; }</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following code conditionally generates properties <code>hobby</code> and <code>idol</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">isSinger</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>

<span class="hljs-property">parrot</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
  <span class="hljs-keyword">when</span> <span class="hljs-punctuation">(</span><span class="hljs-property">isSinger</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">hobby</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;singing&quot;</span>
    <span class="hljs-property">idol</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Frank Sinatra&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>when</code> generators can have an <code>else</code> part:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">isSinger</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>

<span class="hljs-property">parrot</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
  <span class="hljs-keyword">when</span> <span class="hljs-punctuation">(</span><span class="hljs-property">isSinger</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">hobby</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;singing&quot;</span>
    <span class="hljs-property">idol</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Aretha Franklin&quot;</span>
  <span class="hljs-punctuation">}</span> <span class="hljs-property">else</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">hobby</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;whistling&quot;</span>
    <span class="hljs-property">idol</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Wolfgang Amadeus Mozart&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Besides properties, <code>when</code> generators can generate elements and entries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">abilities</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-string">&quot;chirping&quot;</span>
  <span class="hljs-keyword">when</span> <span class="hljs-punctuation">(</span><span class="hljs-property">isSinger</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-string">&quot;singing&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-string">&quot;whistling&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">abilitiesByBird</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Barn owl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hooing&quot;</span>
  <span class="hljs-keyword">when</span> <span class="hljs-punctuation">(</span><span class="hljs-property">isSinger</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;singing&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;whistling&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>conditional element</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>conditional entry</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="for-generators"><a class="anchor" href="#for-generators"></a><a class="link" href="#for-generators">For Generators</a></h3>
<div class="paragraph">
<p><code>for</code> generators generate object members in a loop.
They come in two variants:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>for (&lt;value&gt; in &lt;iterable&gt;) { &lt;members&gt; }</code></p>
</li>
<li>
<p><code>for (&lt;key&gt;, &lt;value&gt; in &lt;iterable&gt;) { &lt;members&gt; }</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following code generates a <code>birds</code> object containing three elements.
Each element is an object with properties <code>name</code> and <code>lifespan</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">names</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Barn owl&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">)</span>

<span class="hljs-property">birds</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">for</span> <span class="hljs-punctuation">(</span><span class="hljs-property">_name</span> <span class="hljs-keyword">in</span> <span class="hljs-property">names</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-property">_name</span>
      <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code generates a <code>birdsByName</code> object containing three entries.
Each entry is an object with properties <code>name</code> and <code>lifespan</code> keyed by name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">namesAndLifespans</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Barn owl&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">15</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-number">20</span><span class="hljs-punctuation">)</span>

<span class="hljs-property">birdsByName</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">for</span> <span class="hljs-punctuation">(</span><span class="hljs-property">_name</span><span class="hljs-punctuation">,</span> <span class="hljs-property">_lifespan</span> <span class="hljs-keyword">in</span> <span class="hljs-property">namesAndLifespans</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    [<span class="hljs-property">_name</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-property">_name</span>
      <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-property">_lifespan</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following types are iterable:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IntSeq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element index (<code>Int</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element value (<code>Int</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;Element&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element index (<code>Int</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element value (<code>Element</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Set&lt;Element&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element index (<code>Int</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element value (<code>Element</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;Key, Value&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entry key (<code>Key</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entry value (<code>Value</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Listing&lt;Element&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element index (<code>Int</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element value (<code>Element</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Mapping&lt;Key, Value&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entry key (<code>Key</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entry value (<code>Value</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dynamic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element index (<code>Int</code>)<br>
entry key<br>
property name (<code>String</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">element value<br>
entry value<br>
property value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Indices are zero-based.
Note that <code>for</code> generators can generate elements and entries but not properties.<sup class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup></p>
</div>
</div>
<div class="sect2">
<h3 id="spread-syntax"><a class="anchor" href="#spread-syntax"></a><a class="link" href="#spread-syntax">Spread Syntax (<code>...</code>)</a></h3>
<div class="paragraph">
<p>Spread syntax generates object members from an iterable value.</p>
</div>
<div class="paragraph">
<p>There are two variants of spread syntax, a non-nullable variant and a nullable variant.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>...&lt;iterable&gt;</code></p>
</li>
<li>
<p><code>...?&lt;iterable&gt;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Spreading an <a href="#objects"><code>Object</code></a> (one of <code>Dynamic</code>, <code>Listing</code> and <code>Mapping</code>) will unpack all of its members into the enclosing object <sup class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup>.
Entries become entries, elements become elements, and properties become properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">entries1</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Piggy the Pigeon&quot;</span>
  [<span class="hljs-string">&quot;Barn owl&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Barney the Barn owl&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">entries2</span> <span class="hljs-punctuation">{</span>
  ...<span class="hljs-property">entries1</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">elements1</span> <span class="hljs-punctuation">{</span> <span class="hljs-number">1</span>; <span class="hljs-number">2</span> <span class="hljs-punctuation">}</span>

<span class="hljs-property">elements2</span> <span class="hljs-punctuation">{</span>
  ...<span class="hljs-property">elements1</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">properties1</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">diet</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Seeds&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">properties2</span> <span class="hljs-punctuation">{</span>
  ...<span class="hljs-property">properties1</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Spreads entries <code>["Pigeon"] = "Piggy the Pigeon"</code> and <code>["Barn owl"] = "Barney the Barn owl"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Spreads elements <code>1</code> and <code>2</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Spreads properties <code>name = "Pigeon"</code> and <code>diet = "Seeds"</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Spreading all other iterable types generates members determined by the iterable.
The following table describes how different iterables turn into object members:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Iterable type</th>
<th class="tableblock halign-left valign-top">Member type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Set</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IntSeq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These types can only be spread into enclosing objects that support that member type.
For example, a <code>List</code> can be spread into a <code>Listing</code>, but cannot be spread into a <code>Mapping</code>.</p>
</div>
<div class="paragraph">
<p>In some ways, spread syntax can be thought of as a shorthand for a <a href="#for-generators">for generator</a>. One key difference is that spread syntax can generate properties, which is not possible with a for generator.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Look out for duplicate key conflicts when using spreads.
Spreading entries or properties may cause conflicts due to matched existing key definitions.</p>
</div>
<div class="paragraph">
<p>In the following code snippet, <code>"Pigeon"</code> is declared twice in the <code>newPets</code> object, and thus is an error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">oldPets</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Piggy the Pigeon&quot;</span>
  [<span class="hljs-string">&quot;Parrot&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Perry the Parrot&quot;</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">newPets</span> <span class="hljs-punctuation">{</span>
  ...<span class="hljs-property">cast</span>
  [<span class="hljs-string">&quot;Pigeon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Toby the Pigeon&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Error: Duplicate definition of member <code>"Pigeon"</code>.</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="nullable-spread"><a class="anchor" href="#nullable-spread"></a><a class="link" href="#nullable-spread">Nullable spread</a></h4>
<div class="paragraph">
<p>A non-nullable spread (<code>...</code>) will error if the value being spread is <code>null</code>.</p>
</div>
<div class="paragraph">
<p>In contrast, a nullable spread (<code>...?</code>) is syntactic sugar for wrapping a spread in a <a href="#when-generators"><code>when</code></a>.</p>
</div>
<div class="paragraph">
<p>The following two snippets are logically identical.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">result</span> <span class="hljs-punctuation">{</span>
  ...?<span class="hljs-property">myValue</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">result</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">when</span> <span class="hljs-punctuation">(</span><span class="hljs-property">myValue</span> <span class="hljs-operator">!=</span> <span class="hljs-literal">null</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    ...<span class="hljs-property">myValue</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="member-predicates"><a class="anchor" href="#member-predicates"></a><a class="link" href="#member-predicates">Member Predicates (<code>[[&#8230;&#8203;]]</code>)</a></h3>
<div class="paragraph">
<p>Occasionally it is useful to configure all object members matching a predicate.
This is especially true when configuring elements, whichâ€”unlike entriesâ€”cannot be accessed by key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">environmentVariables</span> <span class="hljs-punctuation">{</span>   <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;PIGEON&quot;</span>; <span class="hljs-property">value</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;pigeon-value&quot;</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;PARROT&quot;</span>; <span class="hljs-property">value</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;parrot-value&quot;</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;BARN OWL&quot;</span>; <span class="hljs-property">value</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;barn-owl-value&quot;</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">updated</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">environmentVariables</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
  [[<span class="hljs-property">name</span> <span class="hljs-operator">==</span> <span class="hljs-string">&quot;PARROT&quot;</span>]] <span class="hljs-punctuation">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-property">value</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;new-value&quot;</span>  <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a listing of environment variables</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>amend element(s) whose name equals "PARROT"<br>
(<code>name</code> is shorthand for <code>this.name</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>update value to "new-value"</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The predicate, enclosed in double brackets (<code>\[[&#8230;&#8203;]]</code>), is matched against each member of the enclosing object.
Within the predicate, <code>this</code> refers to the member that the predicate is matched against.
Matching members are amended (<code>{ &#8230;&#8203; }</code>) or overridden (<code>= &lt;new-value&gt;</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="glob-patterns"><a class="anchor" href="#glob-patterns"></a><a class="link" href="#glob-patterns">Glob Patterns</a></h3>
<div class="paragraph">
<p>Resources and modules may be imported at the same time by globbing with the <a href="#globbed-imports">Globbed Imports</a> and <a href="#globbed-reads">Globbed Reads</a> features.</p>
</div>
<div class="paragraph">
<p>Pkl&#8217;s glob patterns mostly follow the rules described by <a href="https://man7.org/linux/man-pages/man7/glob.7.html">glob(7)</a>, with the following differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>*</code> includes names that start with a dot (<code>.</code>).</p>
</li>
<li>
<p><code>**</code> behaves like <code>*</code>, except it also matches directory boundary characters (<code>/</code>).</p>
</li>
<li>
<p>Named character classes are not supported.</p>
</li>
<li>
<p>Collating symbols are not supported.</p>
</li>
<li>
<p>Equivalence class expressions are not supported.</p>
</li>
<li>
<p>Support for <a href="#glob-sub-patterns">sub-patterns</a> (patterns within <code>{</code> and <code>}</code>) are added.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is a full specification of how globs work:</p>
</div>
<div class="sect3">
<h4 id="wildcards"><a class="anchor" href="#wildcards"></a><a class="link" href="#wildcards">Wildcards</a></h4>
<div class="paragraph">
<p>The following tokens denote wildcards:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Wildcard</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match zero or more characters, until a directory boundary (<code>/</code>) is reached.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match zero or more characters, crossing directory boundaries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match a single character.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[&#8230;&#8203;]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match a single character represented by this <a href="#character-classes">character class</a>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unlike globs within shells, the <code>*</code> wildcard includes names that start with a dot (<code>.</code>).
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="character-classes"><a class="anchor" href="#character-classes"></a><a class="link" href="#character-classes">Character Classes</a></h4>
<div class="paragraph">
<p>Character classes are sequences delimited by the <code>[</code> and <code>]</code> characters, and represent a single
character as described by the sequence within the enclosed brackets.
For example, the pattern <code>[abc]</code> means "a single character that is a, b, or c".</p>
</div>
<div class="paragraph">
<p>Character classes may be negated using <code>!</code>.
For example, the pattern <code>[!abc]</code> means "a single character that is not a, b, nor c".</p>
</div>
<div class="paragraph">
<p>Character classes may use the <code>-</code> character to denote a range.
The pattern <code>[a-f]</code> is equivalent to <code>[abcdef]</code>.
If the <code>-</code> character exists at the beginning or the end of a character class, it does not carry any special meaning.</p>
</div>
<div class="paragraph">
<p>Within a character class, the characters <code>{</code>, <code>}</code>, <code>\</code>, <code>*</code>, and <code>?</code> do not have any special meaning.</p>
</div>
<div class="paragraph">
<p>A character class is not allowed to be empty.
Thus, if the first character within the character class is <code>]</code>, it is treated literally and not as the closing delimiter of the character class.
For example, the glob pattern <code>[]abc]</code> matches a single character that is either <code>]</code>, <code>a</code>, <code>b</code>, or <code>c</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="glob-sub-patterns"><a class="anchor" href="#glob-sub-patterns"></a><a class="link" href="#glob-sub-patterns">Sub-patterns</a></h4>
<div class="paragraph">
<p>Sub-patterns are glob patterns delimited by the <code>{</code> and <code>}</code> characters, and separated by the <code>,</code> character.
For example, the pattern <code>{pigeon,parrot}</code> will match either <code>pigeon</code> or <code>parrot</code>.</p>
</div>
<div class="paragraph">
<p>Sub-patterns cannot be nested. The pattern <code>{foo,{bar,baz}}</code> is not a valid glob pattern, and an error will be thrown during evaluation.</p>
</div>
</div>
<div class="sect3">
<h4 id="escapes"><a class="anchor" href="#escapes"></a><a class="link" href="#escapes">Escapes</a></h4>
<div class="paragraph">
<p>The escape character (<code>\</code>) can be used to remove the special meaning of a character. The following escapes are valid:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\[</code></p>
</li>
<li>
<p><code>\*</code></p>
</li>
<li>
<p><code>\?</code></p>
</li>
<li>
<p><code>\\</code></p>
</li>
<li>
<p><code>\{</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All other escapes are considered a syntax error and an error is thrown.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If incorporating escape characters into a glob pattern, use <a href="#custom-string-delimiters">custom string delimiters</a> to express the glob pattern. For example, <code>import*(#"\{foo.pkl"#)</code>. This way, the backslash is interpreted as a backslash and not a string escape.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="examples"><a class="anchor" href="#examples"></a><a class="link" href="#examples">Examples</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Pattern</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*.pc[lf]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anything suffixed by <code>.pkl</code>, or <code>.pcf</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**.y{a,}ml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anything suffixed by either <code>yml</code> or <code>yaml</code>, crossing directory boundaries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>birds/{*.yml,*.json}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anything within the <code>birds</code> subdirectory that ends in <code>.yml</code> or <code>.json</code>. This pattern is equivalent to <code>birds/*.{yml,json}</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a?*.txt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anything starting with <code>a</code> and at least one more letter, and suffixed with <code>.txt</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>modulepath:/**.pkl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Pkl files in the module path.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="quoted-identifiers"><a class="anchor" href="#quoted-identifiers"></a><a class="link" href="#quoted-identifiers">Quoted Identifiers</a></h3>
<div class="paragraph">
<p>An identifier is the name part of an entity in Pkl.
Entities that are named by identifiers include classes, properties, typealiases, and modules.
For example, <code>class Bird</code> has the identifier <code>Bird</code>.</p>
</div>
<div class="paragraph">
<p>Normally, an identifier must conform to Unicode&#8217;s <a href="https://unicode.org/reports/tr31/#R1-1">UAX31-R1-1 syntax</a>, with the additions of <code>_</code> and <code>$</code> permitted as identifier start characters.
Additionally, an identifier cannot clash with a keyword.</p>
</div>
<div class="paragraph">
<p>To define an identifier that is otherwise illegal, enclose them in backticks.
This is called a <em>quoted identifier</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">`A Bird&#39;s First Flight Time`</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-punctuation">.</span><span class="hljs-property">s</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Backticks are not part of a quoted identifier&#8217;s name, and surrounding an already legal identifier with backticks is redundant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">`number`</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-property">res1</span> <span class="hljs-operator">=</span> <span class="hljs-property">`number`</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="hljs-property">res2</span> <span class="hljs-operator">=</span> <span class="hljs-property">number</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Equivalent to <code>number = 42</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>References property <code>`number`</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Also references property <code>`number`</code></td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="doc-comments"><a class="anchor" href="#doc-comments"></a><a class="link" href="#doc-comments">Doc Comments</a></h3>
<div class="paragraph">
<p>Doc comments are the user-facing documentation of a module and its members.
They consist of one or more lines starting with a triple slash (<code>///</code>).
Here is a doc comment for a module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// An aviated animal going by the name of [bird](https://en.wikipedia.org/wiki/Bird).</span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// These animals live on the planet Earth.</span>
<span class="hljs-keyword">module</span> <span class="hljs-property">com</span><span class="hljs-punctuation">.</span><span class="hljs-property">animals</span><span class="hljs-punctuation">.</span><span class="hljs-title class_">Birds</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Doc comments are written in Markdown.
The following Markdown features are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>all <a href="https://commonmark.org/">CommonMark</a> features</p>
</li>
<li>
<p><a href="https://help.github.com/articles/organizing-information-with-tables">GitHub flavored Markdown tables</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Plaintext URLs are only rendered as links when enclosed in angle brackets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// A link is *not* generated for https://example.com.</span>
<span class="hljs-comment">/// A link *is* generated for &lt;https://example.com&gt;.</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Doc comments are consumed by humans reading source code, the <em>Pkldoc</em> documentation generator, code generators, and editor/IDE plugins.
They are programmatically accessible via the <a href="https://pkl-lang.org/package-docs/pkl/0.26.3/reflect/">pkl.reflect</a> Pkl API and <a href="https://github.com/apple/pkl/tree/0.26.3/pkl-core/src/main/java/org/pkl/core/ModuleSchema.java">ModuleSchema</a> Java API.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Doc Comment Style Guidelines</div>
<div class="ulist">
<ul>
<li>
<p>Use proper spelling and grammar.</p>
</li>
<li>
<p>Start each sentence on a new line and capitalize the first letter.</p>
</li>
<li>
<p>End each sentence with a punctuation mark.</p>
</li>
<li>
<p>The first paragraph of a doc comment is its <em>summary</em>.
Keep the summary short (a single sentence is common)
and insert an empty line (<code>///</code>) before the next paragraph.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Doc comments can be attached to module, class, type alias, property, and method declarations.
Here is a comprehensive example:</p>
</div>
<div class="listingblock">
<div class="title">Birds.pkl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// An aviated animal going by the name of [bird](https://en.wikipedia.org/wiki/Bird).</span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// These animals live on the planet Earth.</span>
<span class="hljs-keyword">module</span> <span class="hljs-property">com</span><span class="hljs-punctuation">.</span><span class="hljs-property">animals</span><span class="hljs-punctuation">.</span><span class="hljs-title class_">Birds</span>

<span class="hljs-comment">/// A bird living on Earth.</span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// Has [name] and [lifespan] properties and an [isOlderThan()] method.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-comment">/// The name of this bird.</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>

  <span class="hljs-comment">/// The lifespan of this bird.</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">UInt8</span>

  <span class="hljs-comment">/// Tells if this bird is older than [bird].</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">isOlderThan</span><span class="hljs-punctuation">(</span><span class="hljs-params">bird</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Boolean</span> <span class="hljs-operator">=</span> <span class="hljs-property">lifespan</span> <span class="hljs-operator">&gt;</span> <span class="hljs-params">bird</span><span class="hljs-punctuation">.</span><span class="hljs-property">lifespan</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">/// An adult [Bird].</span>
<span class="hljs-keyword">typealias</span> <span class="hljs-title class_">Adult</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Bird</span><span class="hljs-punctuation">(</span><span class="hljs-property">lifespan</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span>

<span class="hljs-comment">/// A common [Bird] found in large cities.</span>
<span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
  <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">/// Creates a [Bird] with the given [_name] and lifespan `0`.</span>
<span class="hljs-keyword">function</span> <span class="hljs-title class_">Infant</span><span class="hljs-punctuation">(</span><span class="hljs-params">_name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-params">_name</span>; <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="member-links"><a class="anchor" href="#member-links"></a><a class="link" href="#member-links">Member Links</a></h4>
<div class="paragraph">
<p>To link to a member declaration, write the member&#8217;s name enclosed in square brackets (<code>[]</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// A common [Bird] found in large cities.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To customize the link text, insert the desired text, enclosed in square brackets, before the member name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// A [common Bird][Bird] found in large cities.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Custom link text can use markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// A [*common* Bird][Bird] found in large cities.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The short link <code>[Bird]</code> is equivalent to <code>[`Bird`][Bird]</code>.</p>
</div>
<div class="paragraph">
<p>Member links are resolved according to Pkl&#8217;s normal name resolution rules.
The syntax for linking to the members of <em>Birds.pkl</em> (see above) is as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Module</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[module]</code> (from same module)</p>
</li>
<li>
<p><code>[Birds]</code> (from a module that contains <code>import "Birds.pkl"</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Class</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[Bird]</code> (from same module)</p>
</li>
<li>
<p><code>[Birds.Bird]</code> (from a module that contains <code>import "Birds.pkl"</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Type Alias</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[Adult]</code> (from same module)</p>
</li>
<li>
<p><code>[Birds.Adult]</code> (from a module that contains <code>import "Birds.pkl"</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Class Property</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[name]</code> (from same class)</p>
</li>
<li>
<p><code>[Bird.name]</code> (from same module)</p>
</li>
<li>
<p><code>[Birds.Bird.name]</code> (from a module that contains <code>import "Birds.pkl"</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Class Method</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[greet()]</code> (from same class)</p>
</li>
<li>
<p><code>[Bird.greet()]</code> (from same module)</p>
</li>
<li>
<p><code>[Birds.Bird.greet()]</code> (from a module that contains <code>import "Birds.pkl"</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Class Method Parameter</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[bird]</code> (from same method)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Module Property</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[pigeon]</code> (from same module)</p>
</li>
<li>
<p><code>[Birds.pigeon]</code> (from a module that contains <code>import "Birds.pkl"</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Module Method</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[isPigeon()]</code> (from same module)</p>
</li>
<li>
<p><code>[Birds.isPigeon()]</code> (from a module that contains <code>import "Birds.pkl"</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Module Method Parameter</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>[bird]</code> (from same method)</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Members of <code>pkl.base</code> can be linked to by their simple name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// Returns a [String].</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Module-level members can be prefixed with <code>module.</code> to resolve name conflicts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-comment">/// See [module.pigeon].</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To exclude a member from documentation and code completion, annotate it with <code>@Unlisted</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-operator">@</span><span class="hljs-title class_">Unlisted</span>
<span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following member links are marked up as code but not rendered as links:<sup class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnotedef_9" title="View footnote.">9</a>]</sup></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>[null]</code>, <code>[true]</code>, <code>[false]</code>, <code>[this]</code>, <code>[unknown]</code>, <code>[nothing]</code></p>
</li>
<li>
<p>self-links</p>
</li>
<li>
<p>subsequent links to the same member from the same doc comment</p>
</li>
<li>
<p>links to a method&#8217;s own parameters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nevertheless, it is a good practice to use member links in the above cases.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="name-resolution"><a class="anchor" href="#name-resolution"></a><a class="link" href="#name-resolution">Name Resolution</a></h3>
<div class="paragraph">
<p>Consider this snippet of code buried deep inside a config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">a</span> <span class="hljs-operator">=</span> <span class="hljs-property">x</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The call site&#8217;s "variable" syntax reveals that <code>x</code> refers to a <em>LAMP</em>
(let binding, anonymous function parameter, method parameter, or property) definition. But which one?</p>
</div>
<div class="paragraph">
<p>To answer this question, Pkl follows these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Search the lexically enclosing scopes of <code>x</code>,
starting with the scope in which <code>x</code> occurs and continuing outwards
up to and including the enclosing module&#8217;s top-level scope, for a LAMP definition named <code>x</code>.
If a match is found, this is the answer.</p>
</li>
<li>
<p>Search the <code>pkl.base</code> module for a top-level definition of property <code>x</code>.
If a match is found, this is the answer.</p>
</li>
<li>
<p>Search the <a href="#prototype-chain">prototype chain</a> of <code>this</code>, from bottom to top, for a definition of property <code>x</code>.
If a match is found, this is the answer.</p>
</li>
<li>
<p>Throw a "name <code>x</code> not found" error.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Pkl&#8217;s LAMP name resolution is inspired by <a href="https://newspeaklanguage.org">Newspeak</a>.
The goal is for name resolution to be stable with regard to changes in external modules.
This is why lexically enclosing scopes are searched before the prototype chain of <code>this</code>,
and why the prototype chains of lexically enclosing scopes are not searched,
which sometimes requires the use of <code>outer.</code> or <code>module.</code>.
For name resolution to fully stabilize, the list of top-level properties defined in <code>pkl.base</code> needs to be freezed.
This is tentatively planned for Pkl 1.0.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Consider this snippet of code buried deep inside a config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">a</span> <span class="hljs-operator">=</span> <span class="hljs-title function_ invoke__">x</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;foo&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The call site&#8217;s method call syntax reveals that <code>x</code> refers to a method definition. But which one?</p>
</div>
<div class="paragraph">
<p>To answer this question, Pkl follows these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Search the call sites' lexically enclosing scopes,
starting with the scope in which the call site occurs and continuing outwards
up to and including the enclosing module&#8217;s top-level scope, for a definition of method <code>x</code>.
If a match is found, this is the answer.</p>
</li>
<li>
<p>Search the <code>pkl.base</code> module for a top-level definition of method <code>x</code>.
If a match is found, this is the answer.</p>
</li>
<li>
<p>Search the class inheritance chain of <code>this</code>, starting with the class of <code>this</code>
and continuing upwards until and including class <code>Any</code>, for a method named <code>x.</code>
If a match is found, this is the answer.</p>
</li>
<li>
<p>Throw a "method <code>x</code> not found" error.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Pkl does not support arity or type-based method overloading.
Hence, the argument list of a method call is irrelevant for method resolution.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="prototype-chain"><a class="anchor" href="#prototype-chain"></a><a class="link" href="#prototype-chain">Prototype Chain</a></h4>
<div class="paragraph">
<p>Pkl&#8217;s object model is based on <a href="https://en.wikipedia.org/wiki/Prototype-based_programming">prototypical inheritance</a>.
The prototype chain of object<sup class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnotedef_10" title="View footnote.">10</a>]</sup> <code>x</code> contains, from bottom to top:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The chain of objects amended to create <code>x</code>, ending in <code>x</code> itself, in reverse order.<sup class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnotedef_11" title="View footnote.">11</a>]</sup></p>
</li>
<li>
<p>The prototype of the class of the top object in (1).
If no amending took place, this is the class of <code>x</code>.</p>
</li>
<li>
<p>The prototypes of the superclasses of (2).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The prototype of class <code>X</code> is an instance of <code>X</code> that defines the defaults for properties defined in <code>X</code>.
Its direct ancestor in the prototype chain is the prototype of the superclass of <code>X</code>.</p>
</div>
<div class="paragraph">
<p>The prototype of class <code>Any</code> sits at the top of every prototype chain.
To reduce the chance of naming collisions, <code>Any</code> does not define any property names.<sup class="footnote">[<a id="_footnoteref_12" class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup></p>
</div>
<div class="paragraph">
<p>Consider the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">one</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dynamic</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span> <span class="hljs-punctuation">}</span>
<span class="hljs-property">two</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">one</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span> <span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The prototype chain of object <code>two</code> contains, now listed from top to bottom:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The prototype of class <code>Any</code>.</p>
</li>
<li>
<p>The prototype of class <code>Dynamic</code>.</p>
</li>
<li>
<p><code>one</code></p>
</li>
<li>
<p><code>two</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Consider the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Named</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">String</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Named</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">lifespan</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-property">one</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span> <span class="hljs-punctuation">}</span>
<span class="hljs-property">two</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-property">one</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <span class="hljs-property">lifespan</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span> <span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The prototype chain of object <code>two</code> contains, listed from top to bottom:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The prototype of class <code>Any</code>.</p>
</li>
<li>
<p>The prototype of class <code>Typed</code>.</p>
</li>
<li>
<p>The prototype of class <code>Named</code>.</p>
</li>
<li>
<p>The prototype of class <code>Bird</code>.</p>
</li>
<li>
<p><code>one</code></p>
</li>
<li>
<p><code>two</code></p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="non-object-values"><a class="anchor" href="#non-object-values"></a><a class="link" href="#non-object-values">Non-object Values</a></h5>
<div class="paragraph">
<p>The prototype chain of non-object value <code>x</code> contains, from bottom to top:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The prototype of the class of <code>x</code>.</p>
</li>
<li>
<p>The prototypes of the superclasses of (1).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, the prototype chain of value <code>42</code> contains, now listed from top to bottom:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The prototype of class <code>Any</code>.</p>
</li>
<li>
<p>The prototype of class <code>Number</code>.</p>
</li>
<li>
<p>The prototype of class <code>Int</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A prototype chain never contains a non-object value, such as <code>42</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="grammar-definition"><a class="anchor" href="#grammar-definition"></a><a class="link" href="#grammar-definition">Grammar Definition</a></h3>
<div class="paragraph">
<p>Pkl&#8217;s <a href="https://www.antlr.org">ANTLR 4</a> grammar is defined in <a href="https://github.com/apple/pkl/tree/0.26.3/pkl-core/src/main/antlr/PklLexer.g4">PklLexer.g4</a> and <a href="https://github.com/apple/pkl/tree/0.26.3/pkl-core/src/main/antlr/PklParser.g4">PklParser.g4</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="reserved-keywords"><a class="anchor" href="#reserved-keywords"></a><a class="link" href="#reserved-keywords">Reserved keywords</a></h3>
<div class="paragraph">
<p>The following keywords are reserved in the language.
They cannot be used as a regular identifier, and currently do not have any meaning.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>protected</code></p>
</li>
<li>
<p><code>override</code></p>
</li>
<li>
<p><code>record</code></p>
</li>
<li>
<p><code>delete</code></p>
</li>
<li>
<p><code>case</code></p>
</li>
<li>
<p><code>switch</code></p>
</li>
<li>
<p><code>vararg</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use these names in an identifier, <a href="#quoted-identifiers">surround them with backticks</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="blank-identifiers"><a class="anchor" href="#blank-identifiers"></a><a class="link" href="#blank-identifiers">Blank Identifiers</a></h3>
<div class="paragraph">
<p>Blank identifiers can be used in many places to ignore parameters and variables.<br>
<code>_</code> is not a valid identifier. To use it as a parameter or variable name,
it needs to be enclosed in backticks: `_`.</p>
</div>
<div class="sect3">
<h4 id="functions-and-methods"><a class="anchor" href="#functions-and-methods"></a><a class="link" href="#functions-and-methods">Functions and methods</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">List</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Robin&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Swallow&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Eagle&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Falcon&quot;</span><span class="hljs-punctuation">)</span>
<span class="hljs-property">indexes</span> <span class="hljs-operator">=</span> <span class="hljs-property">birds</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">mapIndexed</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-params">i</span><span class="hljs-punctuation">,</span> <span class="hljs-params">_</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-params">i</span><span class="hljs-punctuation">)</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">constantly</span><span class="hljs-punctuation">(</span><span class="hljs-params">_</span><span class="hljs-punctuation">,</span> <span class="hljs-params">second</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-params">second</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="for-generators-2"><a class="anchor" href="#for-generators-2"></a><a class="link" href="#for-generators-2">For generators</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birdColors</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Map</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;Robin&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;blue&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Eagle&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;white&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Falcon&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;red&quot;</span><span class="hljs-punctuation">)</span>

<span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listing</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-keyword">for</span> <span class="hljs-punctuation">(</span><span class="hljs-property">name</span><span class="hljs-punctuation">,</span> <span class="hljs-property">_</span> <span class="hljs-keyword">in</span> <span class="hljs-property">birdColors</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-property">name</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="let-bindings"><a class="anchor" href="#let-bindings"></a><a class="link" href="#let-bindings">Let bindings</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">let</span> <span class="hljs-punctuation">(</span><span class="hljs-property">_</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">trace</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;defining name&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-string">&quot;Eagle&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="object-bodies"><a class="anchor" href="#object-bodies"></a><a class="link" href="#object-bodies">Object bodies</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-property">birds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dynamic</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">default</span> <span class="hljs-punctuation">{</span> <span class="hljs-params">_</span> <span class="hljs-punctuation">-&gt;</span>
    <span class="hljs-property">species</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Bird&quot;</span>
  <span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Falcon&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
  [<span class="hljs-string">&quot;Eagle&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="projects"><a class="anchor" href="#projects"></a><a class="link" href="#projects">Projects</a></h3>
<div class="paragraph">
<p>A <em>project</em> is a directory of Pkl modules and other resources.
It is defined by the presence of a <code>PklProject</code> file that amends the standard library module
<code>pkl:Project</code>.</p>
</div>
<div class="paragraph">
<p>Defining a project serves the following purposes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It allows defining common evaluator settings for Pkl modules within a logical project.</p>
</li>
<li>
<p>It helps with managing <a href="#package-asset-uri">package</a> dependencies for Pkl modules within a logical project.</p>
</li>
<li>
<p>It enables packaging and sharing the contents of the project as a <a href="#package-asset-uri">package</a>.</p>
</li>
<li>
<p>It allows importing packages via dependency notation.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="project-dependencies"><a class="anchor" href="#project-dependencies"></a><a class="link" href="#project-dependencies">Dependencies</a></h4>
<div class="paragraph">
<p>A project is useful for managing <a href="#package-asset-uri">package</a> dependencies.</p>
</div>
<div class="paragraph">
<p>Within a PklProject file, dependencies can be defined:</p>
</div>
<div class="listingblock">
<div class="title">PklProject</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;pkl:Project&quot;</span>

<span class="hljs-property">dependencies</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;birds&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="hljs-property">uri</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;package://example.com/birds@1.0.0&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare dependency on <code>package://example.com/birds@1.0.0</code> with simple name "birds".</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These dependencies can then be imported by their simple name.
This syntax is called <em>dependency notation</em>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;@birds/Bird.pkl&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="hljs-property">pigeon</span><span class="hljs-punctuation">:</span> <span class="hljs-title class_">Bird</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Pigeon&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Dependency notation; imports path <code>/Bird.pkl</code> within dependency <code>package://example.com/birds@1.0.0</code></td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Internally, Pkl assigns URI scheme <code>projectpackage</code> to project dependencies imported using dependency notation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When the project gets published as a <em>package</em>, these names and URIs are preserved as the package&#8217;s dependencies.</p>
</div>
</div>
<div class="sect3">
<h4 id="resolving-dependencies"><a class="anchor" href="#resolving-dependencies"></a><a class="link" href="#resolving-dependencies">Resolving Dependencies</a></h4>
<div class="paragraph">
<p>Dependencies that are declared in a <code>PklProject</code> file must be <em>resolved</em> via CLI command <a href="../pkl-cli/index.html#command-project-resolve" class="xref page"><code>pkl project resolve</code></a>.
This builds a single dependency list, resolving all transitive dependencies, and determines the appropriate version for each package.
It creates or updates a file called <code>PklProject.deps.json</code> in the project&#8217;s root directory with the list of resolved dependencies.</p>
</div>
<div class="paragraph">
<p>When resolving version conflicts, the CLI will pick the latest <a href="https://semver.org">semver</a> minor version of each package.
For example, if the project declares a dependency on package A at <code>1.2.0</code>, and a package transitively declares a dependency on package A at <code>1.3.0</code>, version <code>1.3.0</code> is selected.</p>
</div>
<div class="paragraph">
<p>In short, the algorithm has the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Gather a list of all dependencies, either directly declared or transitive.</p>
</li>
<li>
<p>For each dependency, keep only the newest minor version.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The resolve command is idempotent; given a PklProject file, it always produces the same set of resolved dependencies.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This algorithm is adapted from Go&#8217;s <a href="https://research.swtch.com/vgo-mvs#algorithm_1">minimum version selection</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-package"><a class="anchor" href="#creating-a-package"></a><a class="link" href="#creating-a-package">Creating a Package</a></h4>
<div class="paragraph">
<p>Projects enable the creation of a <a href="#package-asset-uri">package</a>.
To create a package, the <code>package</code> section of a <code>PklProject</code> module must be defined.</p>
</div>
<div class="listingblock">
<div class="title">PklProject</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;pkl:Project&quot;</span>

<span class="hljs-property">package</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;mypackage&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="hljs-property">baseUri</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;package://example.com/<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">name</span><span class="hljs-char escape_">)</span></span>&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="hljs-property">version</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1.0.0&quot;</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="hljs-property">packageZipUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;https://example.com/<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">name</span><span class="hljs-char escape_">)</span></span>/<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">name</span><span class="hljs-char escape_">)</span></span>@<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">version</span><span class="hljs-char escape_">)</span></span>.zip&quot;</span> <i class="conum" data-value="4"></i><b>(4)</b>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The display name of the package. For display purposes only.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The package URI, without the version part.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The version of the package.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The URL to download the package&#8217;s ZIP file.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The package itself is created by the command <a href="../pkl-cli/index.html#command-project-package" class="xref page"><code>pkl project package</code></a>.</p>
</div>
<div class="paragraph">
<p>This command only prepares artifacts to be published.
Once the artifacts are prepared, they are expected to be uploaded to an HTTPS server such that the ZIP asset can be downloaded at path <code>packageZipUrl</code>, and the metadata can be downloaded at <code>https://&lt;package uri&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="local-dependencies"><a class="anchor" href="#local-dependencies"></a><a class="link" href="#local-dependencies">Local dependencies</a></h4>
<div class="paragraph">
<p>A project can depend on a local project as a dependency.
This can be useful for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Structuring a monorepo that publishes multiple packages.</p>
</li>
<li>
<p>Temporarily testing out library changes when used within another project.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To specify a local dependency, import its <code>PklProject</code> file.
The imported <code>PklProject</code> <em>must</em> have a package section defined.</p>
</div>
<div class="listingblock">
<div class="title">birds/PklProject</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;pkl:Project&quot;</span>

<span class="hljs-property">dependencies</span> <span class="hljs-punctuation">{</span>
  [<span class="hljs-string">&quot;fruit&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">import</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;../fruit/PklProject&quot;</span><span class="hljs-punctuation">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-punctuation">}</span>

<span class="hljs-property">package</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;birds&quot;</span>
  <span class="hljs-property">baseUri</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;package://example.com/birds&quot;</span>
  <span class="hljs-property">version</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1.8.3&quot;</span>
  <span class="hljs-property">packageZipUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;https://example.com/birds@<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">version</span><span class="hljs-char escape_">)</span></span>.zip&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify relative project <code>../fruit</code> as a dependency.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">fruit/PklProject</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-pkl hljs" data-lang="pkl"><span class="hljs-keyword">amends</span> <span class="hljs-string">&quot;pkl:Project&quot;</span>

<span class="hljs-property">package</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-property">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;fruit&quot;</span>
  <span class="hljs-property">baseUri</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;package://example.com/fruit&quot;</span>
  <span class="hljs-property">version</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1.5.0&quot;</span>
  <span class="hljs-property">packageZipUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;https://example.com/fruit@<span class="hljs-subst"><span class="hljs-char escape_">\(</span><span class="hljs-property">version</span><span class="hljs-char escape_">)</span></span>.zip&quot;</span>
<span class="hljs-punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>From the perspective of project <code>birds</code>, <code>fruit</code> is just another package.
It can be imported using dependency notation, i.e. <code>import "@fruit/Pear.pkl"</code>.
At runtime, it will resolve to relative path <code>../fruit/Pear.pkl</code>.</p>
</div>
<div class="paragraph">
<p>When packaging projects with local dependencies, both the project and its dependent project must be passed to the <a href="../pkl-cli/index.html#command-project-package" class="xref page"><code>pkl project package</code></a> command.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Pkl&#8217;s string literals have fewer character escape sequences, have stricter rules for line indentation in multiline strings, and do not have a line continuation character.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. By "structure" we mean a list of property names and (optionally) property types.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. By "Use typed objects" we mean to define classes and build data models out of instances of these classes.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. Not counting that every module is a typed object.
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. Strictly speaking, <code>List</code>, <code>Set</code>, and <code>Map</code> are currently soft keywords. The goal is to eventually turn them into regular standard library methods.
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. Also known as <em>dynamic type</em>. We do not use that term to avoid confusion with <code>Dynamic</code>, Pkl&#8217;s dynamic object type.
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. More precisely, they cannot generate properties with a non-constant name.
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. Values that are <a href="#typed-objects"><code>Typed</code></a> are not iterable.
</div>
<div class="footnote" id="_footnotedef_9">
<a href="#_footnoteref_9">9</a>. Only applies to links without custom link text.
</div>
<div class="footnote" id="_footnotedef_10">
<a href="#_footnoteref_10">10</a>. An instance of <code>Listing</code>, <code>Mapping</code>, <code>Dynamic</code>, or (a subclass of) <code>Typed</code>.
</div>
<div class="footnote" id="_footnotedef_11">
<a href="#_footnoteref_11">11</a>. All objects in this chain are instances of the same class, except when a direct conversion between listing, mapping, dynamic, and typed object has occurred. For example, <code>Typed.toDynamic()</code> returns a dynamic object that amends a typed object.
</div>
<div class="footnote" id="_footnotedef_12">
<a href="#_footnoteref_12">12</a>. Method resolution searches the class inheritance rather than prototype chain.
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../language.html">Language</a></span>
  <span class="next"><a href="../standard-library.html">Standard Library</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright Â© 2024-2025 Apple Inc. All rights reserved.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/site-support.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/tabs.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
