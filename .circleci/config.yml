# Generated from CircleCI.pkl. DO NOT EDIT.
version: '2.1'
jobs:
  deploy:
    steps:
    - checkout
    - run:
        command: |-
          curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
          . "$HOME/.cargo/env"
          rustup default stable
        name: Install toolchain
    - run:
        command: |-
          . "$HOME/.cargo/env"
          cat \<<EOF > ~/.cargo/config
          [net]
          git-fetch-with-cli = true
          EOF
          ./gradlew \
            --console=plain \
            pklHtmlHighlighter

          ./gradlew \
            --console=plain \
            npmInstall buildRemoteSite publishRemoteSite
        name: Running deployment
    docker:
    - image: cimg/openjdk:17.0
workflows:
  main:
    jobs:
    - deploy
    when:
      equal:
      - ^main|gh-readonly-queue/main/pr-\d+-[0-9a-f]{40}.*$
      - << pipeline.git.branch >>
